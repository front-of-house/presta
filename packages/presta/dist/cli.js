#!/usr/bin/env node
var Xe=Object.create;var V=Object.defineProperty,Ye=Object.defineProperties,Ze=Object.getOwnPropertyDescriptor,et=Object.getOwnPropertyDescriptors,tt=Object.getOwnPropertyNames,pe=Object.getOwnPropertySymbols,rt=Object.getPrototypeOf,me=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable;var de=(e,t,r)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))me.call(t,r)&&de(e,r,t[r]);if(pe)for(var r of pe(t))ot.call(t,r)&&de(e,r,t[r]);return e},P=(e,t)=>Ye(e,et(t)),st=e=>V(e,"__esModule",{value:!0});var it=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of tt(t))!me.call(e,o)&&o!=="default"&&V(e,o,{get:()=>t[o],enumerable:!(r=Ze(t,o))||r.enumerable});return e},a=e=>it(st(V(e!=null?Xe(rt(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var le=a(require("fs-extra")),Ge=a(require("sade"));var nt="presta",at="0.35.0",lt="Hyper minimal framework for the modern web.",ct="dist/index.js",ut="index.d.ts",pt=["dist","index.d.ts"],mt={presta:"dist/cli.js"},dt={prepare:"pnpm build",build:"node scripts/build",cloc:"pnpx cloc lib/*.ts",typecheck:"pnpx tsc --noEmit"},gt={type:"git",url:"git+ssh://git@github.com/sure-thing/presta.git"},ft="estrattonbailey",ht="MIT",bt={url:"https://github.com/sure-thing/presta/issues"},yt="https://github.com/sure-thing/presta#readme",vt={"@netlify/functions":"^0.7.2","@types/mime-types":"^2.1.0",chokidar:"^3.4.3",deepmerge:"^4.2.2",esbuild:"^0.12.9","esbuild-register":"^2.5.0",filewatcher:"^3.0.1","fs-extra":"^9.0.1","get-port":"^5.1.1",kleur:"^4.1.4","mime-types":"^2.1.31","module-alias":"^2.2.2",ms:"^2.1.2",picomatch:"^2.3.0","pocket.io":"^0.1.4","query-string":"^6.13.7","raw-body":"^2.4.1",regexparam:"^1.3.0","route-sort":"^1.0.0",sade:"^1.7.3",sirv:"^1.0.7","tiny-glob":"^0.2.9","watch-dependency-graph":"^2.6.1"},xt={"@types/fs-extra":"^9.0.12","@types/picomatch":"^2.2.4","@types/sade":"^1.7.3",proxyquire:"^2.1.3","supertest-fetch":"^1.4.3"},ge={name:nt,version:at,description:lt,main:ct,types:ut,files:pt,bin:mt,scripts:dt,repository:gt,author:ft,license:ht,bugs:bt,homepage:yt,dependencies:vt,devDependencies:xt};var O=a(require("kleur"));var w=a(require("path"));function fe(){let e={};function t(i,...c){e[i]&&e[i].map(s=>s(...c))}function r(i,c){return e[i]=e[i]?e[i].concat(c):[c],()=>e[i].splice(e[i].indexOf(c),1)}function o(){e={}}function n(i){return e[i]||[]}return{emit:t,on:r,clear:o,listeners:n}}var he="presta.config.js",v;(function(o){o.PRODUCTION="production",o.DEVELOPMENT="development",o.TEST="test"})(v||(v={}));var wt={pid:process.pid,cwd:process.cwd(),env:v.TEST,debug:!1};function Z(e){return global.__presta__=e,e}function E(){return global.__presta__||Z(wt),global.__presta__}function be(e,{cwd:t}){return e.files&&(e.files=[].concat(e.files).map(r=>w.default.resolve(t,r))),e.output&&(e.output=w.default.resolve(t,e.output)),e.assets&&(e.assets=w.default.resolve(t,e.assets)),e}function k(e,t=!1){try{return require(w.default.resolve(e||he))}catch(r){return f({label:"error",error:r}),t&&process.exit(1),{}}}function ye(){return p({label:"debug",message:"config file values cleared"}),Z(T(P(d({},E()),{config:{}})))}function T({cwd:e=process.cwd(),env:t=E().env,config:r={},cli:o={}}){r=be(d({},r),{cwd:e}),o=be(d({},o),{cwd:e});let n={output:w.default.resolve(e,o.output||r.output||"build"),assets:w.default.resolve(o.assets||r.assets||"public"),files:o.files&&o.files.length?o.files:r.files?[].concat(r.files):[]},i=Z(P(d(d({},E()),n),{env:t,debug:o.debug||E().debug,cwd:e||process.cwd(),configFilepath:w.default.resolve(o.config||he),functionsOutputDir:w.default.join(n.output,"functions"),staticOutputDir:w.default.join(n.output,"static"),routesManifest:w.default.join(n.output,"routes.json"),events:fe()}));return r.plugins&&r.plugins.map(c=>{try{c()}catch(s){f({label:"error",error:s})}}),p({label:"debug",message:`config created ${JSON.stringify(i)}`}),i}var S;(function(n){n.Debug="debug",n.Info="info",n.Warn="warn",n.Err="error"})(S||(S={}));var ve=[],St={[S.Debug]:"magenta",[S.Info]:"blue",[S.Warn]:"yellow",[S.Err]:"red"};function U(e){if(process.env.TESTING)ve.push(e);else{let t=E().debug,r=E().env===v.PRODUCTION?"prod":"dev";if(!t&&e.level===S.Debug)return;console.log([O.default.gray(r),O.default[St[e.level||"info"]](e.label),e.message,e.duration?O.default.gray("+"+e.duration):"",e.error?`

${e.error.stack||e.error}

`:""].filter(Boolean).join(" "))}}function p(e){U(d({level:S.Debug},e))}function y(e){U(d({level:S.Info},e))}function C(e){U(d({level:S.Warn},e))}function f(e){U(d({level:S.Err},e))}function q(...e){E().env===v.TEST?ve.push(e):console.log(...e)}function $(){E().env!==v.TEST&&console.log("")}var K=a(require("fs-extra")),De=a(require("watch-dependency-graph")),ke=a(require("chokidar")),Re=a(require("picomatch"));var z=a(require("fs-extra")),ee=a(require("path")),we=a(require("route-sort"));function xe(e){for(var t=5381,r=e.length;r;)t=t*33^e.charCodeAt(--r);return(t>>>0).toString(36)}function Ft(e,t){let{route:r}=require(e),o=ee.default.basename(e).split(".").reverse().slice(1).reverse().join("."),n=ee.default.join(t.functionsOutputDir,t.env===v.PRODUCTION?o+"-"+xe(z.default.readFileSync(e,"utf8"))+".js":o+".js");return p({label:"debug",message:`generating ${o} lambda`}),delete require.cache[e],delete require.cache[n],z.default.outputFileSync(n,`import { wrapHandler } from 'presta';
import * as file from '${e}';
export const route = file.route
export const handler = wrapHandler(file)`),[r,n]}function G(e,t){let r=e.map(i=>{try{return Ft(i,t)}catch(c){return f({label:"error",error:c}),null}}).filter(Boolean),o=(0,we.default)(r.map(i=>i[0])),n={};for(let i of o){let c=r.find(s=>s[0]===i);c&&(n[i]=c[1])}return z.default.outputFileSync(t.routesManifest,JSON.stringify(n)),r}var te=a(require("fs-extra")),Se=a(require("path")),Fe=a(require("tiny-glob/sync"));function D(e){return/export\s.+\sroute\s+\=/.test(te.default.readFileSync(e,"utf-8"))}function I(e){return/export\s.+\sgetStaticPaths/.test(te.default.readFileSync(e,"utf-8"))}function H(e){return[].concat(e.files).map(t=>(0,Fe.default)(t,{cwd:e.cwd})).flat().map(t=>Se.default.resolve(e.cwd,t))}var Te=a(require("fs-extra")),re=a(require("path")),Oe=a(require("mime-types"));function F(){let e=process.hrtime();return()=>{let[t,r]=process.hrtime(e),o=r/1e6;return t<1?(o>=1?o.toFixed(0):o.toFixed(2))+"ms":t+"."+o.toFixed(0)+"s"}}var Ce=a(require("regexparam"));function Pe(e,t){let r=(0,Ce.default)(t),o=0,n={},i=r.pattern.exec(e)||[];for(;o<r.keys.length;)n[r.keys[o]]=i[++o];return n}function Ct(e){return typeof e=="object"?JSON.stringify(e):e}function J(e){let{isBase64Encoded:t=!1,statusCode:r=200,headers:o={},multiValueHeaders:n={},body:i="",html:c=void 0,json:s=void 0,xml:l=void 0}=typeof e=="string"?{body:e}:e,u="text/html; charset=utf-8";return s?u="application/json; charset=utf-8":l&&(u="application/xml; charset=utf-8"),{isBase64Encoded:t,statusCode:r,headers:d({"Content-Type":u},o),multiValueHeaders:n,body:Ct(i||c||s||l||"")}}var _={};var Ee=a(require("fs-extra")),$e=a(require("path"));function A(e,t){p({label:"debug",message:`removing old static file ${e}`}),Ee.default.remove($e.default.join(t.staticOutputDir,e))}function Pt(e,t="html"){return re.default.extname(e)?e:t==="html"?`${e}/index.html`:`${e}.${t}`}function N(e,t){return new Promise(async(r,o)=>{p({label:"debug",message:`rendering ${JSON.stringify(e)}`});let n=[];for(let i of e){let c=i.replace(t.cwd,"");try{delete require.cache[i];let s=require(i),l=await s.getStaticPaths(),u=_[i]=_[i]||[],m=[];if(!l||!l.length){C({label:"paths",message:`${c} - no paths to render`}),u.forEach(h=>A(h,t));continue}for(let h of l){let ce=F(),B={path:h,params:s.route?Pe(h,s.route):{}},g=J(await s.handler(B,{})),L=g.headers?g.headers["Content-Type"]:"",x=L&&Oe.default.extension(L)||"html",j=Pt(h,x);n.push(j),m.push(j),Te.default.outputFileSync(re.default.join(t.staticOutputDir,j),g.body,"utf-8"),y({label:"built",message:h,duration:ce()})}for(let h of u)m.includes(h)||A(h,t);_[i]=m}catch(s){t.env==="development"?(f({label:"error",message:"errors detected, pausing...",error:s}),r({allGeneratedFiles:n})):(f({label:"error",error:s}),o(s));break}}r({allGeneratedFiles:n})})}function Q(e,t){let r=F();G(e,t),e.length&&y({label:"built",message:"lambdas",duration:r()})}async function je(e){let t=H(e),r=K.default.existsSync(e.configFilepath);t.length||C({label:"paths",message:"no files configured"}),Q(t.filter(D),e);let o=(0,De.default)({alias:{"@":e.cwd}}),n=ke.default.watch(e.cwd,{ignoreInitial:!0,ignored:[e.output,e.assets]});async function i(){t=H(e),await N(t.filter(I),e),Q(t.filter(D),e)}async function c(s){I(s)&&await N([s],e),D(s)&&Q(t.filter(D),e),e.events.emit("refresh"),e.events.emit("done",[s])}o.on("remove",([s])=>{p({label:"watch",message:`fileWatcher - removed ${s}`}),t.splice(t.indexOf(s),1),Q(t.filter(D),e),s===e.configFilepath&&(e=ye(),r=!1,i()),(_[s]||[]).forEach(l=>A(l,e)),e.events.emit("remove",s)}),o.on("change",([s])=>{if(p({label:"watch",message:`fileWatcher - changed ${s}`}),s===e.configFilepath){delete require.cache[e.configFilepath];try{e=T({config:k(e.configFilepath)}),i()}catch(l){f({label:"error",error:l})}}else c(s);e.events.emit("change",s)}),o.on("error",s=>{f({label:"error",error:s})}),n.on("all",async(s,l)=>{if(!(!/add|change/.test(s)||!K.default.existsSync(l)||K.default.lstatSync(l).isDirectory())){if((0,Re.default)(e.files)(l)&&!t.includes(l)&&(p({label:"watch",message:`globalWatcher - add ${l}`}),t.push(l),o.add(l),c(l)),l===e.configFilepath&&!r){p({label:"watch",message:`globalWatcher - add config file ${l}`}),o.add(e.configFilepath);try{e=T({config:k(e.configFilepath)}),r=!0,i()}catch(u){f({label:"error",error:u})}}e.events.emit("add",l)}}),o.add(t),r&&o.add(e.configFilepath);try{t.map(require)}catch(s){f({label:"error",error:s})}}var oe=a(require("fs-extra")),_e=a(require("esbuild"));function Et(e){try{return require(e)}catch(t){return{}}}async function Me(e){let t=F(),r=H(e),o=r.filter(I),n=r.filter(D);if(p({label:"build",message:"starting build"}),!o.length&&!n.length)C({label:"files",message:"no files were found, nothing to build"});else{let i="",c=0,s="",l="",u=await Promise.allSettled([(async()=>{if(o.length){let m=F(),{allGeneratedFiles:h}=await N(o,e);i=m(),c=h.length}})(),(async()=>{if(n.length){let m=F();G(n,e),await(0,_e.build)({entryPoints:Object.values(require(e.routesManifest)),outdir:e.functionsOutputDir,bundle:!0,platform:"node",target:["node12"],minify:!0,allowOverwrite:!0}),s=m()}})(),(async()=>{if(oe.default.existsSync(e.assets)){let m=F();oe.default.copySync(e.assets,e.staticOutputDir),l=m()}})()]);if(u.find(m=>m.status==="rejected")){p({label:"build",message:"build partially failed"}),u.forEach(m=>{m.status==="rejected"&&f({label:"error",error:m.reason})}),process.exit(1);return}(i||s)&&$(),i&&y({label:"static",message:`rendered ${c} file(s)`,duration:i}),s&&y({label:"lambda",message:`compiled ${n.length} function(s)`,duration:s}),l&&y({label:"assets",message:`copied in ${l}`}),(i||s)&&($(),y({label:"complete",message:`in ${t()}`}),$()),e.events.emit("postbuild",{output:e.output,staticOutput:e.staticOutputDir,functionsOutput:e.functionsOutputDir,functionsManifest:Et(e.routesManifest)})}}var ie=a(require("fs")),X=a(require("path")),Be=a(require("http")),Le=a(require("get-port")),ne=a(require("sirv")),Ve=a(require("chokidar")),Ue=a(require("mime-types")),qe=a(require("regexparam"));var se=`<!-- built with presta https://npm.im/presta -->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>404</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="https://unpkg.com/svbstrate@4.1.1/dist/svbstrate.css"
    />
  </head>
  <body>
    <div class="f aic jcc" style="height: 100vh">
      <h2 class="p1" style="color: blue">404 Not Found</h2>
    </div>
  </body>
</html>`;var Ie=a(require("url")),He=a(require("query-string")),Ae=a(require("raw-body")),Ne=a(require("mime-types")),$t=/image|audio|video|application\/pdf|application\/zip|applicaton\/octet-stream/i;function Tt(e){return Boolean(e)&&$t.test(e)}async function We(e){var i;let t=String(e.headers["x-forwarded-for"])||e.connection.remoteAddress||"",r=(i=t.split(t.includes(".")?":":",").pop())==null?void 0:i.trim(),o=Tt(e.headers["content-type"]||""),n=e.headers["content-length"]?await(0,Ae.default)(e,{limit:"1mb",encoding:Ne.default.charset(e.headers["content-type"]||"")||void 0}):void 0;return{path:e.url,httpMethod:e.method,headers:P(d({},e.headers),{"client-ip":r}),multiValueHeaders:Object.keys(e.headers).reduce((c,s)=>e.headers[s]&&!e.headers[s].includes(",")?c:P(d({},c),{[s]:e.headers[s].split(",")}),{}),queryStringParameters:(0,He.parse)((0,Ie.parse)(e.url).query),body:n?new Buffer(n).toString(o?"base64":"utf8"):null,isBase64Encoded:o}}function R(e,t){let r=J(t);for(let o in t.multiValueHeaders)e.setHeader(o,String(t.multiValueHeaders[o]));for(let o in t.headers)e.setHeader(o,String(t.headers[o]));e.statusCode=r.statusCode,e.write(r.body),e.end()}var Ot=["position: fixed","bottom: 24px","right: 24px","width: 32px","height: 32px","border-radius: 32px","background: white","color: #FF7A93","font-size: 20px","font-weight: bold","text-align: center","line-height: 31px","box-shadow: 0px 0px 1px rgba(0, 0, 0, 0.04), 0px 4px 8px rgba(0, 0, 0, 0.04), 0px 16px 24px rgba(0, 0, 0, 0.04), 0px 24px 32px rgba(0, 0, 0, 0.04)"],M=`
  <div style="${Ot.join(";")}">~</div>
`;function ze(e,t){let r=X.default.join(e,t);if(!X.default.extname(t))try{return ie.default.readFileSync(X.default.join(e,t,"index.html"),"utf8")}catch(o){}return ie.default.readFileSync(r,"utf8")}function Dt({port:e}){return`
    <script>
      (function (global) {
        try {
          const socketio = document.createElement('script')
          socketio.src = 'https://unpkg.com/pocket.io@0.1.4/min.js'
          socketio.onload = function init () {
            var disconnected = false
            var socket = io('http://localhost:${e}', {
              reconnectionAttempts: 3
            })
            socket.on('connect', function() { console.log('presta connected') })
            socket.on('refresh', function() {
              global.location.reload()
            })
            socket.on('disconnect', function() {
              disconnected = true
            })
            socket.on('reconnect_failed', function(e) {
              if (disconnected) return
              console.error("presta - connection to server on :${e} failed")
            })
          }
          document.head.appendChild(socketio)
        } catch (e) {}
      })(this);
    <\/script>
  `}function kt({port:e,config:t}){let r=Dt({port:e}),o=t.staticOutputDir,n=t.assets;return async function(c,s){let l=F(),u=c.url;if(/^.+\..+$/.test(u)&&!/\.html?$/.test(u))p({label:"debug",message:`attempting to serve static asset ${u}`}),(0,ne.default)(n,{dev:!0})(c,s,()=>{(0,ne.default)(o,{dev:!0})(c,s,()=>{C({label:"serve",message:`404 ${u}`,duration:l()}),R(s,{statusCode:404,body:se+r+M})})});else try{p({label:"debug",message:`attempting to render static HTML for ${u}`});let m=ze(o,u)+r+M;y({label:"serve",message:`200 ${u}`,duration:l()}),R(s,{body:m})}catch(m){p({label:"debug",message:"serve error",error:m}),/ENOENT|EISDIR/.test(m.message)||console.error(m);try{let h=require(t.routesManifest),B=Object.keys(h).map(g=>({matcher:(0,qe.default)(g),route:g})).filter(({matcher:g})=>g.pattern.test(u.split("?")[0])).map(({route:g})=>h[g])[0];if(B){p({label:"debug",message:`attempting to render lambda for ${u}`});let{handler:g}=require(B),L=await We(c),x=await g(L,{}),j=x.headers||{},Ke=x.statusCode>299&&x.statusCode<399,ue=j["Content-Type"],Qe=ue?Ue.default.extension(ue):"html";y({label:"serve",message:`${x.statusCode} ${Ke?j.Location:u}`,duration:l()}),R(s,{statusCode:x.statusCode,headers:x.headers,multiValueHeaders:x.multiValueHeaders,body:Qe==="html"?(x.body||"").split("</body>")[0]+r+M:x.body})}else{p({label:"debug",message:`attempting to render static 404.html page for ${u}`});try{let g=ze(o,"404")+r+M;C({label:"serve",message:`404 ${u}`,duration:l()}),R(s,{statusCode:404,body:g})}catch(g){g.message.includes("ENOENT")||console.error(g),p({label:"debug",message:`rendering default 404 HTML page for ${u}`}),C({label:"serve",message:`404 ${u}`,duration:l()}),R(s,{statusCode:404,body:se+r+M})}}}catch(h){p({label:"debug",message:`rendering default 500 HTML page for ${u}`}),f({label:"serve",message:`500 ${u}`,error:h,duration:l()}),R(s,{statusCode:500,body:""+r+M})}}}}async function ae(e){let t=await(0,Le.default)({port:4e3}),r=Be.default.createServer(kt({port:t,config:e})).listen(t),o=require("pocket.io")(r,{serveClient:!1});return e.events.on("refresh",()=>{p({label:"debug",message:"refresh event received"}),o.emit("refresh")}),Ve.default.watch(e.assets,{ignoreInitial:!0}).on("all",()=>{e.events.emit("refresh")}),{port:t}}var W=(0,Ge.default)("presta"),Y="presta.config.js";function Je(e={}){require("module-alias").addAliases({"@":process.cwd(),"presta:internal":__dirname}),require("esbuild-register/dist/node").register(e)}W.version(ge.version).option("--config, -c",`Path to a config file \u2014 defaults to ${Y}`).option("--output, -o","Specify output directory for built files \u2014 defaults to ./build").option("--assets, -a","Specify static asset directory \u2014 defaults to ./public").option("--debug, -d","Enable debug mode (prints more logs)");W.command("build","Render files(s) to output directory.",{default:!0}).example("build").example("build files/**/*.js").example(`build -c ${Y}`).action(async e=>{Je(),console.clear();let t=T({env:v.PRODUCTION,config:k(e.config,!0),cli:P(d({},e),{files:e._})});le.default.emptyDirSync(t.output),q(`${O.default.blue("presta build")}`),$(),await Me(t)});W.command("watch").option("--no-serve, -n","Do not run local dev server.",!1).describe("Watch and build files(s) to output directory").example("watch").example("watch ./files/**/*.js").example("watch ./files/**/*.js -o ./out").example(`watch -c ${Y}`).action(async e=>{Je(),console.clear();let t=T({env:v.DEVELOPMENT,config:k(e.config),cli:P(d({},e),{files:e._})});if(le.default.emptyDirSync(t.output),e.n)y({label:"dev"}),$();else{let r=await ae(t);q(`${O.default.blue("presta dev")} - http://localhost:${r.port}`),$()}je(t)});W.command("serve").describe("Serve built files.").example("serve").example("serve -o ./out").example(`watch -c ${Y}`).action(async e=>{console.clear();let t=T({env:v.PRODUCTION,config:k(e.config),cli:e}),r=await ae(t);q(`${O.default.blue("presta serve")} - http://localhost:${r.port}`),$()});W.parse(process.argv);
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vbGliL2NsaS50cyIsICIuLi9saWIvbG9nLnRzIiwgIi4uL2xpYi9jb25maWcudHMiLCAiLi4vbGliL2NyZWF0ZUVtaXR0ZXIudHMiLCAiLi4vbGliL3dhdGNoLnRzIiwgIi4uL2xpYi9vdXRwdXRMYW1iZGFzLnRzIiwgIi4uL2xpYi9oYXNoQ29udGVudC50cyIsICIuLi9saWIvZ2V0RmlsZXMudHMiLCAiLi4vbGliL3JlbmRlclN0YXRpY0VudHJpZXMudHMiLCAiLi4vbGliL3RpbWVyLnRzIiwgIi4uL2xpYi9nZXRSb3V0ZVBhcmFtcy50cyIsICIuLi9saWIvbm9ybWFsaXplUmVzcG9uc2UudHMiLCAiLi4vbGliL2J1aWx0U3RhdGljRmlsZXMudHMiLCAiLi4vbGliL3JlbW92ZUJ1aWx0U3RhdGljRmlsZS50cyIsICIuLi9saWIvYnVpbGQudHMiLCAiLi4vbGliL3NlcnZlLnRzIiwgIi4uL2xpYi9kZWZhdWx0NDA0LnRzIiwgIi4uL2xpYi9yZXF1ZXN0VG9FdmVudC50cyIsICIuLi9saWIvc2VuZFNlcnZlcmxlc3NSZXNwb25zZS50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiIyEvdXNyL2Jpbi9lbnYgbm9kZVxuXG5pbXBvcnQgZnMgZnJvbSAnZnMtZXh0cmEnXG5pbXBvcnQgc2FkZSBmcm9tICdzYWRlJ1xuXG5pbXBvcnQgcGtnIGZyb20gJy4uL3BhY2thZ2UuanNvbidcblxuaW1wb3J0ICogYXMgbG9nZ2VyIGZyb20gJy4vbG9nJ1xuaW1wb3J0IHsgY3JlYXRlQ29uZmlnLCBnZXRDb25maWdGaWxlLCBFbnYgfSBmcm9tICcuL2NvbmZpZydcbmltcG9ydCB7IHdhdGNoIH0gZnJvbSAnLi93YXRjaCdcbmltcG9ydCB7IGJ1aWxkIH0gZnJvbSAnLi9idWlsZCdcbmltcG9ydCB7IHNlcnZlIH0gZnJvbSAnLi9zZXJ2ZSdcblxuY29uc3QgcHJvZyA9IHNhZGUoJ3ByZXN0YScpXG5jb25zdCBDT05GSUdfREVGQVVMVCA9ICdwcmVzdGEuY29uZmlnLmpzJ1xuXG5mdW5jdGlvbiByZWdpc3RlclJ1bnRpbWUob3B0aW9ucyA9IHt9KSB7XG4gIHJlcXVpcmUoJ21vZHVsZS1hbGlhcycpLmFkZEFsaWFzZXMoe1xuICAgICdAJzogcHJvY2Vzcy5jd2QoKSxcbiAgICAncHJlc3RhOmludGVybmFsJzogX19kaXJuYW1lLCAvLyB3aGVyZXZlciB0aGlzIGlzIHJ1bm5pbmcgZnJvbVxuICB9KVxuXG4gIHJlcXVpcmUoJ2VzYnVpbGQtcmVnaXN0ZXIvZGlzdC9ub2RlJykucmVnaXN0ZXIob3B0aW9ucylcbn1cblxucHJvZ1xuICAudmVyc2lvbihwa2cudmVyc2lvbilcbiAgLm9wdGlvbignLS1jb25maWcsIC1jJywgYFBhdGggdG8gYSBjb25maWcgZmlsZSBcdTIwMTQgZGVmYXVsdHMgdG8gJHtDT05GSUdfREVGQVVMVH1gKVxuICAub3B0aW9uKCctLW91dHB1dCwgLW8nLCBgU3BlY2lmeSBvdXRwdXQgZGlyZWN0b3J5IGZvciBidWlsdCBmaWxlcyBcdTIwMTQgZGVmYXVsdHMgdG8gLi9idWlsZGApXG4gIC5vcHRpb24oJy0tYXNzZXRzLCAtYScsIGBTcGVjaWZ5IHN0YXRpYyBhc3NldCBkaXJlY3RvcnkgXHUyMDE0IGRlZmF1bHRzIHRvIC4vcHVibGljYClcbiAgLm9wdGlvbignLS1kZWJ1ZywgLWQnLCBgRW5hYmxlIGRlYnVnIG1vZGUgKHByaW50cyBtb3JlIGxvZ3MpYClcblxucHJvZ1xuICAuY29tbWFuZCgnYnVpbGQnLCAnUmVuZGVyIGZpbGVzKHMpIHRvIG91dHB1dCBkaXJlY3RvcnkuJywgeyBkZWZhdWx0OiB0cnVlIH0pXG4gIC5leGFtcGxlKGBidWlsZGApXG4gIC5leGFtcGxlKGBidWlsZCBmaWxlcy8qKi8qLmpzYClcbiAgLmV4YW1wbGUoYGJ1aWxkIC1jICR7Q09ORklHX0RFRkFVTFR9YClcbiAgLmFjdGlvbihhc3luYyAob3B0cykgPT4ge1xuICAgIHJlZ2lzdGVyUnVudGltZSgpXG5cbiAgICBjb25zb2xlLmNsZWFyKClcblxuICAgIGNvbnN0IGNvbmZpZyA9IGNyZWF0ZUNvbmZpZyh7XG4gICAgICBlbnY6IEVudi5QUk9EVUNUSU9OLFxuICAgICAgY29uZmlnOiBnZXRDb25maWdGaWxlKG9wdHMuY29uZmlnLCB0cnVlKSxcbiAgICAgIGNsaToge1xuICAgICAgICAuLi5vcHRzLFxuICAgICAgICBmaWxlczogb3B0cy5fLFxuICAgICAgfSxcbiAgICB9KVxuXG4gICAgZnMuZW1wdHlEaXJTeW5jKGNvbmZpZy5vdXRwdXQpXG5cbiAgICBsb2dnZXIucmF3KGAke2xvZ2dlci5jb2xvcnMuYmx1ZSgncHJlc3RhIGJ1aWxkJyl9YClcbiAgICBsb2dnZXIubmV3bGluZSgpXG5cbiAgICBhd2FpdCBidWlsZChjb25maWcpXG4gIH0pXG5cbnByb2dcbiAgLmNvbW1hbmQoJ3dhdGNoJylcbiAgLm9wdGlvbignLS1uby1zZXJ2ZSwgLW4nLCBgRG8gbm90IHJ1biBsb2NhbCBkZXYgc2VydmVyLmAsIGZhbHNlKVxuICAuZGVzY3JpYmUoJ1dhdGNoIGFuZCBidWlsZCBmaWxlcyhzKSB0byBvdXRwdXQgZGlyZWN0b3J5JylcbiAgLmV4YW1wbGUoYHdhdGNoYClcbiAgLmV4YW1wbGUoYHdhdGNoIC4vZmlsZXMvKiovKi5qc2ApXG4gIC5leGFtcGxlKGB3YXRjaCAuL2ZpbGVzLyoqLyouanMgLW8gLi9vdXRgKVxuICAuZXhhbXBsZShgd2F0Y2ggLWMgJHtDT05GSUdfREVGQVVMVH1gKVxuICAuYWN0aW9uKGFzeW5jIChvcHRzKSA9PiB7XG4gICAgcmVnaXN0ZXJSdW50aW1lKClcblxuICAgIGNvbnNvbGUuY2xlYXIoKVxuXG4gICAgY29uc3QgY29uZmlnID0gY3JlYXRlQ29uZmlnKHtcbiAgICAgIGVudjogRW52LkRFVkVMT1BNRU5ULFxuICAgICAgY29uZmlnOiBnZXRDb25maWdGaWxlKG9wdHMuY29uZmlnKSxcbiAgICAgIGNsaToge1xuICAgICAgICAuLi5vcHRzLFxuICAgICAgICBmaWxlczogb3B0cy5fLFxuICAgICAgfSxcbiAgICB9KVxuXG4gICAgZnMuZW1wdHlEaXJTeW5jKGNvbmZpZy5vdXRwdXQpXG5cbiAgICBpZiAoIW9wdHMubikge1xuICAgICAgY29uc3Qgc2VydmVyID0gYXdhaXQgc2VydmUoY29uZmlnKVxuXG4gICAgICBsb2dnZXIucmF3KGAke2xvZ2dlci5jb2xvcnMuYmx1ZSgncHJlc3RhIGRldicpfSAtIGh0dHA6Ly9sb2NhbGhvc3Q6JHtzZXJ2ZXIucG9ydH1gKVxuICAgICAgbG9nZ2VyLm5ld2xpbmUoKVxuICAgIH0gZWxzZSB7XG4gICAgICBsb2dnZXIuaW5mbyh7XG4gICAgICAgIGxhYmVsOiAnZGV2JyxcbiAgICAgIH0pXG4gICAgICBsb2dnZXIubmV3bGluZSgpXG4gICAgfVxuXG4gICAgd2F0Y2goY29uZmlnKVxuICB9KVxuXG5wcm9nXG4gIC5jb21tYW5kKCdzZXJ2ZScpXG4gIC5kZXNjcmliZSgnU2VydmUgYnVpbHQgZmlsZXMuJylcbiAgLmV4YW1wbGUoYHNlcnZlYClcbiAgLmV4YW1wbGUoYHNlcnZlIC1vIC4vb3V0YClcbiAgLmV4YW1wbGUoYHdhdGNoIC1jICR7Q09ORklHX0RFRkFVTFR9YClcbiAgLmFjdGlvbihhc3luYyAob3B0cykgPT4ge1xuICAgIGNvbnNvbGUuY2xlYXIoKVxuXG4gICAgY29uc3QgY29uZmlnID0gY3JlYXRlQ29uZmlnKHtcbiAgICAgIGVudjogRW52LlBST0RVQ1RJT04sXG4gICAgICBjb25maWc6IGdldENvbmZpZ0ZpbGUob3B0cy5jb25maWcpLFxuICAgICAgY2xpOiBvcHRzLFxuICAgIH0pXG4gICAgY29uc3Qgc2VydmVyID0gYXdhaXQgc2VydmUoY29uZmlnKVxuXG4gICAgbG9nZ2VyLnJhdyhgJHtsb2dnZXIuY29sb3JzLmJsdWUoJ3ByZXN0YSBzZXJ2ZScpfSAtIGh0dHA6Ly9sb2NhbGhvc3Q6JHtzZXJ2ZXIucG9ydH1gKVxuICAgIGxvZ2dlci5uZXdsaW5lKClcbiAgfSlcblxucHJvZy5wYXJzZShwcm9jZXNzLmFyZ3YpXG4iLCAiaW1wb3J0IGMsIHsgS2xldXIgfSBmcm9tICdrbGV1cidcblxuaW1wb3J0IHsgZ2V0Q3VycmVudENvbmZpZywgRW52IH0gZnJvbSAnLi9jb25maWcnXG5cbmV4cG9ydCBlbnVtIExldmVscyB7XG4gIERlYnVnID0gJ2RlYnVnJyxcbiAgSW5mbyA9ICdpbmZvJyxcbiAgV2FybiA9ICd3YXJuJyxcbiAgRXJyID0gJ2Vycm9yJyxcbn1cblxuZXhwb3J0IHR5cGUgTWVzc2FnZSA9IHtcbiAgbGV2ZWw/OiBMZXZlbHNcbiAgbGFiZWw6IHN0cmluZyB8IG51bWJlclxuICBtZXNzYWdlPzogc3RyaW5nXG4gIGR1cmF0aW9uPzogc3RyaW5nIHwgbnVtYmVyXG4gIGVycm9yPzogRXJyb3Jcbn1cblxubGV0IGxvZ3M6IGFueVtdID0gW11cblxuY29uc3QgY29sb3JzID0ge1xuICBbTGV2ZWxzLkRlYnVnXTogJ21hZ2VudGEnLFxuICBbTGV2ZWxzLkluZm9dOiAnYmx1ZScsXG4gIFtMZXZlbHMuV2Fybl06ICd5ZWxsb3cnLFxuICBbTGV2ZWxzLkVycl06ICdyZWQnLFxufVxuXG5leHBvcnQgeyBjIGFzIGNvbG9ycyB9XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRMb2dzKCkge1xuICBpZiAoZ2V0Q3VycmVudENvbmZpZygpLmVudiAhPT0gRW52LlRFU1QpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludGVybmFsIG1ldGhvZCB3YXMgY2FsbGVkIG91dHNpZGUgdGVzdCBtb2RlJylcbiAgfVxuXG4gIHJldHVybiBsb2dzXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2dnZXIobWVzc2FnZTogTWVzc2FnZSkge1xuICBpZiAocHJvY2Vzcy5lbnYuVEVTVElORykge1xuICAgIGxvZ3MucHVzaChtZXNzYWdlKVxuICB9IGVsc2Uge1xuICAgIGNvbnN0IGRlYnVnID0gZ2V0Q3VycmVudENvbmZpZygpLmRlYnVnXG4gICAgY29uc3QgY29udGV4dCA9IGdldEN1cnJlbnRDb25maWcoKS5lbnYgPT09IEVudi5QUk9EVUNUSU9OID8gJ3Byb2QnIDogJ2RldidcblxuICAgIGlmICghZGVidWcgJiYgbWVzc2FnZS5sZXZlbCA9PT0gTGV2ZWxzLkRlYnVnKSByZXR1cm5cblxuICAgIGNvbnNvbGUubG9nKFxuICAgICAgW1xuICAgICAgICBjLmdyYXkoY29udGV4dCksXG4gICAgICAgIGNbY29sb3JzW21lc3NhZ2UubGV2ZWwgfHwgJ2luZm8nXSBhcyBrZXlvZiBLbGV1cl0obWVzc2FnZS5sYWJlbCksXG4gICAgICAgIG1lc3NhZ2UubWVzc2FnZSxcbiAgICAgICAgbWVzc2FnZS5kdXJhdGlvbiA/IGMuZ3JheSgnKycgKyBtZXNzYWdlLmR1cmF0aW9uKSA6ICcnLFxuICAgICAgICBtZXNzYWdlLmVycm9yID8gYFxcblxcbiR7bWVzc2FnZS5lcnJvci5zdGFjayB8fCBtZXNzYWdlLmVycm9yfVxcblxcbmAgOiAnJyxcbiAgICAgIF1cbiAgICAgICAgLmZpbHRlcihCb29sZWFuKVxuICAgICAgICAuam9pbignICcpXG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWJ1ZyhtZXNzYWdlOiBNZXNzYWdlKSB7XG4gIGxvZ2dlcih7IGxldmVsOiBMZXZlbHMuRGVidWcsIC4uLm1lc3NhZ2UgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluZm8obWVzc2FnZTogTWVzc2FnZSkge1xuICBsb2dnZXIoeyBsZXZlbDogTGV2ZWxzLkluZm8sIC4uLm1lc3NhZ2UgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHdhcm4obWVzc2FnZTogTWVzc2FnZSkge1xuICBsb2dnZXIoeyBsZXZlbDogTGV2ZWxzLldhcm4sIC4uLm1lc3NhZ2UgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVycm9yKG1lc3NhZ2U6IE1lc3NhZ2UpIHtcbiAgbG9nZ2VyKHsgbGV2ZWw6IExldmVscy5FcnIsIC4uLm1lc3NhZ2UgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJhdyguLi5hcmdzOiBhbnlbXSkge1xuICBpZiAoZ2V0Q3VycmVudENvbmZpZygpLmVudiA9PT0gRW52LlRFU1QpIHtcbiAgICBsb2dzLnB1c2goYXJncylcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLmxvZyguLi5hcmdzKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBuZXdsaW5lKCkge1xuICBpZiAoZ2V0Q3VycmVudENvbmZpZygpLmVudiA9PT0gRW52LlRFU1QpIHJldHVyblxuICBjb25zb2xlLmxvZygnJylcbn1cbiIsICJpbXBvcnQgcGF0aCBmcm9tICdwYXRoJ1xuXG5pbXBvcnQgKiBhcyBsb2dnZXIgZnJvbSAnLi9sb2cnXG5pbXBvcnQgeyBjcmVhdGVFbWl0dGVyIH0gZnJvbSAnLi9jcmVhdGVFbWl0dGVyJ1xuXG5pbXBvcnQgdHlwZSB7IFByZXN0YSwgQ29uZmlnLCBDTEkgfSBmcm9tICcuLidcblxuY29uc3QgZGVmYXVsdENvbmZpZ0ZpbGVwYXRoID0gJ3ByZXN0YS5jb25maWcuanMnXG5cbmV4cG9ydCBlbnVtIEVudiB7XG4gIFBST0RVQ1RJT04gPSAncHJvZHVjdGlvbicsXG4gIERFVkVMT1BNRU5UID0gJ2RldmVsb3BtZW50JyxcbiAgVEVTVCA9ICd0ZXN0Jyxcbn1cblxuY29uc3QgZGVmYXVsdENvbmZpZyA9IHtcbiAgcGlkOiBwcm9jZXNzLnBpZCxcbiAgY3dkOiBwcm9jZXNzLmN3ZCgpLFxuICBlbnY6IEVudi5URVNULFxuICBkZWJ1ZzogZmFsc2UsXG59IGFzIFByZXN0YVxuXG5mdW5jdGlvbiBzZXRDdXJyZW50Q29uZmlnKGNvbmZpZzogUHJlc3RhKTogUHJlc3RhIHtcbiAgLy8gQHRzLWlnbm9yZVxuICBnbG9iYWwuX19wcmVzdGFfXyA9IGNvbmZpZ1xuICByZXR1cm4gY29uZmlnXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50Q29uZmlnKCk6IFByZXN0YSB7XG4gIC8vIEB0cy1pZ25vcmVcbiAgaWYgKCFnbG9iYWwuX19wcmVzdGFfXykge1xuICAgIHNldEN1cnJlbnRDb25maWcoZGVmYXVsdENvbmZpZylcbiAgfVxuXG4gIC8vIEB0cy1pZ25vcmVcbiAgcmV0dXJuIGdsb2JhbC5fX3ByZXN0YV9fXG59XG5cbmZ1bmN0aW9uIHJlc29sdmVBYnNvbHV0ZVBhdGhzKGNvbmZpZzogQ29uZmlnLCB7IGN3ZCB9OiB7IGN3ZDogc3RyaW5nIH0pIHtcbiAgaWYgKGNvbmZpZy5maWxlcykgY29uZmlnLmZpbGVzID0gKFtdIGFzIHN0cmluZ1tdKS5jb25jYXQoY29uZmlnLmZpbGVzKS5tYXAoKHApID0+IHBhdGgucmVzb2x2ZShjd2QsIHApKVxuICBpZiAoY29uZmlnLm91dHB1dCkgY29uZmlnLm91dHB1dCA9IHBhdGgucmVzb2x2ZShjd2QsIGNvbmZpZy5vdXRwdXQpXG4gIGlmIChjb25maWcuYXNzZXRzKSBjb25maWcuYXNzZXRzID0gcGF0aC5yZXNvbHZlKGN3ZCwgY29uZmlnLmFzc2V0cylcbiAgcmV0dXJuIGNvbmZpZ1xufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfY2xlYXJDdXJyZW50Q29uZmlnKCkge1xuICAvLyBAdHMtaWdub3JlXG4gIGdsb2JhbC5fX3ByZXN0YV9fID0ge1xuICAgIHBpZDogcHJvY2Vzcy5waWQsXG4gICAgY3dkOiBwcm9jZXNzLmN3ZCgpLFxuICAgIGVudjogRW52LlRFU1QsXG4gIH1cbn1cblxuLyoqXG4gKiBGZXRjaCBhIGNvbmZpZyBmaWxlLiBJZiBvbmUgd2FzIHNwZWNpZmllZCBieSB0aGUgdXNlciwgbGV0IHRoZW0ga25vdyBpZlxuICogYW55dGhpbmcgZ29lcyB3cm9uZy4gT3V0c2lkZSB3YXRjaCBtb2RlLCB0aGlzIHNob3VsZCBleGl0KDEpIGlmIHRoZSB1c2VyXG4gKiBwcm92aWRlZCBhIGNvbmZpZyBhbmQgdGhlcmUgd2FzIGFuIGVycm9yXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb25maWdGaWxlKGZpbGVwYXRoOiBzdHJpbmcsIHNob3VsZEV4aXQ6IGJvb2xlYW4gPSBmYWxzZSkge1xuICB0cnkge1xuICAgIHJldHVybiByZXF1aXJlKHBhdGgucmVzb2x2ZShmaWxlcGF0aCB8fCBkZWZhdWx0Q29uZmlnRmlsZXBhdGgpKVxuICB9IGNhdGNoIChlKSB7XG4gICAgbG9nZ2VyLmVycm9yKHtcbiAgICAgIGxhYmVsOiAnZXJyb3InLFxuICAgICAgZXJyb3I6IGUsXG4gICAgfSlcblxuICAgIC8vIHdlJ3JlIG5vdCBpbiB3YXRjaCBtb2RlLCBleGl0XG4gICAgaWYgKHNob3VsZEV4aXQpIHByb2Nlc3MuZXhpdCgxKVxuXG4gICAgcmV0dXJuIHt9XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGluc3RhbmNlIF93aXRob3V0XyBhbnkgdmFsdWVzIHByb3ZpZGVkIGJ5IHRoZSBjb25maWcgZmlsZS5cbiAqIFRoaXMgaXMgdXNlZCB3aGVuIHRoZSB1c2VyIGRlbGV0ZXMgdGhlaXIgY29uZmlnIGZpbGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVDb25maWdWYWx1ZXMoKSB7XG4gIGxvZ2dlci5kZWJ1Zyh7XG4gICAgbGFiZWw6ICdkZWJ1ZycsXG4gICAgbWVzc2FnZTogYGNvbmZpZyBmaWxlIHZhbHVlcyBjbGVhcmVkYCxcbiAgfSlcblxuICByZXR1cm4gc2V0Q3VycmVudENvbmZpZyhcbiAgICBjcmVhdGVDb25maWcoe1xuICAgICAgLi4uZ2V0Q3VycmVudENvbmZpZygpLFxuICAgICAgY29uZmlnOiB7fSxcbiAgICB9KVxuICApXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDb25maWcoe1xuICBjd2QgPSBwcm9jZXNzLmN3ZCgpLFxuICBlbnYgPSBnZXRDdXJyZW50Q29uZmlnKCkuZW52LFxuICBjb25maWcgPSB7fSxcbiAgY2xpID0ge30sXG59OiB7XG4gIGN3ZD86IHN0cmluZ1xuICBlbnY/OiBFbnZcbiAgY29uZmlnPzogUGFydGlhbDxDb25maWc+XG4gIGNsaT86IFBhcnRpYWw8Q0xJPlxufSkge1xuICBjb25maWcgPSByZXNvbHZlQWJzb2x1dGVQYXRocyh7IC4uLmNvbmZpZyB9LCB7IGN3ZCB9KSAvLyBjbG9uZSByZWFkLW9ubHkgb2JqXG4gIGNsaSA9IHJlc29sdmVBYnNvbHV0ZVBhdGhzKHsgLi4uY2xpIH0sIHsgY3dkIH0pXG5cbiAgLy8gY29tYmluZWQgY29uZmlnLCBwcmVmZXJlbmNlIHRvIENMSSBhcmdzXG4gIGNvbnN0IG1lcmdlZCA9IHtcbiAgICBvdXRwdXQ6IHBhdGgucmVzb2x2ZShjd2QsIGNsaS5vdXRwdXQgfHwgY29uZmlnLm91dHB1dCB8fCAnYnVpbGQnKSxcbiAgICBhc3NldHM6IHBhdGgucmVzb2x2ZShjbGkuYXNzZXRzIHx8IGNvbmZpZy5hc3NldHMgfHwgJ3B1YmxpYycpLFxuICAgIGZpbGVzOiBjbGkuZmlsZXMgJiYgY2xpLmZpbGVzLmxlbmd0aCA/IGNsaS5maWxlcyA6IGNvbmZpZy5maWxlcyA/IChbXSBhcyBzdHJpbmdbXSkuY29uY2F0KGNvbmZpZy5maWxlcykgOiBbXSxcbiAgfVxuXG4gIC8vIHNldCBpbnN0YW5jZVxuICBjb25zdCBjdXJyZW50ID0gc2V0Q3VycmVudENvbmZpZyh7XG4gICAgLi4uZ2V0Q3VycmVudENvbmZpZygpLFxuICAgIC4uLm1lcmdlZCwgLy8gb3ZlcndyaXRlcyBldmVyeSB0aW1lXG4gICAgZW52LFxuICAgIGRlYnVnOiBjbGkuZGVidWcgfHwgZ2V0Q3VycmVudENvbmZpZygpLmRlYnVnLFxuICAgIGN3ZDogY3dkIHx8IHByb2Nlc3MuY3dkKCksXG4gICAgY29uZmlnRmlsZXBhdGg6IHBhdGgucmVzb2x2ZShjbGkuY29uZmlnIHx8IGRlZmF1bHRDb25maWdGaWxlcGF0aCksXG4gICAgZnVuY3Rpb25zT3V0cHV0RGlyOiBwYXRoLmpvaW4obWVyZ2VkLm91dHB1dCwgJ2Z1bmN0aW9ucycpLFxuICAgIHN0YXRpY091dHB1dERpcjogcGF0aC5qb2luKG1lcmdlZC5vdXRwdXQsICdzdGF0aWMnKSxcbiAgICByb3V0ZXNNYW5pZmVzdDogcGF0aC5qb2luKG1lcmdlZC5vdXRwdXQsICdyb3V0ZXMuanNvbicpLFxuICAgIGV2ZW50czogY3JlYXRlRW1pdHRlcigpLFxuICB9KVxuXG4gIGlmIChjb25maWcucGx1Z2lucykge1xuICAgIGNvbmZpZy5wbHVnaW5zLm1hcCgocCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcCgpXG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcih7XG4gICAgICAgICAgbGFiZWw6ICdlcnJvcicsXG4gICAgICAgICAgZXJyb3I6IGUsXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGxvZ2dlci5kZWJ1Zyh7XG4gICAgbGFiZWw6ICdkZWJ1ZycsXG4gICAgbWVzc2FnZTogYGNvbmZpZyBjcmVhdGVkICR7SlNPTi5zdHJpbmdpZnkoY3VycmVudCl9YCxcbiAgfSlcblxuICByZXR1cm4gY3VycmVudFxufVxuIiwgInR5cGUgY2FsbGFibGUgPSAoLi4uYXJnczogYW55W10pID0+IHZvaWRcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVtaXR0ZXIoKSB7XG4gIGxldCBldmVudHM6IHsgW2V2ZW50OiBzdHJpbmddOiBjYWxsYWJsZVtdIH0gPSB7fVxuXG4gIGZ1bmN0aW9uIGVtaXQoZXY6IHN0cmluZywgLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICBldmVudHNbZXZdID8gZXZlbnRzW2V2XS5tYXAoKGZuOiBjYWxsYWJsZSkgPT4gZm4oLi4uYXJncykpIDogW11cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uKGV2OiBzdHJpbmcsIGZuOiAoLi4uYXJnczogYW55W10pID0+IHZvaWQpIHtcbiAgICBldmVudHNbZXZdID0gZXZlbnRzW2V2XSA/IGV2ZW50c1tldl0uY29uY2F0KGZuKSA6IFtmbl1cbiAgICByZXR1cm4gKCkgPT4gZXZlbnRzW2V2XS5zcGxpY2UoZXZlbnRzW2V2XS5pbmRleE9mKGZuKSwgMSlcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgIGV2ZW50cyA9IHt9XG4gIH1cblxuICBmdW5jdGlvbiBsaXN0ZW5lcnMoZXY6IHN0cmluZykge1xuICAgIHJldHVybiBldmVudHNbZXZdIHx8IFtdXG4gIH1cblxuICByZXR1cm4ge1xuICAgIGVtaXQsXG4gICAgb24sXG4gICAgY2xlYXIsXG4gICAgbGlzdGVuZXJzLFxuICB9XG59XG4iLCAiaW1wb3J0IGZzIGZyb20gJ2ZzLWV4dHJhJ1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IGdyYXBoIGZyb20gJ3dhdGNoLWRlcGVuZGVuY3ktZ3JhcGgnXG5pbXBvcnQgY2hva2lkYXIgZnJvbSAnY2hva2lkYXInXG5pbXBvcnQgbWF0Y2ggZnJvbSAncGljb21hdGNoJ1xuXG5pbXBvcnQgeyBvdXRwdXRMYW1iZGFzIH0gZnJvbSAnLi9vdXRwdXRMYW1iZGFzJ1xuaW1wb3J0ICogYXMgbG9nZ2VyIGZyb20gJy4vbG9nJ1xuaW1wb3J0IHsgZ2V0RmlsZXMsIGlzU3RhdGljLCBpc0R5bmFtaWMgfSBmcm9tICcuL2dldEZpbGVzJ1xuaW1wb3J0IHsgcmVuZGVyU3RhdGljRW50cmllcyB9IGZyb20gJy4vcmVuZGVyU3RhdGljRW50cmllcydcbmltcG9ydCB7IHRpbWVyIH0gZnJvbSAnLi90aW1lcidcbmltcG9ydCB7IGNyZWF0ZUNvbmZpZywgcmVtb3ZlQ29uZmlnVmFsdWVzLCBnZXRDb25maWdGaWxlIH0gZnJvbSAnLi9jb25maWcnXG5pbXBvcnQgeyBidWlsdFN0YXRpY0ZpbGVzIH0gZnJvbSAnLi9idWlsdFN0YXRpY0ZpbGVzJ1xuaW1wb3J0IHsgcmVtb3ZlQnVpbHRTdGF0aWNGaWxlIH0gZnJvbSAnLi9yZW1vdmVCdWlsdFN0YXRpY0ZpbGUnXG5cbmltcG9ydCB0eXBlIHsgUHJlc3RhIH0gZnJvbSAnLi4nXG5cbi8qXG4gKiBXcmFwcyBvdXRwdXRMYW1iZGFzIGZvciBsb2dnaW5nXG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZUxhbWJkYXMoaW5wdXRzOiBzdHJpbmdbXSwgY29uZmlnOiBQcmVzdGEpIHtcbiAgY29uc3QgdGltZSA9IHRpbWVyKClcblxuICAvLyBhbHdheXMgd3JpdGUgdGhpcywgZXZlbiBpZiBpbnB1dHMgPSBbXVxuICBvdXRwdXRMYW1iZGFzKGlucHV0cywgY29uZmlnKVxuXG4gIC8vIGlmIHVzZXIgYWN0dWFsbHkgaGFzIHJvdXRlcyBjb25maWd1cmVkLCBnaXZlIGZlZWRiYWNrXG4gIGlmIChpbnB1dHMubGVuZ3RoKSB7XG4gICAgbG9nZ2VyLmluZm8oe1xuICAgICAgbGFiZWw6ICdidWlsdCcsXG4gICAgICBtZXNzYWdlOiBgbGFtYmRhc2AsXG4gICAgICBkdXJhdGlvbjogdGltZSgpLFxuICAgIH0pXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdhdGNoKGNvbmZpZzogUHJlc3RhKSB7XG4gIC8qXG4gICAqIEdldCBmaWxlcyB0aGF0IG1hdGNoIHN0YXRpYy9keW5hbWljIHBhdHRlcnMgYXQgc3RhcnR1cFxuICAgKi9cbiAgbGV0IGZpbGVzID0gZ2V0RmlsZXMoY29uZmlnKVxuICBsZXQgaGFzQ29uZmlnRmlsZSA9IGZzLmV4aXN0c1N5bmMoY29uZmlnLmNvbmZpZ0ZpbGVwYXRoKVxuXG4gIGlmICghZmlsZXMubGVuZ3RoKSB7XG4gICAgbG9nZ2VyLndhcm4oe1xuICAgICAgbGFiZWw6ICdwYXRocycsXG4gICAgICBtZXNzYWdlOiAnbm8gZmlsZXMgY29uZmlndXJlZCcsXG4gICAgfSlcbiAgfVxuXG4gIC8qXG4gICAqIENyZWF0ZSBpbml0aWFsIGR5bmFtaWMgZW50cnkgcmVnYXJkbGVzcyBvZiBpZiB0aGUgdXNlciBoYXMgcm91dGVzLCBiYyB3ZVxuICAgKiBuZWVkIHRoaXMgZmlsZSB0byBzZXJ2ZSA0MDQgbG9jYWxseVxuICAgKi9cbiAgdXBkYXRlTGFtYmRhcyhmaWxlcy5maWx0ZXIoaXNEeW5hbWljKSwgY29uZmlnKVxuXG4gIC8qXG4gICAqIFNldCB1cCBhbGwgd2F0Y2hlcnNcbiAgICovXG4gIGNvbnN0IGZpbGVXYXRjaGVyID0gZ3JhcGgoeyBhbGlhczogeyAnQCc6IGNvbmZpZy5jd2QgfSB9KVxuICBjb25zdCBnbG9iYWxXYXRjaGVyID0gY2hva2lkYXIud2F0Y2goY29uZmlnLmN3ZCwge1xuICAgIGlnbm9yZUluaXRpYWw6IHRydWUsXG4gICAgaWdub3JlZDogW2NvbmZpZy5vdXRwdXQsIGNvbmZpZy5hc3NldHNdLFxuICB9KVxuXG4gIC8qXG4gICAqIE9uIGEgY29uZmlnIHVwZGF0ZSwgdGhlIHVzZXIgbWF5IGhhdmUgcGFzc2VkIGluIGEgbmV3IGBmaWxlc2AgYXJyYXkgb3JcbiAgICogb3RoZXIgZ2xvYmFsIGNvbmZpZyByZXF1aXJlZCBieSBhbGwgZmlsZXMsIHNvIHdlIG5lZWQgdG8gcmUtZmV0Y2ggYWxsXG4gICAqIGZpbGVzIGFuZCByZWJ1aWxkIGV2ZXJ5dGhpbmcuXG4gICAqL1xuICBhc3luYyBmdW5jdGlvbiBoYW5kbGVDb25maWdVcGRhdGUoKSB7XG4gICAgZmlsZXMgPSBnZXRGaWxlcyhjb25maWcpXG4gICAgYXdhaXQgcmVuZGVyU3RhdGljRW50cmllcyhmaWxlcy5maWx0ZXIoaXNTdGF0aWMpLCBjb25maWcpXG4gICAgdXBkYXRlTGFtYmRhcyhmaWxlcy5maWx0ZXIoaXNEeW5hbWljKSwgY29uZmlnKVxuICB9XG5cbiAgLypcbiAgICogT24gYSBjaGFuZ2VkIGZpbGUsIHdlIGNhbiBqdXN0IHJlbmRlciBpdFxuICAgKi9cbiAgYXN5bmMgZnVuY3Rpb24gaGFuZGxlRmlsZUNoYW5nZShmaWxlOiBzdHJpbmcpIHtcbiAgICAvLyByZW5kZXIganVzdCBmaWxlIHRoYXQgY2hhbmdlZFxuICAgIGlmIChpc1N0YXRpYyhmaWxlKSkge1xuICAgICAgYXdhaXQgcmVuZGVyU3RhdGljRW50cmllcyhbZmlsZV0sIGNvbmZpZylcbiAgICB9XG5cbiAgICAvLyB1cGRhdGUgZHluYW1pYyBlbnRyeSB3aXRoIEFMTCBkeW5hbWljIGZpbGVzXG4gICAgaWYgKGlzRHluYW1pYyhmaWxlKSkge1xuICAgICAgdXBkYXRlTGFtYmRhcyhmaWxlcy5maWx0ZXIoaXNEeW5hbWljKSwgY29uZmlnKVxuICAgIH1cblxuICAgIGNvbmZpZy5ldmVudHMuZW1pdCgncmVmcmVzaCcpXG4gICAgY29uZmlnLmV2ZW50cy5lbWl0KCdkb25lJywgW2ZpbGVdKVxuICB9XG5cbiAgZmlsZVdhdGNoZXIub24oJ3JlbW92ZScsIChbaWRdOiBzdHJpbmdbXSkgPT4ge1xuICAgIGxvZ2dlci5kZWJ1Zyh7XG4gICAgICBsYWJlbDogJ3dhdGNoJyxcbiAgICAgIG1lc3NhZ2U6IGBmaWxlV2F0Y2hlciAtIHJlbW92ZWQgJHtpZH1gLFxuICAgIH0pXG5cbiAgICAvLyByZW1vdmUgZnJvbSBsb2NhbCBoYXNoXG4gICAgZmlsZXMuc3BsaWNlKGZpbGVzLmluZGV4T2YoaWQpLCAxKVxuXG4gICAgLy8gdXBkYXRlIHRoaXMgcmVnYXJkbGVzcywgbm90IHN1cmUgaWYgW2lkXSB3YXMgZHluYW1pYyBvciBzdGF0aWNcbiAgICB1cGRhdGVMYW1iZGFzKGZpbGVzLmZpbHRlcihpc0R5bmFtaWMpLCBjb25maWcpXG5cbiAgICAvLyBpZiBpdCB3YXMgY29uZmlnLCB3ZSBnb3R0YSBkbyBhIHJlc3RhcnRcbiAgICBpZiAoaWQgPT09IGNvbmZpZy5jb25maWdGaWxlcGF0aCkge1xuICAgICAgLy8gZmlsdGVyIG91dCB2YWx1ZXMgZnJvbSB0aGUgY29uZmlnIGZpbGVcbiAgICAgIGNvbmZpZyA9IHJlbW92ZUNvbmZpZ1ZhbHVlcygpXG5cbiAgICAgIC8vIHJlc2V0IHRoaXMhXG4gICAgICBoYXNDb25maWdGaWxlID0gZmFsc2VcblxuICAgICAgaGFuZGxlQ29uZmlnVXBkYXRlKClcbiAgICB9XG5cbiAgICA7KGJ1aWx0U3RhdGljRmlsZXNbaWRdIHx8IFtdKS5mb3JFYWNoKChmaWxlKSA9PiByZW1vdmVCdWlsdFN0YXRpY0ZpbGUoZmlsZSwgY29uZmlnKSlcblxuICAgIGNvbmZpZy5ldmVudHMuZW1pdCgncmVtb3ZlJywgaWQpXG4gIH0pXG5cbiAgZmlsZVdhdGNoZXIub24oJ2NoYW5nZScsIChbaWRdOiBzdHJpbmdbXSkgPT4ge1xuICAgIGxvZ2dlci5kZWJ1Zyh7XG4gICAgICBsYWJlbDogJ3dhdGNoJyxcbiAgICAgIG1lc3NhZ2U6IGBmaWxlV2F0Y2hlciAtIGNoYW5nZWQgJHtpZH1gLFxuICAgIH0pXG5cbiAgICBpZiAoaWQgPT09IGNvbmZpZy5jb25maWdGaWxlcGF0aCkge1xuICAgICAgLy8gY2xlYXIgY29uZmlnIGZpbGUgZm9yIHJlLXJlcXVpcmVcbiAgICAgIGRlbGV0ZSByZXF1aXJlLmNhY2hlW2NvbmZpZy5jb25maWdGaWxlcGF0aF1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gbWVyZ2UgaW4gbmV3IHZhbHVlcyBmcm9tIGNvbmZpZyBmaWxlXG4gICAgICAgIGNvbmZpZyA9IGNyZWF0ZUNvbmZpZyh7XG4gICAgICAgICAgY29uZmlnOiBnZXRDb25maWdGaWxlKGNvbmZpZy5jb25maWdGaWxlcGF0aCksXG4gICAgICAgIH0pXG5cbiAgICAgICAgaGFuZGxlQ29uZmlnVXBkYXRlKClcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKHtcbiAgICAgICAgICBsYWJlbDogJ2Vycm9yJyxcbiAgICAgICAgICBlcnJvcjogZSxcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaGFuZGxlRmlsZUNoYW5nZShpZClcbiAgICB9XG5cbiAgICBjb25maWcuZXZlbnRzLmVtaXQoJ2NoYW5nZScsIGlkKVxuICB9KVxuXG4gIGZpbGVXYXRjaGVyLm9uKCdlcnJvcicsIChlOiBFcnJvcikgPT4ge1xuICAgIGxvZ2dlci5lcnJvcih7XG4gICAgICBsYWJlbDogJ2Vycm9yJyxcbiAgICAgIGVycm9yOiBlLFxuICAgIH0pXG4gIH0pXG5cbiAgLypcbiAgICogZ2xvYmFsV2F0Y2hlciB3YXRjaGVzIHRoZSByYXcgZmlsZSBnbG9icyBwYXNzZWQgdG8gdGhlIENMSSBvciBhcyBgZmlsZXNgXG4gICAqIGluIHRoZSBjb25maWcuIElmIGNoZWNrcyBvbiBhZGQvY2hhbmdlIHRvIHNlZSBpZiBhIGZpbGUgc2hvdWxkIGJlIHVwZ3JhZGVkXG4gICAqIHRvIGEgYSBQcmVzdGEgc291cmNlIGZpbGUsIGFuZCBhZGRlZCB0byB0aGUgZmlsZVdhdGNoZXIuIEl0IGFsc28gd2F0Y2hlc1xuICAgKiBmb3IgYWRkaXRpb24gb2YgYSBjb25maWcgZmlsZS5cbiAgICovXG4gIGdsb2JhbFdhdGNoZXIub24oJ2FsbCcsIGFzeW5jIChldmVudCwgZmlsZSkgPT4ge1xuICAgIC8vIGlnbm9yZSBldmVudHMgaGFuZGxlZCBieSB3ZGcsIG9yIGFueSBkaXJlY3RvcnkgZXZlbnRzXG4gICAgaWYgKCEvYWRkfGNoYW5nZS8udGVzdChldmVudCkgfHwgIWZzLmV4aXN0c1N5bmMoZmlsZSkgfHwgZnMubHN0YXRTeW5jKGZpbGUpLmlzRGlyZWN0b3J5KCkpIHJldHVyblxuXG4gICAgLy8gaWYgYSBmaWxlIGNoYW5nZSBtYXRjaGVzIGFueSBwYWdlcyBnbG9ic1xuICAgIGlmIChtYXRjaChjb25maWcuZmlsZXMpKGZpbGUpICYmICFmaWxlcy5pbmNsdWRlcyhmaWxlKSkge1xuICAgICAgbG9nZ2VyLmRlYnVnKHtcbiAgICAgICAgbGFiZWw6ICd3YXRjaCcsXG4gICAgICAgIG1lc3NhZ2U6IGBnbG9iYWxXYXRjaGVyIC0gYWRkICR7ZmlsZX1gLFxuICAgICAgfSlcblxuICAgICAgZmlsZXMucHVzaChmaWxlKVxuXG4gICAgICBmaWxlV2F0Y2hlci5hZGQoZmlsZSlcblxuICAgICAgaGFuZGxlRmlsZUNoYW5nZShmaWxlKVxuICAgIH1cblxuICAgIC8vIGlmIGZpbGUgbWF0Y2hlcyBjb25maWcgZmlsZSBhbmQgd2UgZG9uJ3QgYWxyZWFkeSBoYXZlIG9uZVxuICAgIGlmIChmaWxlID09PSBjb25maWcuY29uZmlnRmlsZXBhdGggJiYgIWhhc0NvbmZpZ0ZpbGUpIHtcbiAgICAgIGxvZ2dlci5kZWJ1Zyh7XG4gICAgICAgIGxhYmVsOiAnd2F0Y2gnLFxuICAgICAgICBtZXNzYWdlOiBgZ2xvYmFsV2F0Y2hlciAtIGFkZCBjb25maWcgZmlsZSAke2ZpbGV9YCxcbiAgICAgIH0pXG5cbiAgICAgIGZpbGVXYXRjaGVyLmFkZChjb25maWcuY29uZmlnRmlsZXBhdGgpXG5cbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIG1lcmdlIGluIG5ldyB2YWx1ZXMgZnJvbSBjb25maWcgZmlsZVxuICAgICAgICBjb25maWcgPSBjcmVhdGVDb25maWcoe1xuICAgICAgICAgIGNvbmZpZzogZ2V0Q29uZmlnRmlsZShjb25maWcuY29uZmlnRmlsZXBhdGgpLFxuICAgICAgICB9KVxuXG4gICAgICAgIGhhc0NvbmZpZ0ZpbGUgPSB0cnVlXG5cbiAgICAgICAgaGFuZGxlQ29uZmlnVXBkYXRlKClcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKHtcbiAgICAgICAgICBsYWJlbDogJ2Vycm9yJyxcbiAgICAgICAgICBlcnJvcjogZSxcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25maWcuZXZlbnRzLmVtaXQoJ2FkZCcsIGZpbGUpXG4gIH0pXG5cbiAgLyoqXG4gICAqIEluaXQgd2F0Y2hpbmcgYWZ0ZXIgZXZlbnQgc3Vic2NyaXB0aW9uc1xuICAgKi9cbiAgZmlsZVdhdGNoZXIuYWRkKGZpbGVzKVxuICBpZiAoaGFzQ29uZmlnRmlsZSkgZmlsZVdhdGNoZXIuYWRkKGNvbmZpZy5jb25maWdGaWxlcGF0aClcblxuICAvKipcbiAgICogUHJpbWUgZmlsZXMgdG8gY2hlY2sgZm9yIGVycm9ycyBvbiBzdGFydHVwIGFuZCByZWdpc3RlciBhbnkgcGx1Z2luc1xuICAgKi9cbiAgdHJ5IHtcbiAgICBmaWxlcy5tYXAocmVxdWlyZSlcbiAgfSBjYXRjaCAoZSkge1xuICAgIGxvZ2dlci5lcnJvcih7XG4gICAgICBsYWJlbDogJ2Vycm9yJyxcbiAgICAgIGVycm9yOiBlLFxuICAgIH0pXG4gIH1cbn1cbiIsICJpbXBvcnQgZnMgZnJvbSAnZnMtZXh0cmEnXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJ1xuaW1wb3J0IHJzb3J0IGZyb20gJ3JvdXRlLXNvcnQnXG5cbmltcG9ydCB7IEVudiB9IGZyb20gJy4vY29uZmlnJ1xuaW1wb3J0IHsgaGFzaENvbnRlbnQgfSBmcm9tICcuL2hhc2hDb250ZW50J1xuaW1wb3J0ICogYXMgbG9nZ2VyIGZyb20gJy4vbG9nJ1xuXG5pbXBvcnQgdHlwZSB7IFByZXN0YSB9IGZyb20gJy4uJ1xuXG5leHBvcnQgZnVuY3Rpb24gb3V0cHV0TGFtYmRhKGlucHV0OiBzdHJpbmcsIGNvbmZpZzogUHJlc3RhKTogW3N0cmluZywgc3RyaW5nXSB7XG4gIGNvbnN0IHsgcm91dGUgfSA9IHJlcXVpcmUoaW5wdXQpXG4gIGNvbnN0IG5hbWUgPSBwYXRoLmJhc2VuYW1lKGlucHV0KS5zcGxpdCgnLicpLnJldmVyc2UoKS5zbGljZSgxKS5yZXZlcnNlKCkuam9pbignLicpXG4gIGNvbnN0IG91dHB1dCA9IHBhdGguam9pbihcbiAgICBjb25maWcuZnVuY3Rpb25zT3V0cHV0RGlyLFxuICAgIGNvbmZpZy5lbnYgPT09IEVudi5QUk9EVUNUSU9OID8gbmFtZSArICctJyArIGhhc2hDb250ZW50KGZzLnJlYWRGaWxlU3luYyhpbnB1dCwgJ3V0ZjgnKSkgKyAnLmpzJyA6IG5hbWUgKyAnLmpzJ1xuICApXG5cbiAgbG9nZ2VyLmRlYnVnKHtcbiAgICBsYWJlbDogJ2RlYnVnJyxcbiAgICBtZXNzYWdlOiBgZ2VuZXJhdGluZyAke25hbWV9IGxhbWJkYWAsXG4gIH0pXG5cbiAgLy8gaW1wb3J0YW50IGZvciB3YXRjaCB0YXNrXG4gIGRlbGV0ZSByZXF1aXJlLmNhY2hlW2lucHV0XVxuICBkZWxldGUgcmVxdWlyZS5jYWNoZVtvdXRwdXRdXG5cbiAgZnMub3V0cHV0RmlsZVN5bmMoXG4gICAgb3V0cHV0LFxuICAgIGBpbXBvcnQgeyB3cmFwSGFuZGxlciB9IGZyb20gJ3ByZXN0YSc7XG5pbXBvcnQgKiBhcyBmaWxlIGZyb20gJyR7aW5wdXR9JztcbmV4cG9ydCBjb25zdCByb3V0ZSA9IGZpbGUucm91dGVcbmV4cG9ydCBjb25zdCBoYW5kbGVyID0gd3JhcEhhbmRsZXIoZmlsZSlgXG4gIClcblxuICByZXR1cm4gW3JvdXRlLCBvdXRwdXRdXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvdXRwdXRMYW1iZGFzKGlucHV0czogc3RyaW5nW10sIGNvbmZpZzogUHJlc3RhKSB7XG4gIGNvbnN0IGxhbWJkYXMgPSBpbnB1dHNcbiAgICAubWFwKChpbnB1dCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIG91dHB1dExhbWJkYShpbnB1dCwgY29uZmlnKVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBsb2dnZXIuZXJyb3Ioe1xuICAgICAgICAgIGxhYmVsOiAnZXJyb3InLFxuICAgICAgICAgIGVycm9yOiBlLFxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgfVxuICAgIH0pXG4gICAgLmZpbHRlcihCb29sZWFuKSBhcyBbc3RyaW5nLCBzdHJpbmddW11cblxuICBjb25zdCBzb3J0ZWQgPSByc29ydChsYW1iZGFzLm1hcCgobCkgPT4gbFswXSkpXG4gIGNvbnN0IG1hbmlmZXN0OiB7IFtyb3V0ZTogc3RyaW5nXTogc3RyaW5nIH0gPSB7fVxuXG4gIGZvciAoY29uc3Qgcm91dGUgb2Ygc29ydGVkKSB7XG4gICAgY29uc3QgbWF0Y2ggPSBsYW1iZGFzLmZpbmQoKGwpID0+IGxbMF0gPT09IHJvdXRlKVxuXG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICBtYW5pZmVzdFtyb3V0ZV0gPSBtYXRjaFsxXVxuICAgIH1cbiAgfVxuXG4gIGZzLm91dHB1dEZpbGVTeW5jKGNvbmZpZy5yb3V0ZXNNYW5pZmVzdCwgSlNPTi5zdHJpbmdpZnkobWFuaWZlc3QpKVxuXG4gIHJldHVybiBsYW1iZGFzXG59XG4iLCAiZXhwb3J0IGZ1bmN0aW9uIGhhc2hDb250ZW50KGNvbnRlbnQ6IHN0cmluZykge1xuICB2YXIgaCA9IDUzODEsXG4gICAgaSA9IGNvbnRlbnQubGVuZ3RoXG5cbiAgd2hpbGUgKGkpIGggPSAoaCAqIDMzKSBeIGNvbnRlbnQuY2hhckNvZGVBdCgtLWkpXG5cbiAgcmV0dXJuIChoID4+PiAwKS50b1N0cmluZygzNilcbn1cbiIsICJpbXBvcnQgZnMgZnJvbSAnZnMtZXh0cmEnXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJ1xuaW1wb3J0IGdsb2JTeW5jIGZyb20gJ3RpbnktZ2xvYi9zeW5jJ1xuXG5pbXBvcnQgeyBQcmVzdGEgfSBmcm9tICcuLidcblxuZXhwb3J0IGZ1bmN0aW9uIGlzRHluYW1pYyhmaWxlOiBzdHJpbmcpIHtcbiAgcmV0dXJuIC9leHBvcnRcXHMuK1xcc3JvdXRlXFxzK1xcPS8udGVzdChmcy5yZWFkRmlsZVN5bmMoZmlsZSwgJ3V0Zi04JykpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1N0YXRpYyhmaWxlOiBzdHJpbmcpIHtcbiAgcmV0dXJuIC9leHBvcnRcXHMuK1xcc2dldFN0YXRpY1BhdGhzLy50ZXN0KGZzLnJlYWRGaWxlU3luYyhmaWxlLCAndXRmLTgnKSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUHJlc3RhRmlsZShmaWxlOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGlzU3RhdGljKGZpbGUpIHx8IGlzRHluYW1pYyhmaWxlKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsZXMoY29uZmlnOiBQcmVzdGEpOiBzdHJpbmdbXSB7XG4gIHJldHVybiAoW10gYXMgc3RyaW5nW10pXG4gICAgLmNvbmNhdChjb25maWcuZmlsZXMpXG4gICAgLm1hcCgoZmlsZSkgPT4gZ2xvYlN5bmMoZmlsZSwgeyBjd2Q6IGNvbmZpZy5jd2QgfSkpXG4gICAgLmZsYXQoKVxuICAgIC5tYXAoKGZpbGUpID0+IHBhdGgucmVzb2x2ZShjb25maWcuY3dkLCBmaWxlKSkgLy8gbWFrZSBhYnNvbHV0ZVxufVxuIiwgImltcG9ydCBmcyBmcm9tICdmcy1leHRyYSdcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnXG5pbXBvcnQgbWltZSBmcm9tICdtaW1lLXR5cGVzJ1xuXG5pbXBvcnQgKiBhcyBsb2dnZXIgZnJvbSAnLi9sb2cnXG5pbXBvcnQgeyB0aW1lciB9IGZyb20gJy4vdGltZXInXG5pbXBvcnQgeyBnZXRSb3V0ZVBhcmFtcyB9IGZyb20gJy4vZ2V0Um91dGVQYXJhbXMnXG5pbXBvcnQgeyBub3JtYWxpemVSZXNwb25zZSB9IGZyb20gJy4vbm9ybWFsaXplUmVzcG9uc2UnXG5pbXBvcnQgeyBidWlsdFN0YXRpY0ZpbGVzIH0gZnJvbSAnLi9idWlsdFN0YXRpY0ZpbGVzJ1xuaW1wb3J0IHsgcmVtb3ZlQnVpbHRTdGF0aWNGaWxlIH0gZnJvbSAnLi9yZW1vdmVCdWlsdFN0YXRpY0ZpbGUnXG5cbmltcG9ydCB0eXBlIHsgUHJlc3RhIH0gZnJvbSAnLi4nXG5cbmV4cG9ydCBmdW5jdGlvbiBwYXRobmFtZVRvRmlsZShwYXRobmFtZTogc3RyaW5nLCBleHQgPSAnaHRtbCcpIHtcbiAgcmV0dXJuICEhcGF0aC5leHRuYW1lKHBhdGhuYW1lKVxuICAgID8gcGF0aG5hbWUgLy8gaWYgcGF0aCBoYXMgZXh0ZW5zaW9uLCB1c2UgaXRcbiAgICA6IGV4dCA9PT0gJ2h0bWwnXG4gICAgPyBgJHtwYXRobmFtZX0vaW5kZXguaHRtbGAgLy8gaWYgSFRNTCBpcyBpbmZlcnJlZCwgY3JlYXRlIGluZGV4XG4gICAgOiBgJHtwYXRobmFtZX0uJHtleHR9YCAvLyBhbnl0aGluZyBidXQgSFRNTCB3aWxsIG5lZWQgYW4gZXh0ZW5zaW9uLCBvdGhlcndpc2UgYnJvd3NlcnMgd2lsbCByZW5kZXIgYXMgdGV4dFxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyU3RhdGljRW50cmllcyhlbnRyaWVzOiBzdHJpbmdbXSwgY29uZmlnOiBQcmVzdGEpOiBQcm9taXNlPHsgYWxsR2VuZXJhdGVkRmlsZXM6IHN0cmluZ1tdIH0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jICh5LCBuKSA9PiB7XG4gICAgbG9nZ2VyLmRlYnVnKHtcbiAgICAgIGxhYmVsOiAnZGVidWcnLFxuICAgICAgbWVzc2FnZTogYHJlbmRlcmluZyAke0pTT04uc3RyaW5naWZ5KGVudHJpZXMpfWAsXG4gICAgfSlcblxuICAgIGNvbnN0IGFsbEdlbmVyYXRlZEZpbGVzOiBzdHJpbmdbXSA9IFtdXG5cbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICAgIGNvbnN0IGxvY2F0aW9uID0gZW50cnkucmVwbGFjZShjb25maWcuY3dkLCAnJylcblxuICAgICAgdHJ5IHtcbiAgICAgICAgZGVsZXRlIHJlcXVpcmUuY2FjaGVbZW50cnldXG5cbiAgICAgICAgY29uc3QgZmlsZSA9IHJlcXVpcmUoZW50cnkpXG4gICAgICAgIGNvbnN0IHBhdGhzID0gYXdhaXQgZmlsZS5nZXRTdGF0aWNQYXRocygpXG5cbiAgICAgICAgY29uc3QgcHJldkZpbGVzID0gKGJ1aWx0U3RhdGljRmlsZXNbZW50cnldID0gYnVpbHRTdGF0aWNGaWxlc1tlbnRyeV0gfHwgW10pXG4gICAgICAgIGNvbnN0IG5leHRGaWxlczogc3RyaW5nW10gPSBbXVxuXG4gICAgICAgIGlmICghcGF0aHMgfHwgIXBhdGhzLmxlbmd0aCkge1xuICAgICAgICAgIGxvZ2dlci53YXJuKHtcbiAgICAgICAgICAgIGxhYmVsOiAncGF0aHMnLFxuICAgICAgICAgICAgbWVzc2FnZTogYCR7bG9jYXRpb259IC0gbm8gcGF0aHMgdG8gcmVuZGVyYCxcbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgcHJldkZpbGVzLmZvckVhY2goKGZpbGUpID0+IHJlbW92ZUJ1aWx0U3RhdGljRmlsZShmaWxlLCBjb25maWcpKVxuXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoY29uc3QgdXJsIG9mIHBhdGhzKSB7XG4gICAgICAgICAgY29uc3QgdGltZSA9IHRpbWVyKClcbiAgICAgICAgICBjb25zdCBldmVudCA9IHtcbiAgICAgICAgICAgIHBhdGg6IHVybCxcbiAgICAgICAgICAgIHBhcmFtczogZmlsZS5yb3V0ZSA/IGdldFJvdXRlUGFyYW1zKHVybCwgZmlsZS5yb3V0ZSkgOiB7fSxcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCByZXNwb25zZSA9IG5vcm1hbGl6ZVJlc3BvbnNlKGF3YWl0IGZpbGUuaGFuZGxlcihldmVudCwge30pKVxuICAgICAgICAgIGNvbnN0IHR5cGUgPSByZXNwb25zZS5oZWFkZXJzID8gcmVzcG9uc2UuaGVhZGVyc1snQ29udGVudC1UeXBlJ10gOiAnJ1xuICAgICAgICAgIGNvbnN0IGV4dCA9IHR5cGUgPyBtaW1lLmV4dGVuc2lvbih0eXBlIGFzIHN0cmluZykgfHwgJ2h0bWwnIDogJ2h0bWwnXG4gICAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBwYXRobmFtZVRvRmlsZSh1cmwsIGV4dClcblxuICAgICAgICAgIGFsbEdlbmVyYXRlZEZpbGVzLnB1c2goZmlsZW5hbWUpXG4gICAgICAgICAgbmV4dEZpbGVzLnB1c2goZmlsZW5hbWUpXG5cbiAgICAgICAgICBmcy5vdXRwdXRGaWxlU3luYyhwYXRoLmpvaW4oY29uZmlnLnN0YXRpY091dHB1dERpciwgZmlsZW5hbWUpLCByZXNwb25zZS5ib2R5LCAndXRmLTgnKVxuXG4gICAgICAgICAgbG9nZ2VyLmluZm8oe1xuICAgICAgICAgICAgbGFiZWw6ICdidWlsdCcsXG4gICAgICAgICAgICBtZXNzYWdlOiB1cmwsXG4gICAgICAgICAgICBkdXJhdGlvbjogdGltZSgpLFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICAvLyBkaWZmIGFuZCByZW1vdmUgZmlsZXNcbiAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIHByZXZGaWxlcykge1xuICAgICAgICAgIGlmICghbmV4dEZpbGVzLmluY2x1ZGVzKGZpbGUpKSB7XG4gICAgICAgICAgICByZW1vdmVCdWlsdFN0YXRpY0ZpbGUoZmlsZSwgY29uZmlnKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGJ1aWx0U3RhdGljRmlsZXNbZW50cnldID0gbmV4dEZpbGVzXG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGlmIChjb25maWcuZW52ID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgICAgbG9nZ2VyLmVycm9yKHtcbiAgICAgICAgICAgIGxhYmVsOiAnZXJyb3InLFxuICAgICAgICAgICAgbWVzc2FnZTogJ2Vycm9ycyBkZXRlY3RlZCwgcGF1c2luZy4uLicsXG4gICAgICAgICAgICBlcnJvcjogZSxcbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgeSh7IGFsbEdlbmVyYXRlZEZpbGVzIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbG9nZ2VyLmVycm9yKHtcbiAgICAgICAgICAgIGxhYmVsOiAnZXJyb3InLFxuICAgICAgICAgICAgZXJyb3I6IGUsXG4gICAgICAgICAgfSlcblxuICAgICAgICAgIG4oZSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGV4aXQgbG9vcCBvbiBhbnkgZXJyb3JcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBjbGVhciB0byBwcmV2ZW50IG1lbW9yeSBsZWFrXG4gICAgLy8gbG9hZENhY2hlLmNsZWFyQWxsTWVtb3J5KCkgLy8gVE9ETyBwcm9icyBjYW4ndCBcdTIwMTQgZW1pdD9cblxuICAgIHkoeyBhbGxHZW5lcmF0ZWRGaWxlcyB9KVxuICB9KVxufVxuIiwgImV4cG9ydCBmdW5jdGlvbiB0aW1lcigpIHtcbiAgY29uc3Qgc3RhcnQgPSBwcm9jZXNzLmhydGltZSgpXG4gIHJldHVybiAoKSA9PiB7XG4gICAgY29uc3QgW3MsIG5hbm9zXSA9IHByb2Nlc3MuaHJ0aW1lKHN0YXJ0KVxuICAgIGNvbnN0IG1zID0gbmFub3MgLyAxMDAwMDAwXG5cbiAgICBpZiAocyA8IDEpIHtcbiAgICAgIHJldHVybiAobXMgPj0gMSA/IG1zLnRvRml4ZWQoMCkgOiBtcy50b0ZpeGVkKDIpKSArICdtcydcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHMgKyAnLicgKyBtcy50b0ZpeGVkKDApICsgJ3MnXG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHRvUmVnRXhwIGZyb20gJ3JlZ2V4cGFyYW0nXG5cbmltcG9ydCB7IFJvdXRlUGFyYW1zIH0gZnJvbSAnLi4nXG5cbi8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2x1a2VlZC9yZWdleHBhcmFtI3VzYWdlXG5leHBvcnQgZnVuY3Rpb24gZ2V0Um91dGVQYXJhbXModXJsOiBzdHJpbmcsIHJvdXRlOiBzdHJpbmcpOiBSb3V0ZVBhcmFtcyB7XG4gIGNvbnN0IHJlc3VsdCA9IHRvUmVnRXhwKHJvdXRlKVxuICBsZXQgaSA9IDBcbiAgbGV0IG91dDogUm91dGVQYXJhbXMgPSB7fVxuICBsZXQgbWF0Y2hlcyA9IHJlc3VsdC5wYXR0ZXJuLmV4ZWModXJsKSB8fCBbXVxuXG4gIHdoaWxlIChpIDwgcmVzdWx0LmtleXMubGVuZ3RoKSB7XG4gICAgb3V0W3Jlc3VsdC5rZXlzW2ldXSA9IG1hdGNoZXNbKytpXVxuICB9XG5cbiAgcmV0dXJuIG91dFxufVxuIiwgImltcG9ydCB7IEFXUywgUmVzcG9uc2UgfSBmcm9tICcuLidcblxuZnVuY3Rpb24gc3RyaW5naWZ5KG9iajogb2JqZWN0IHwgc3RyaW5nKSB7XG4gIHJldHVybiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyA/IEpTT04uc3RyaW5naWZ5KG9iaikgOiBvYmpcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZVJlc3BvbnNlKHJlc3BvbnNlOiBQYXJ0aWFsPFJlc3BvbnNlPiB8IHN0cmluZyk6IEFXU1snSGFuZGxlclJlc3BvbnNlJ10ge1xuICBjb25zdCB7XG4gICAgaXNCYXNlNjRFbmNvZGVkID0gZmFsc2UsXG4gICAgc3RhdHVzQ29kZSA9IDIwMCxcbiAgICBoZWFkZXJzID0ge30sXG4gICAgbXVsdGlWYWx1ZUhlYWRlcnMgPSB7fSxcbiAgICBib2R5ID0gJycsXG4gICAgaHRtbCA9IHVuZGVmaW5lZCxcbiAgICBqc29uID0gdW5kZWZpbmVkLFxuICAgIHhtbCA9IHVuZGVmaW5lZCxcbiAgfSA9IHR5cGVvZiByZXNwb25zZSA9PT0gJ3N0cmluZydcbiAgICA/IHtcbiAgICAgICAgYm9keTogcmVzcG9uc2UsXG4gICAgICB9XG4gICAgOiByZXNwb25zZVxuXG4gIGxldCBjb250ZW50VHlwZSA9ICd0ZXh0L2h0bWw7IGNoYXJzZXQ9dXRmLTgnXG5cbiAgaWYgKCEhanNvbikge1xuICAgIGNvbnRlbnRUeXBlID0gJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnXG4gIH0gZWxzZSBpZiAoISF4bWwpIHtcbiAgICBjb250ZW50VHlwZSA9ICdhcHBsaWNhdGlvbi94bWw7IGNoYXJzZXQ9dXRmLTgnXG4gIH1cblxuICByZXR1cm4ge1xuICAgIGlzQmFzZTY0RW5jb2RlZCxcbiAgICBzdGF0dXNDb2RlLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgICdDb250ZW50LVR5cGUnOiBjb250ZW50VHlwZSxcbiAgICAgIC4uLmhlYWRlcnMsXG4gICAgfSxcbiAgICBtdWx0aVZhbHVlSGVhZGVycyxcbiAgICBib2R5OiBzdHJpbmdpZnkoYm9keSB8fCBodG1sIHx8IGpzb24gfHwgeG1sIHx8ICcnKSxcbiAgfVxufVxuIiwgInR5cGUgQnVpbHRTdGF0aWNGaWxlID0gc3RyaW5nXG5cbmV4cG9ydCBjb25zdCBidWlsdFN0YXRpY0ZpbGVzOiB7IFtlbnRyeUZpbGU6IHN0cmluZ106IEJ1aWx0U3RhdGljRmlsZVtdIH0gPSB7fVxuIiwgImltcG9ydCBmcyBmcm9tICdmcy1leHRyYSdcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnXG5cbmltcG9ydCAqIGFzIGxvZ2dlciBmcm9tICcuL2xvZydcblxuaW1wb3J0IHR5cGUgeyBQcmVzdGEgfSBmcm9tICcuLidcblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUJ1aWx0U3RhdGljRmlsZShmaWxlOiBzdHJpbmcsIGNvbmZpZzogUHJlc3RhKSB7XG4gIGxvZ2dlci5kZWJ1Zyh7XG4gICAgbGFiZWw6ICdkZWJ1ZycsXG4gICAgbWVzc2FnZTogYHJlbW92aW5nIG9sZCBzdGF0aWMgZmlsZSAke2ZpbGV9YCxcbiAgfSlcblxuICBmcy5yZW1vdmUocGF0aC5qb2luKGNvbmZpZy5zdGF0aWNPdXRwdXREaXIsIGZpbGUpKVxufVxuIiwgImltcG9ydCBmcyBmcm9tICdmcy1leHRyYSdcbmltcG9ydCB7IGJ1aWxkIGFzIGVzYnVpbGQgfSBmcm9tICdlc2J1aWxkJ1xuXG5pbXBvcnQgeyBvdXRwdXRMYW1iZGFzIH0gZnJvbSAnLi9vdXRwdXRMYW1iZGFzJ1xuaW1wb3J0IHsgZ2V0RmlsZXMsIGlzU3RhdGljLCBpc0R5bmFtaWMgfSBmcm9tICcuL2dldEZpbGVzJ1xuaW1wb3J0IHsgcmVuZGVyU3RhdGljRW50cmllcyB9IGZyb20gJy4vcmVuZGVyU3RhdGljRW50cmllcydcbmltcG9ydCB7IHRpbWVyIH0gZnJvbSAnLi90aW1lcidcbmltcG9ydCAqIGFzIGxvZ2dlciBmcm9tICcuL2xvZydcblxuaW1wb3J0IHR5cGUgeyBQcmVzdGEgfSBmcm9tICcuLidcblxuZnVuY3Rpb24gZ2V0Um91dGVzTWFuaWZlc3RTYWZlbHkobWFuaWZlc3RGaWxlcGF0aDogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHJlcXVpcmUobWFuaWZlc3RGaWxlcGF0aClcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiB7fVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBidWlsZChjb25maWc6IFByZXN0YSkge1xuICBjb25zdCB0b3RhbFRpbWUgPSB0aW1lcigpXG4gIGNvbnN0IGZpbGVzID0gZ2V0RmlsZXMoY29uZmlnKVxuICBjb25zdCBzdGF0aWNJZHMgPSBmaWxlcy5maWx0ZXIoaXNTdGF0aWMpXG4gIGNvbnN0IGR5bmFtaWNJZHMgPSBmaWxlcy5maWx0ZXIoaXNEeW5hbWljKVxuXG4gIGxvZ2dlci5kZWJ1Zyh7XG4gICAgbGFiZWw6ICdidWlsZCcsXG4gICAgbWVzc2FnZTogJ3N0YXJ0aW5nIGJ1aWxkJyxcbiAgfSlcblxuICBpZiAoIXN0YXRpY0lkcy5sZW5ndGggJiYgIWR5bmFtaWNJZHMubGVuZ3RoKSB7XG4gICAgbG9nZ2VyLndhcm4oe1xuICAgICAgbGFiZWw6ICdmaWxlcycsXG4gICAgICBtZXNzYWdlOiAnbm8gZmlsZXMgd2VyZSBmb3VuZCwgbm90aGluZyB0byBidWlsZCcsXG4gICAgfSlcbiAgfSBlbHNlIHtcbiAgICBsZXQgc3RhdGljVGltZSA9ICcnXG4gICAgbGV0IHN0YXRpY0ZpbGVBbW91bnQgPSAwXG4gICAgbGV0IGR5bmFtaWNUaW1lID0gJydcbiAgICBsZXQgY29weVRpbWUgPSAnJ1xuXG4gICAgY29uc3QgdGFza3MgPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoW1xuICAgICAgKGFzeW5jICgpID0+IHtcbiAgICAgICAgaWYgKHN0YXRpY0lkcy5sZW5ndGgpIHtcbiAgICAgICAgICBjb25zdCB0aW1lID0gdGltZXIoKVxuXG4gICAgICAgICAgY29uc3QgeyBhbGxHZW5lcmF0ZWRGaWxlcyB9ID0gYXdhaXQgcmVuZGVyU3RhdGljRW50cmllcyhzdGF0aWNJZHMsIGNvbmZpZylcblxuICAgICAgICAgIHN0YXRpY1RpbWUgPSB0aW1lKClcbiAgICAgICAgICBzdGF0aWNGaWxlQW1vdW50ID0gYWxsR2VuZXJhdGVkRmlsZXMubGVuZ3RoXG4gICAgICAgIH1cbiAgICAgIH0pKCksXG4gICAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAoZHluYW1pY0lkcy5sZW5ndGgpIHtcbiAgICAgICAgICBjb25zdCB0aW1lID0gdGltZXIoKVxuXG4gICAgICAgICAgb3V0cHV0TGFtYmRhcyhkeW5hbWljSWRzLCBjb25maWcpXG5cbiAgICAgICAgICBhd2FpdCBlc2J1aWxkKHtcbiAgICAgICAgICAgIGVudHJ5UG9pbnRzOiBPYmplY3QudmFsdWVzKHJlcXVpcmUoY29uZmlnLnJvdXRlc01hbmlmZXN0KSksXG4gICAgICAgICAgICBvdXRkaXI6IGNvbmZpZy5mdW5jdGlvbnNPdXRwdXREaXIsXG4gICAgICAgICAgICBidW5kbGU6IHRydWUsXG4gICAgICAgICAgICBwbGF0Zm9ybTogJ25vZGUnLFxuICAgICAgICAgICAgdGFyZ2V0OiBbJ25vZGUxMiddLFxuICAgICAgICAgICAgbWluaWZ5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dPdmVyd3JpdGU6IHRydWUsXG4gICAgICAgICAgfSlcblxuICAgICAgICAgIGR5bmFtaWNUaW1lID0gdGltZSgpXG4gICAgICAgIH1cbiAgICAgIH0pKCksXG4gICAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAoZnMuZXhpc3RzU3luYyhjb25maWcuYXNzZXRzKSkge1xuICAgICAgICAgIGNvbnN0IHRpbWUgPSB0aW1lcigpXG5cbiAgICAgICAgICBmcy5jb3B5U3luYyhjb25maWcuYXNzZXRzLCBjb25maWcuc3RhdGljT3V0cHV0RGlyKVxuXG4gICAgICAgICAgY29weVRpbWUgPSB0aW1lKClcbiAgICAgICAgfVxuICAgICAgfSkoKSxcbiAgICBdKVxuXG4gICAgLy8gc2luY2Ugd2UncmUgYnVpbGRpbmcgKG5vdCB3YXRjaCkgaWYgYW55IHRhc2sgZmFpbHMsIGV4aXQgd2l0aCBlcnJvclxuICAgIGlmICh0YXNrcy5maW5kKCh0YXNrKSA9PiB0YXNrLnN0YXR1cyA9PT0gJ3JlamVjdGVkJykpIHtcbiAgICAgIGxvZ2dlci5kZWJ1Zyh7XG4gICAgICAgIGxhYmVsOiAnYnVpbGQnLFxuICAgICAgICBtZXNzYWdlOiAnYnVpbGQgcGFydGlhbGx5IGZhaWxlZCcsXG4gICAgICB9KVxuXG4gICAgICAvLyBsb2cgb3V0IGVycm9yc1xuICAgICAgdGFza3MuZm9yRWFjaCgodGFzaykgPT4ge1xuICAgICAgICBpZiAodGFzay5zdGF0dXMgPT09ICdyZWplY3RlZCcpIHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3Ioe1xuICAgICAgICAgICAgbGFiZWw6ICdlcnJvcicsXG4gICAgICAgICAgICBlcnJvcjogdGFzay5yZWFzb24sXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgcHJvY2Vzcy5leGl0KDEpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoc3RhdGljVGltZSB8fCBkeW5hbWljVGltZSkge1xuICAgICAgbG9nZ2VyLm5ld2xpbmUoKVxuICAgIH1cblxuICAgIGlmIChzdGF0aWNUaW1lKSB7XG4gICAgICBsb2dnZXIuaW5mbyh7XG4gICAgICAgIGxhYmVsOiAnc3RhdGljJyxcbiAgICAgICAgbWVzc2FnZTogYHJlbmRlcmVkICR7c3RhdGljRmlsZUFtb3VudH0gZmlsZShzKWAsXG4gICAgICAgIGR1cmF0aW9uOiBzdGF0aWNUaW1lLFxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoZHluYW1pY1RpbWUpIHtcbiAgICAgIGxvZ2dlci5pbmZvKHtcbiAgICAgICAgbGFiZWw6ICdsYW1iZGEnLFxuICAgICAgICBtZXNzYWdlOiBgY29tcGlsZWQgJHtkeW5hbWljSWRzLmxlbmd0aH0gZnVuY3Rpb24ocylgLFxuICAgICAgICBkdXJhdGlvbjogZHluYW1pY1RpbWUsXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmIChjb3B5VGltZSkge1xuICAgICAgbG9nZ2VyLmluZm8oe1xuICAgICAgICBsYWJlbDogJ2Fzc2V0cycsXG4gICAgICAgIG1lc3NhZ2U6IGBjb3BpZWQgaW4gJHtjb3B5VGltZX1gLFxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoc3RhdGljVGltZSB8fCBkeW5hbWljVGltZSkge1xuICAgICAgbG9nZ2VyLm5ld2xpbmUoKVxuICAgICAgbG9nZ2VyLmluZm8oe1xuICAgICAgICBsYWJlbDogJ2NvbXBsZXRlJyxcbiAgICAgICAgbWVzc2FnZTogYGluICR7dG90YWxUaW1lKCl9YCxcbiAgICAgIH0pXG4gICAgICBsb2dnZXIubmV3bGluZSgpXG4gICAgfVxuXG4gICAgY29uZmlnLmV2ZW50cy5lbWl0KCdwb3N0YnVpbGQnLCB7XG4gICAgICBvdXRwdXQ6IGNvbmZpZy5vdXRwdXQsXG4gICAgICBzdGF0aWNPdXRwdXQ6IGNvbmZpZy5zdGF0aWNPdXRwdXREaXIsXG4gICAgICBmdW5jdGlvbnNPdXRwdXQ6IGNvbmZpZy5mdW5jdGlvbnNPdXRwdXREaXIsXG4gICAgICBmdW5jdGlvbnNNYW5pZmVzdDogZ2V0Um91dGVzTWFuaWZlc3RTYWZlbHkoY29uZmlnLnJvdXRlc01hbmlmZXN0KSxcbiAgICB9KVxuICB9XG59XG4iLCAiaW1wb3J0IGZzIGZyb20gJ2ZzJ1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCdcbmltcG9ydCBodHRwIGZyb20gJ2h0dHAnXG5pbXBvcnQgZ2V0UG9ydCBmcm9tICdnZXQtcG9ydCdcbmltcG9ydCBzaXJ2IGZyb20gJ3NpcnYnXG5pbXBvcnQgY2hva2lkYXIgZnJvbSAnY2hva2lkYXInXG5pbXBvcnQgbWltZSBmcm9tICdtaW1lLXR5cGVzJ1xuaW1wb3J0IHRvUmVnRXhwIGZyb20gJ3JlZ2V4cGFyYW0nXG5cbmltcG9ydCB7IHRpbWVyIH0gZnJvbSAnLi90aW1lcidcbmltcG9ydCAqIGFzIGxvZ2dlciBmcm9tICcuL2xvZydcbmltcG9ydCB7IGRlZmF1bHQ0MDQgfSBmcm9tICcuL2RlZmF1bHQ0MDQnXG5pbXBvcnQgeyByZXF1ZXN0VG9FdmVudCB9IGZyb20gJy4vcmVxdWVzdFRvRXZlbnQnXG5pbXBvcnQgeyBzZW5kU2VydmVybGVzc1Jlc3BvbnNlIH0gZnJvbSAnLi9zZW5kU2VydmVybGVzc1Jlc3BvbnNlJ1xuXG5pbXBvcnQgdHlwZSB7IEFXUywgUHJlc3RhIH0gZnJvbSAnLi4nXG5cbmNvbnN0IHN0eWxlID0gW1xuICAncG9zaXRpb246IGZpeGVkJyxcbiAgJ2JvdHRvbTogMjRweCcsXG4gICdyaWdodDogMjRweCcsXG4gICd3aWR0aDogMzJweCcsXG4gICdoZWlnaHQ6IDMycHgnLFxuICAnYm9yZGVyLXJhZGl1czogMzJweCcsXG4gICdiYWNrZ3JvdW5kOiB3aGl0ZScsXG4gICdjb2xvcjogI0ZGN0E5MycsXG4gICdmb250LXNpemU6IDIwcHgnLFxuICAnZm9udC13ZWlnaHQ6IGJvbGQnLFxuICAndGV4dC1hbGlnbjogY2VudGVyJyxcbiAgJ2xpbmUtaGVpZ2h0OiAzMXB4JyxcbiAgJ2JveC1zaGFkb3c6IDBweCAwcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4wNCksIDBweCA0cHggOHB4IHJnYmEoMCwgMCwgMCwgMC4wNCksIDBweCAxNnB4IDI0cHggcmdiYSgwLCAwLCAwLCAwLjA0KSwgMHB4IDI0cHggMzJweCByZ2JhKDAsIDAsIDAsIDAuMDQpJyxcbl1cblxuY29uc3QgZGV2U2VydmVySWNvbiA9IGBcbiAgPGRpdiBzdHlsZT1cIiR7c3R5bGUuam9pbignOycpfVwiPn48L2Rpdj5cbmBcblxuZnVuY3Rpb24gcmVzb2x2ZUhUTUwoZGlyOiBzdHJpbmcsIHVybDogc3RyaW5nKSB7XG4gIGxldCBmaWxlID0gcGF0aC5qb2luKGRpciwgdXJsKVxuXG4gIC8vIGlmIG5vIGV4dGVuc2lvbiwgaXQncyBwcm9iYWJseSBpbnRlbmRlZCB0byBiZSBhbiBIVE1MIGZpbGVcbiAgaWYgKCFwYXRoLmV4dG5hbWUodXJsKSkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZnMucmVhZEZpbGVTeW5jKHBhdGguam9pbihkaXIsIHVybCwgJ2luZGV4Lmh0bWwnKSwgJ3V0ZjgnKVxuICAgIH0gY2F0Y2ggKGUpIHt9XG4gIH1cblxuICByZXR1cm4gZnMucmVhZEZpbGVTeW5jKGZpbGUsICd1dGY4Jylcbn1cblxuZnVuY3Rpb24gY3JlYXRlRGV2Q2xpZW50KHsgcG9ydCB9OiB7IHBvcnQ6IG51bWJlciB9KSB7XG4gIHJldHVybiBgXG4gICAgPHNjcmlwdD5cbiAgICAgIChmdW5jdGlvbiAoZ2xvYmFsKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3Qgc29ja2V0aW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKVxuICAgICAgICAgIHNvY2tldGlvLnNyYyA9ICdodHRwczovL3VucGtnLmNvbS9wb2NrZXQuaW9AMC4xLjQvbWluLmpzJ1xuICAgICAgICAgIHNvY2tldGlvLm9ubG9hZCA9IGZ1bmN0aW9uIGluaXQgKCkge1xuICAgICAgICAgICAgdmFyIGRpc2Nvbm5lY3RlZCA9IGZhbHNlXG4gICAgICAgICAgICB2YXIgc29ja2V0ID0gaW8oJ2h0dHA6Ly9sb2NhbGhvc3Q6JHtwb3J0fScsIHtcbiAgICAgICAgICAgICAgcmVjb25uZWN0aW9uQXR0ZW1wdHM6IDNcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBzb2NrZXQub24oJ2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsgY29uc29sZS5sb2coJ3ByZXN0YSBjb25uZWN0ZWQnKSB9KVxuICAgICAgICAgICAgc29ja2V0Lm9uKCdyZWZyZXNoJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGdsb2JhbC5sb2NhdGlvbi5yZWxvYWQoKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHNvY2tldC5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBkaXNjb25uZWN0ZWQgPSB0cnVlXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgc29ja2V0Lm9uKCdyZWNvbm5lY3RfZmFpbGVkJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICBpZiAoZGlzY29ubmVjdGVkKSByZXR1cm5cbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcInByZXN0YSAtIGNvbm5lY3Rpb24gdG8gc2VydmVyIG9uIDoke3BvcnR9IGZhaWxlZFwiKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzb2NrZXRpbylcbiAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgIH0pKHRoaXMpO1xuICAgIDwvc2NyaXB0PlxuICBgXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTZXJ2ZXJIYW5kbGVyKHsgcG9ydCwgY29uZmlnIH06IHsgcG9ydDogbnVtYmVyOyBjb25maWc6IFByZXN0YSB9KSB7XG4gIGNvbnN0IGRldkNsaWVudCA9IGNyZWF0ZURldkNsaWVudCh7IHBvcnQgfSlcbiAgY29uc3Qgc3RhdGljRGlyID0gY29uZmlnLnN0YXRpY091dHB1dERpclxuICBjb25zdCBhc3NldERpciA9IGNvbmZpZy5hc3NldHNcblxuICByZXR1cm4gYXN5bmMgZnVuY3Rpb24gc2VydmVIYW5kbGVyKHJlcTogaHR0cC5JbmNvbWluZ01lc3NhZ2UsIHJlczogaHR0cC5TZXJ2ZXJSZXNwb25zZSkge1xuICAgIGNvbnN0IHRpbWUgPSB0aW1lcigpXG4gICAgY29uc3QgdXJsID0gcmVxLnVybCBhcyBzdHJpbmdcblxuICAgIC8qXG4gICAgICogSWYgdGhpcyBpcyBhbiBhc3NldCBvdGhlciB0aGFuIEhUTUwgZmlsZXMsIGp1c3Qgc2VydmUgaXRcbiAgICAgKi9cbiAgICBpZiAoL14uK1xcLi4rJC8udGVzdCh1cmwpICYmICEvXFwuaHRtbD8kLy50ZXN0KHVybCkpIHtcbiAgICAgIGxvZ2dlci5kZWJ1Zyh7XG4gICAgICAgIGxhYmVsOiAnZGVidWcnLFxuICAgICAgICBtZXNzYWdlOiBgYXR0ZW1wdGluZyB0byBzZXJ2ZSBzdGF0aWMgYXNzZXQgJHt1cmx9YCxcbiAgICAgIH0pXG5cbiAgICAgIC8qXG4gICAgICAgKiBmaXJzdCBjaGVjayB0aGUgdmNzLXRyYWNrZWQgc3RhdGljIGZvbGRlcixcbiAgICAgICAqIHRoZW4gY2hlY2sgdGhlIHByZXN0YS1idWlsdCBzdGF0aWMgZm9sZGVyXG4gICAgICAgKlxuICAgICAgICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vc3VyZS10aGluZy9wcmVzdGEvaXNzdWVzLzMwXG4gICAgICAgKi9cbiAgICAgIHNpcnYoYXNzZXREaXIsIHsgZGV2OiB0cnVlIH0pKHJlcSwgcmVzLCAoKSA9PiB7XG4gICAgICAgIHNpcnYoc3RhdGljRGlyLCB7IGRldjogdHJ1ZSB9KShyZXEsIHJlcywgKCkgPT4ge1xuICAgICAgICAgIGxvZ2dlci53YXJuKHtcbiAgICAgICAgICAgIGxhYmVsOiAnc2VydmUnLFxuICAgICAgICAgICAgbWVzc2FnZTogYDQwNCAke3VybH1gLFxuICAgICAgICAgICAgZHVyYXRpb246IHRpbWUoKSxcbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgc2VuZFNlcnZlcmxlc3NSZXNwb25zZShyZXMsIHtcbiAgICAgICAgICAgIHN0YXR1c0NvZGU6IDQwNCxcbiAgICAgICAgICAgIGJvZHk6IGRlZmF1bHQ0MDQgKyBkZXZDbGllbnQgKyBkZXZTZXJ2ZXJJY29uLFxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICAvKlxuICAgICAgICogVHJ5IHRvIHJlc29sdmUgYSBzdGF0aWMgcm91dGUgbm9ybWFsbHlcbiAgICAgICAqL1xuICAgICAgdHJ5IHtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKHtcbiAgICAgICAgICBsYWJlbDogJ2RlYnVnJyxcbiAgICAgICAgICBtZXNzYWdlOiBgYXR0ZW1wdGluZyB0byByZW5kZXIgc3RhdGljIEhUTUwgZm9yICR7dXJsfWAsXG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc3QgZmlsZSA9IHJlc29sdmVIVE1MKHN0YXRpY0RpciwgdXJsKSArIGRldkNsaWVudCArIGRldlNlcnZlckljb25cblxuICAgICAgICBsb2dnZXIuaW5mbyh7XG4gICAgICAgICAgbGFiZWw6ICdzZXJ2ZScsXG4gICAgICAgICAgbWVzc2FnZTogYDIwMCAke3VybH1gLFxuICAgICAgICAgIGR1cmF0aW9uOiB0aW1lKCksXG4gICAgICAgIH0pXG5cbiAgICAgICAgc2VuZFNlcnZlcmxlc3NSZXNwb25zZShyZXMsIHsgYm9keTogZmlsZSB9KVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBsb2dnZXIuZGVidWcoe1xuICAgICAgICAgIGxhYmVsOiAnZGVidWcnLFxuICAgICAgICAgIG1lc3NhZ2U6IGBzZXJ2ZSBlcnJvcmAsXG4gICAgICAgICAgZXJyb3I6IGUsXG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8gZXhwZWN0IEVOT0VOVCwgbG9nIGV2ZXJ5dGhpbmcgZWxzZVxuICAgICAgICBpZiAoIS9FTk9FTlR8RUlTRElSLy50ZXN0KGUubWVzc2FnZSkpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGUpXG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8qXG4gICAgICAgICAgICogTm8gYXNzZXQgZmlsZSwgbm8gc3RhdGljIGZpbGUsIHRyeSBkeW5hbWljXG4gICAgICAgICAgICovXG4gICAgICAgICAgY29uc3QgbWFuaWZlc3QgPSByZXF1aXJlKGNvbmZpZy5yb3V0ZXNNYW5pZmVzdClcbiAgICAgICAgICBjb25zdCByb3V0ZXMgPSBPYmplY3Qua2V5cyhtYW5pZmVzdClcbiAgICAgICAgICBjb25zdCBsYW1iZGFGaWxlcGF0aCA9IHJvdXRlc1xuICAgICAgICAgICAgLm1hcCgocm91dGUpID0+ICh7XG4gICAgICAgICAgICAgIG1hdGNoZXI6IHRvUmVnRXhwKHJvdXRlKSxcbiAgICAgICAgICAgICAgcm91dGUsXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIC5maWx0ZXIoKHsgbWF0Y2hlciB9KSA9PiB7XG4gICAgICAgICAgICAgIHJldHVybiBtYXRjaGVyLnBhdHRlcm4udGVzdCh1cmwuc3BsaXQoJz8nKVswXSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAubWFwKCh7IHJvdXRlIH0pID0+IG1hbmlmZXN0W3JvdXRlXSlbMF1cblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIElmIHdlIGhhdmUgYSBzZXJ2ZXJsZXNzIGZ1bmN0aW9uLCBkZWxlZ2F0ZSB0byBpdCwgb3RoZXJ3aXNlIDQwNFxuICAgICAgICAgICAqL1xuICAgICAgICAgIGlmIChsYW1iZGFGaWxlcGF0aCkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKHtcbiAgICAgICAgICAgICAgbGFiZWw6ICdkZWJ1ZycsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IGBhdHRlbXB0aW5nIHRvIHJlbmRlciBsYW1iZGEgZm9yICR7dXJsfWAsXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBjb25zdCB7IGhhbmRsZXIgfTogeyBoYW5kbGVyOiBBV1NbJ0hhbmRsZXInXSB9ID0gcmVxdWlyZShsYW1iZGFGaWxlcGF0aClcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gYXdhaXQgcmVxdWVzdFRvRXZlbnQocmVxKVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBoYW5kbGVyKGV2ZW50LCB7fSlcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSByZXNwb25zZS5oZWFkZXJzIHx8IHt9XG4gICAgICAgICAgICBjb25zdCByZWRpciA9IHJlc3BvbnNlLnN0YXR1c0NvZGUgPiAyOTkgJiYgcmVzcG9uc2Uuc3RhdHVzQ29kZSA8IDM5OVxuXG4gICAgICAgICAgICAvLyBnZXQgbWltZSB0eXBlXG4gICAgICAgICAgICBjb25zdCB0eXBlID0gaGVhZGVyc1snQ29udGVudC1UeXBlJ10gYXMgc3RyaW5nXG4gICAgICAgICAgICBjb25zdCBleHQgPSB0eXBlID8gbWltZS5leHRlbnNpb24odHlwZSkgOiAnaHRtbCdcblxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oe1xuICAgICAgICAgICAgICBsYWJlbDogJ3NlcnZlJyxcbiAgICAgICAgICAgICAgbWVzc2FnZTogYCR7cmVzcG9uc2Uuc3RhdHVzQ29kZX0gJHtyZWRpciA/IGhlYWRlcnMuTG9jYXRpb24gOiB1cmx9YCxcbiAgICAgICAgICAgICAgZHVyYXRpb246IHRpbWUoKSxcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIHNlbmRTZXJ2ZXJsZXNzUmVzcG9uc2UocmVzLCB7XG4gICAgICAgICAgICAgIHN0YXR1c0NvZGU6IHJlc3BvbnNlLnN0YXR1c0NvZGUsXG4gICAgICAgICAgICAgIGhlYWRlcnM6IHJlc3BvbnNlLmhlYWRlcnMsXG4gICAgICAgICAgICAgIG11bHRpVmFsdWVIZWFkZXJzOiByZXNwb25zZS5tdWx0aVZhbHVlSGVhZGVycyxcbiAgICAgICAgICAgICAgLy8gb25seSBodG1sIGNhbiBiZSBsaXZlLXJlbG9hZGVkLCBkdWhcbiAgICAgICAgICAgICAgYm9keTpcbiAgICAgICAgICAgICAgICBleHQgPT09ICdodG1sJyA/IChyZXNwb25zZS5ib2R5IHx8ICcnKS5zcGxpdCgnPC9ib2R5PicpWzBdICsgZGV2Q2xpZW50ICsgZGV2U2VydmVySWNvbiA6IHJlc3BvbnNlLmJvZHksXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoe1xuICAgICAgICAgICAgICBsYWJlbDogJ2RlYnVnJyxcbiAgICAgICAgICAgICAgbWVzc2FnZTogYGF0dGVtcHRpbmcgdG8gcmVuZGVyIHN0YXRpYyA0MDQuaHRtbCBwYWdlIGZvciAke3VybH1gLFxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAqIFRyeSB0byBmYWxsIGJhY2sgdG8gYSBzdGF0aWMgNDA0IHBhZ2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IHJlc29sdmVIVE1MKHN0YXRpY0RpciwgJzQwNCcpICsgZGV2Q2xpZW50ICsgZGV2U2VydmVySWNvblxuXG4gICAgICAgICAgICAgIGxvZ2dlci53YXJuKHtcbiAgICAgICAgICAgICAgICBsYWJlbDogJ3NlcnZlJyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgNDA0ICR7dXJsfWAsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IHRpbWUoKSxcbiAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICBzZW5kU2VydmVybGVzc1Jlc3BvbnNlKHJlcywge1xuICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6IDQwNCxcbiAgICAgICAgICAgICAgICBib2R5OiBmaWxlLFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICBpZiAoIWUubWVzc2FnZS5pbmNsdWRlcygnRU5PRU5UJykpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoe1xuICAgICAgICAgICAgICAgIGxhYmVsOiAnZGVidWcnLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGByZW5kZXJpbmcgZGVmYXVsdCA0MDQgSFRNTCBwYWdlIGZvciAke3VybH1gLFxuICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgIGxvZ2dlci53YXJuKHtcbiAgICAgICAgICAgICAgICBsYWJlbDogJ3NlcnZlJyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgNDA0ICR7dXJsfWAsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IHRpbWUoKSxcbiAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICBzZW5kU2VydmVybGVzc1Jlc3BvbnNlKHJlcywge1xuICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6IDQwNCxcbiAgICAgICAgICAgICAgICBib2R5OiBkZWZhdWx0NDA0ICsgZGV2Q2xpZW50ICsgZGV2U2VydmVySWNvbixcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBsb2dnZXIuZGVidWcoe1xuICAgICAgICAgICAgbGFiZWw6ICdkZWJ1ZycsXG4gICAgICAgICAgICBtZXNzYWdlOiBgcmVuZGVyaW5nIGRlZmF1bHQgNTAwIEhUTUwgcGFnZSBmb3IgJHt1cmx9YCxcbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgbG9nZ2VyLmVycm9yKHtcbiAgICAgICAgICAgIGxhYmVsOiAnc2VydmUnLFxuICAgICAgICAgICAgbWVzc2FnZTogYDUwMCAke3VybH1gLFxuICAgICAgICAgICAgZXJyb3I6IGUsXG4gICAgICAgICAgICBkdXJhdGlvbjogdGltZSgpLFxuICAgICAgICAgIH0pXG5cbiAgICAgICAgICBzZW5kU2VydmVybGVzc1Jlc3BvbnNlKHJlcywge1xuICAgICAgICAgICAgc3RhdHVzQ29kZTogNTAwLFxuICAgICAgICAgICAgYm9keTogJycgKyBkZXZDbGllbnQgKyBkZXZTZXJ2ZXJJY29uLCAvLyBUT0RPIGRlZmF1bHQgNTAwIHNjcmVlblxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlcnZlKGNvbmZpZzogUHJlc3RhKSB7XG4gIGNvbnN0IHBvcnQgPSBhd2FpdCBnZXRQb3J0KHsgcG9ydDogNDAwMCB9KVxuICBjb25zdCBzZXJ2ZXIgPSBodHRwLmNyZWF0ZVNlcnZlcihjcmVhdGVTZXJ2ZXJIYW5kbGVyKHsgcG9ydCwgY29uZmlnIH0pKS5saXN0ZW4ocG9ydClcbiAgY29uc3Qgc29ja2V0ID0gcmVxdWlyZSgncG9ja2V0LmlvJykoc2VydmVyLCB7IHNlcnZlQ2xpZW50OiBmYWxzZSB9KVxuXG4gIGNvbmZpZy5ldmVudHMub24oJ3JlZnJlc2gnLCAoKSA9PiB7XG4gICAgbG9nZ2VyLmRlYnVnKHtcbiAgICAgIGxhYmVsOiAnZGVidWcnLFxuICAgICAgbWVzc2FnZTogYHJlZnJlc2ggZXZlbnQgcmVjZWl2ZWRgLFxuICAgIH0pXG5cbiAgICBzb2NrZXQuZW1pdCgncmVmcmVzaCcpXG4gIH0pXG5cbiAgY2hva2lkYXIud2F0Y2goY29uZmlnLmFzc2V0cywgeyBpZ25vcmVJbml0aWFsOiB0cnVlIH0pLm9uKCdhbGwnLCAoKSA9PiB7XG4gICAgY29uZmlnLmV2ZW50cy5lbWl0KCdyZWZyZXNoJylcbiAgfSlcblxuICByZXR1cm4geyBwb3J0IH1cbn1cbiIsICJleHBvcnQgY29uc3QgZGVmYXVsdDQwNCA9IGA8IS0tIGJ1aWx0IHdpdGggcHJlc3RhIGh0dHBzOi8vbnBtLmltL3ByZXN0YSAtLT5cbjwhRE9DVFlQRSBodG1sPlxuPGh0bWw+XG4gIDxoZWFkPlxuICAgIDxtZXRhIGNoYXJzZXQ9XCJVVEYtOFwiIC8+XG4gICAgPG1ldGEgbmFtZT1cInZpZXdwb3J0XCIgY29udGVudD1cIndpZHRoPWRldmljZS13aWR0aCxpbml0aWFsLXNjYWxlPTFcIiAvPlxuICAgIDx0aXRsZT40MDQ8L3RpdGxlPlxuICAgIDxsaW5rXG4gICAgICByZWw9XCJzdHlsZXNoZWV0XCJcbiAgICAgIHR5cGU9XCJ0ZXh0L2Nzc1wiXG4gICAgICBocmVmPVwiaHR0cHM6Ly91bnBrZy5jb20vc3Zic3RyYXRlQDQuMS4xL2Rpc3Qvc3Zic3RyYXRlLmNzc1wiXG4gICAgLz5cbiAgPC9oZWFkPlxuICA8Ym9keT5cbiAgICA8ZGl2IGNsYXNzPVwiZiBhaWMgamNjXCIgc3R5bGU9XCJoZWlnaHQ6IDEwMHZoXCI+XG4gICAgICA8aDIgY2xhc3M9XCJwMVwiIHN0eWxlPVwiY29sb3I6IGJsdWVcIj40MDQgTm90IEZvdW5kPC9oMj5cbiAgICA8L2Rpdj5cbiAgPC9ib2R5PlxuPC9odG1sPmBcbiIsICJpbXBvcnQgaHR0cCBmcm9tICdodHRwJ1xuaW1wb3J0IHsgcGFyc2UgYXMgcGFyc2VVcmwgfSBmcm9tICd1cmwnXG5pbXBvcnQgeyBwYXJzZSBhcyBwYXJzZVF1ZXJ5IH0gZnJvbSAncXVlcnktc3RyaW5nJ1xuaW1wb3J0IHJhd0JvZHkgZnJvbSAncmF3LWJvZHknXG5pbXBvcnQgbWltZSBmcm9tICdtaW1lLXR5cGVzJ1xuXG5pbXBvcnQgdHlwZSB7IEFXUyB9IGZyb20gJy4uJ1xuXG4vLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9uZXRsaWZ5L2NsaS9ibG9iLzI3YmI3YjliMzBkNDY1YWJlODZmODdmNDI3NGRkN2E3MWIxYjAwM2Ivc3JjL3V0aWxzL3NlcnZlLWZ1bmN0aW9ucy5qcyNMMTY3XG5jb25zdCBCQVNFXzY0X01JTUVfUkVHRVhQID0gL2ltYWdlfGF1ZGlvfHZpZGVvfGFwcGxpY2F0aW9uXFwvcGRmfGFwcGxpY2F0aW9uXFwvemlwfGFwcGxpY2F0b25cXC9vY3RldC1zdHJlYW0vaVxuZnVuY3Rpb24gc2hvdWxkQmFzZTY0RW5jb2RlKGNvbnRlbnRUeXBlOiBzdHJpbmcpIHtcbiAgcmV0dXJuIEJvb2xlYW4oY29udGVudFR5cGUpICYmIEJBU0VfNjRfTUlNRV9SRUdFWFAudGVzdChjb250ZW50VHlwZSlcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlcXVlc3RUb0V2ZW50KHJlcTogaHR0cC5JbmNvbWluZ01lc3NhZ2UpOiBQcm9taXNlPEFXU1snSGFuZGxlckV2ZW50J10+IHtcbiAgLy8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vbmV0bGlmeS9jbGkvYmxvYi8yN2JiN2I5YjMwZDQ2NWFiZTg2Zjg3ZjQyNzRkZDdhNzFiMWIwMDNiL3NyYy91dGlscy9zZXJ2ZS1mdW5jdGlvbnMuanMjTDIwOFxuICBjb25zdCByZW1vdGVBZGRyZXNzID0gU3RyaW5nKHJlcS5oZWFkZXJzWyd4LWZvcndhcmRlZC1mb3InXSkgfHwgcmVxLmNvbm5lY3Rpb24ucmVtb3RlQWRkcmVzcyB8fCAnJ1xuICBjb25zdCBpcCA9IHJlbW90ZUFkZHJlc3NcbiAgICAuc3BsaXQocmVtb3RlQWRkcmVzcy5pbmNsdWRlcygnLicpID8gJzonIDogJywnKVxuICAgIC5wb3AoKVxuICAgID8udHJpbSgpXG4gIGNvbnN0IGlzQmFzZTY0RW5jb2RlZCA9IHNob3VsZEJhc2U2NEVuY29kZShyZXEuaGVhZGVyc1snY29udGVudC10eXBlJ10gfHwgJycpXG4gIGNvbnN0IGJvZHkgPSByZXEuaGVhZGVyc1snY29udGVudC1sZW5ndGgnXVxuICAgID8gYXdhaXQgcmF3Qm9keShyZXEsIHtcbiAgICAgICAgbGltaXQ6ICcxbWInLFxuICAgICAgICBlbmNvZGluZzogbWltZS5jaGFyc2V0KHJlcS5oZWFkZXJzWydjb250ZW50LXR5cGUnXSB8fCAnJykgfHwgdW5kZWZpbmVkLFxuICAgICAgfSlcbiAgICA6IHVuZGVmaW5lZFxuXG4gIHJldHVybiB7XG4gICAgcGF0aDogcmVxLnVybCBhcyBzdHJpbmcsXG4gICAgaHR0cE1ldGhvZDogcmVxLm1ldGhvZCBhcyBzdHJpbmcsXG4gICAgLy8gQHRzLWlnbm9yZSBUT0RPIHRlc3Qgc2V0LWNvb2tpZSBjb21pbmcgaW4gYXMgYXJyYXlcbiAgICBoZWFkZXJzOiB7XG4gICAgICAuLi5yZXEuaGVhZGVycyxcbiAgICAgICdjbGllbnQtaXAnOiBpcCxcbiAgICB9LFxuICAgIC8vIFRPRE8gc2hvdWxkIHRoZXNlIGhlYWRlcnMgYmUgZXhjbHVzaXZlbHkgc2luZ2xlIHZhbHVlIHZzIG11bHRpP1xuICAgIG11bHRpVmFsdWVIZWFkZXJzOiBPYmplY3Qua2V5cyhyZXEuaGVhZGVycykucmVkdWNlKChoZWFkZXJzLCBrZXkpID0+IHtcbiAgICAgIGlmIChyZXEuaGVhZGVyc1trZXldICYmICEocmVxLmhlYWRlcnNba2V5XSBhcyBzdHJpbmcpLmluY2x1ZGVzKCcsJykpIHJldHVybiBoZWFkZXJzIC8vIG9ubHkgaW5jbHVkZSBtdWx0aS12YWx1ZSBoZWFkZXJzIGhlcmVcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uaGVhZGVycyxcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBUT0RPIGFnYWluLCBhcnJheSBoZWFkZXJzXG4gICAgICAgIFtrZXldOiByZXEuaGVhZGVyc1trZXldLnNwbGl0KCcsJyksXG4gICAgICB9XG4gICAgfSwge30pLFxuICAgIC8vIEB0cy1pZ25vcmUgVE9ETyBkbyBJIG5lZWQgdG8ga2VlcCB0aGVzZSBzZXBhcmF0ZT9cbiAgICBxdWVyeVN0cmluZ1BhcmFtZXRlcnM6IHBhcnNlUXVlcnkocGFyc2VVcmwocmVxLnVybCkucXVlcnkpLFxuICAgIGJvZHk6IGJvZHkgPyBuZXcgQnVmZmVyKGJvZHkpLnRvU3RyaW5nKGlzQmFzZTY0RW5jb2RlZCA/ICdiYXNlNjQnIDogJ3V0ZjgnKSA6IG51bGwsXG4gICAgaXNCYXNlNjRFbmNvZGVkLFxuICB9XG59XG4iLCAiaW1wb3J0IGh0dHAgZnJvbSAnaHR0cCdcblxuaW1wb3J0IHsgbm9ybWFsaXplUmVzcG9uc2UgfSBmcm9tICcuL25vcm1hbGl6ZVJlc3BvbnNlJ1xuXG5pbXBvcnQgdHlwZSB7IEFXUyB9IGZyb20gJy4uJ1xuXG5leHBvcnQgZnVuY3Rpb24gc2VuZFNlcnZlcmxlc3NSZXNwb25zZShyZXM6IGh0dHAuU2VydmVyUmVzcG9uc2UsIHI6IFBhcnRpYWw8QVdTWydIYW5kbGVyUmVzcG9uc2UnXT4pIHtcbiAgY29uc3QgcmVzcG9uc2UgPSBub3JtYWxpemVSZXNwb25zZShyKVxuXG4gIC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL25ldGxpZnkvY2xpL2Jsb2IvMjdiYjdiOWIzMGQ0NjVhYmU4NmY4N2Y0Mjc0ZGQ3YTcxYjFiMDAzYi9zcmMvdXRpbHMvc2VydmUtZnVuY3Rpb25zLmpzI0w3M1xuICBmb3IgKGNvbnN0IGtleSBpbiByLm11bHRpVmFsdWVIZWFkZXJzKSB7XG4gICAgcmVzLnNldEhlYWRlcihrZXksIFN0cmluZyhyLm11bHRpVmFsdWVIZWFkZXJzW2tleV0pKVxuICB9XG5cbiAgZm9yIChjb25zdCBrZXkgaW4gci5oZWFkZXJzKSB7XG4gICAgcmVzLnNldEhlYWRlcihrZXksIFN0cmluZyhyLmhlYWRlcnNba2V5XSkpXG4gIH1cblxuICByZXMuc3RhdHVzQ29kZSA9IHJlc3BvbnNlLnN0YXR1c0NvZGVcbiAgcmVzLndyaXRlKHJlc3BvbnNlLmJvZHkpXG4gIHJlcy5lbmQoKVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjtrNEJBRUEsT0FBZSx1QkFDZixHQUFpQiwwd0NDSGpCLE1BQXlCLG9CQ0F6QixNQUFpQixtQkNFVixhQUF5QixDQUM5QixHQUFJLEdBQTBDLEdBRTlDLFdBQWMsS0FBZSxFQUFtQixDQUM5QyxFQUFPLElBQU0sRUFBTyxHQUFJLElBQUksQUFBQyxHQUFpQixFQUFHLEdBQUcsSUFHdEQsV0FBWSxFQUFZLEVBQThCLENBQ3BELFNBQU8sR0FBTSxFQUFPLEdBQU0sRUFBTyxHQUFJLE9BQU8sR0FBTSxDQUFDLEdBQzVDLElBQU0sRUFBTyxHQUFJLE9BQU8sRUFBTyxHQUFJLFFBQVEsR0FBSyxHQUd6RCxZQUFpQixDQUNmLEVBQVMsR0FHWCxXQUFtQixFQUFZLENBQzdCLE1BQU8sR0FBTyxJQUFPLEdBR3ZCLE1BQU8sQ0FDTCxPQUNBLEtBQ0EsUUFDQSxhRG5CSixHQUFNLElBQXdCLG1CQUVsQixFQUFMLFVBQUssRUFBTCxDQUNMLGFBQWEsYUFDYixjQUFjLGNB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
