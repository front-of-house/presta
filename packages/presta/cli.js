#!/usr/bin/env node
var Qe=Object.create;var L=Object.defineProperty,Xe=Object.defineProperties,Ye=Object.getOwnPropertyDescriptor,Ke=Object.getOwnPropertyDescriptors,Ze=Object.getOwnPropertyNames,ce=Object.getOwnPropertySymbols,qe=Object.getPrototypeOf,ue=Object.prototype.hasOwnProperty,et=Object.prototype.propertyIsEnumerable;var pe=(e,t,r)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))ue.call(t,r)&&pe(e,r,t[r]);if(ce)for(var r of ce(t))et.call(t,r)&&pe(e,r,t[r]);return e},C=(e,t)=>Xe(e,Ke(t)),tt=e=>L(e,"__esModule",{value:!0});var rt=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Ze(t))!ue.call(e,o)&&o!=="default"&&L(e,o,{get:()=>t[o],enumerable:!(r=Ye(t,o))||r.enumerable});return e},l=e=>rt(tt(L(e!=null?Qe(qe(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var le=l(require("fs-extra")),ze=l(require("sade"));var ot="presta",st="0.0.0",it="Hyper minimal framework for the modern web.",at="cli.js",nt="index.d.ts",lt={presta:"cli.js"},ct={build:"node scripts/build",test:"rm -rf ./fixtures && NODE_ENV=test node test","test:watch":"NODE_ENV=test nodemon -e js,ts --ignore fixtures/ test",cloc:"npx cloc lib/*.ts",typecheck:"npx tsc --noEmit"},ut={type:"git",url:"git+ssh://git@github.com/sure-thing/presta.git"},pt="estrattonbailey",mt="MIT",dt={url:"https://github.com/sure-thing/presta/issues"},gt="https://github.com/sure-thing/presta#readme",ft={"@netlify/functions":"^0.7.2",chokidar:"^3.4.3",deepmerge:"^4.2.2",esbuild:"^0.12.9","esbuild-register":"^2.5.0",filewatcher:"^3.0.1","fs-extra":"^9.0.1","get-port":"^5.1.1",kleur:"^4.1.4",matched:"^5.0.0","mime-types":"^2.1.30","module-alias":"^2.2.2",ms:"^2.1.2",picomatch:"^2.3.0","pocket.io":"^0.1.4","query-string":"^6.13.7","raw-body":"^2.4.1",regexparam:"^1.3.0","route-sort":"^1.0.0",sade:"^1.7.3",sirv:"^1.0.7","watch-dependency-graph":"^2.6.1"},ht={baretest:"^2.0.0",nodemon:"^2.0.4",proxyquire:"^2.1.3","supertest-fetch":"^1.4.3"},me={name:ot,version:st,description:it,main:at,types:nt,bin:lt,scripts:ct,repository:ut,author:pt,license:mt,bugs:dt,homepage:gt,dependencies:ft,devDependencies:ht};var $=l(require("kleur"));var w=l(require("path"));function de(){let e={};function t(a,...i){e[a]&&e[a].map(s=>s(...i))}function r(a,i){return e[a]=e[a]?e[a].concat(i):[i],()=>e[a].splice(e[a].indexOf(i),1)}function o(){e={}}function n(a){return e[a]||[]}return{emit:t,on:r,clear:o,listeners:n}}var ge="presta.config.js",b;(function(o){o.PRODUCTION="production",o.DEVELOPMENT="development",o.TEST="test"})(b||(b={}));global.__presta__=global.__presta__||{pid:process.pid,cwd:process.cwd(),env:b.TEST,debug:!1};function fe(e){let t=process.cwd();return e.files&&(e.files=[].concat(e.files).map(r=>w.default.resolve(t,r))),e.output&&(e.output=w.default.resolve(t,e.output)),e.assets&&(e.assets=w.default.resolve(t,e.assets)),e}function O(e,t=!1){try{return require(w.default.resolve(e||ge))}catch(r){return e&&(g({label:"error",error:r}),t&&process.exit(1)),{}}}function he(){return u({label:"debug",message:"config file values cleared"}),global.__presta__=P(C(m({},global.__presta__),{config:{}})),global.__presta__}function j(){return global.__presta__}function P({env:e=global.__presta__.env,config:t={},cli:r={}}){t=fe(m({},t)),r=fe(m({},r));let o={output:r.output||t.output||w.default.resolve("build"),assets:r.assets||t.assets||w.default.resolve("public"),files:r.files&&r.files.length?r.files:t.files?[].concat(t.files):[]};return global.__presta__=C(m(m({},global.__presta__),o),{env:e,debug:r.debug||global.__presta__.debug,cwd:process.cwd(),configFilepath:w.default.resolve(r.config||ge),functionsOutputDir:w.default.join(o.output,"functions"),staticOutputDir:w.default.join(o.output,"static"),routesManifest:w.default.join(o.output,"routes.json"),events:de()}),u({label:"debug",message:`config created ${JSON.stringify(global.__presta__)}`}),global.__presta__}var S;(function(n){n.Debug="debug",n.Info="info",n.Warn="warn",n.Err="error"})(S||(S={}));var be=[],bt={[S.Debug]:"magenta",[S.Info]:"blue",[S.Warn]:"yellow",[S.Err]:"red"};function U(e){if(j().env===b.TEST)be.push(e);else{let t=j().debug,r=j().env===b.PRODUCTION?"prod":"dev";if(!t&&e.level===S.Debug)return;console.log([$.default.gray(r),$.default[bt[e.level]](e.label),e.message,e.duration?$.default.gray("+"+e.duration):"",e.error?`

${e.error.stack||e.error}

`:""].filter(Boolean).join(" "))}}function u(e){U(m({level:S.Debug},e))}function y(e){U(m({level:S.Info},e))}function F(e){U(m({level:S.Warn},e))}function g(e){U(m({level:S.Err},e))}function z(...e){j().env===b.TEST?be.push(e):console.log(...e)}function E(){j().env!==b.TEST&&console.log("")}var X=l(require("fs-extra")),$e=l(require("watch-dependency-graph")),Te=l(require("chokidar")),Oe=l(require("picomatch"));var G=l(require("fs-extra")),ee=l(require("path")),xe=l(require("route-sort"));function ye(e){for(var t=5381,r=e.length;r;)t=t*33^e.charCodeAt(--r);return(t>>>0).toString(36)}function yt(e,t){let{route:r}=require(e),o=ee.default.basename(e).split(".").reverse().slice(1).reverse().join("."),n=ee.default.join(t.functionsOutputDir,t.env===b.PRODUCTION?o+"-"+ye(G.default.readFileSync(e,"utf8"))+".js":o+".js");return u({label:"debug",message:`generating ${o} lambda`}),G.default.outputFileSync(n,`import { wrapHandler } from 'presta';
import * as file from '${e}';
export const route = file.route
export const handler = wrapHandler(file)`),[r,n]}function J(e,t){let r=e.map(a=>{try{return yt(a,t)}catch(i){return g({label:"error",error:i}),null}}).filter(Boolean),o=(0,xe.default)(r.map(a=>a[0])),n={};for(let a of o)n[a]=r.find(i=>i[0]===a)[1];return G.default.outputFileSync(t.routesManifest,JSON.stringify(n)),r}var te=l(require("fs-extra")),ve=l(require("path")),we=l(require("matched"));function T(e){return/export\s.+\sroute\s+\=/.test(te.default.readFileSync(e,"utf-8"))}function M(e){return/export\s.+\sgetStaticPaths/.test(te.default.readFileSync(e,"utf-8"))}function H(e){return[].concat(e.files).map(t=>ve.default.resolve(e.cwd,t)).map(t=>we.default.sync(t,{cwd:e.cwd})).flat()}var Ee=l(require("fs-extra")),re=l(require("path")),Pe=l(require("mime-types"));function _(){let e=process.hrtime();return()=>{let[t,r]=process.hrtime(e),o=r/1e6;return t<1?(o>=1?o.toFixed(0):o.toFixed(2))+"ms":t+"."+o.toFixed(0)+"s"}}var Se=l(require("regexparam"));function _e(e,t){let r=(0,Se.default)(t),o=0,n={},a=r.pattern.exec(e);for(;o<r.keys.length;)n[r.keys[o]]=a[++o]||null;return n}function xt(e){return typeof e=="object"?JSON.stringify(e):e}function Q(e){let{isBase64Encoded:t=!1,statusCode:r=200,headers:o={},multiValueHeaders:n={},body:a="",html:i=void 0,json:s=void 0,xml:c=void 0}=typeof e=="string"?{body:e}:e,d="text/html; charset=utf-8";return s?d="application/json; charset=utf-8":c&&(d="application/xml; charset=utf-8"),{isBase64Encoded:t,statusCode:r,headers:m({"Content-Type":d},o),multiValueHeaders:n,body:xt(a||i||s||c||"")}}var R={};var Fe=l(require("fs-extra")),Ce=l(require("path"));function N(e,t){u({label:"debug",message:`removing old static file ${e}`}),Fe.default.remove(Ce.default.join(t.staticOutputDir,e))}function vt(e,t="html"){return re.default.extname(e)?e:t==="html"?`${e}/index.html`:`${e}.${t}`}function A(e,t){return new Promise(async(r,o)=>{u({label:"debug",message:`rendering ${JSON.stringify(e)}`});let n=[];for(let a of e){let i=a.replace(t.cwd,"");try{delete require.cache[a];let s=require(a),c=await s.getStaticPaths(),d=R[a]=R[a]||[],p=[];if(!c||!c.length){F({label:"paths",message:`${i} - no paths to render`}),d.forEach(v=>N(v,t));continue}for(let v of c){let B=_(),f={path:v,params:s.route?_e(v,s.route):{}},V=Q(await s.handler(f,{})),x=V.headers["Content-Type"],q=x?Pe.default.extension(x):"html",D=vt(v,q);n.push(D),p.push(D),Ee.default.outputFileSync(re.default.join(t.staticOutputDir,D),V.body,"utf-8"),y({label:"built",message:v,duration:B()})}for(let v of d)p.includes(v)||N(v,t);R[a]=p}catch(s){t.env==="development"?(g({label:"error",message:"errors detected, pausing...",error:s}),r({allGeneratedFiles:n})):(g({label:"error",error:s}),o(s));break}}r({allGeneratedFiles:n})})}function Y(e,t){let r=_();J(e,t),e.length&&y({label:"built",message:"lambdas",duration:r()})}async function ke(e){let t=H(e),r=X.default.existsSync(e.configFilepath);t.length||F({label:"paths",message:"no files configured"}),Y(t.filter(T),e);let o=(0,$e.default)({alias:{"@":e.cwd}}),n=Te.default.watch(e.cwd,{ignoreInitial:!0,ignored:[e.output,e.assets]});async function a(){t=H(e),await A(t.filter(M),e),Y(t.filter(T),e)}async function i(s){M(s)&&await A([s],e),T(s)&&Y(t.filter(T),e),e.events.emit("refresh"),e.events.emit("done",[s])}o.on("remove",([s])=>{u({label:"watch",message:`fileWatcher - removed ${s}`}),t.splice(t.indexOf(s),1),Y(t.filter(T),e),s===e.configFilepath&&(e=he(),r=!1,a()),(R[s]||[]).forEach(c=>N(c,e)),e.events.emit("remove",s)}),o.on("change",([s])=>{if(u({label:"watch",message:`fileWatcher - changed ${s}`}),s===e.configFilepath){delete require.cache[e.configFilepath];try{e=P({config:O(e.configFilepath)}),a()}catch(c){g({label:"error",error:c})}}else i(s);e.events.emit("change",s)}),o.on("error",s=>{g({label:"error",error:s})}),n.on("all",async(s,c)=>{if(!(!/add|change/.test(s)||!X.default.existsSync(c)||X.default.lstatSync(c).isDirectory())){if((0,Oe.default)(e.files)(c)&&!t.includes(c)&&(u({label:"watch",message:`globalWatcher - add ${c}`}),t.push(c),o.add(c),i(c)),c===e.configFilepath&&!r){u({label:"watch",message:`globalWatcher - add config file ${c}`}),o.add(e.configFilepath);try{e=P({config:O(e.configFilepath)}),r=!0,a()}catch(d){g({label:"error",error:d})}}e.events.emit("add",c)}}),o.add(t),r&&o.add(e.configFilepath);try{t.map(require)}catch(s){g({label:"error",error:s})}}var oe=l(require("fs-extra")),De=l(require("esbuild"));async function je(e){let t=_(),r=H(e),o=r.filter(M),n=r.filter(T);if(u({label:"build",message:"starting build"}),!o.length&&!n.length)F({label:"files",message:"no files were found, nothing to build"});else{let a="",i=0,s="",c="",d=await Promise.allSettled([(async()=>{if(o.length){let p=_(),{allGeneratedFiles:v}=await A(o,e);a=p(),i=v.length}})(),(async()=>{if(n.length){let p=_();J(n,e),await(0,De.build)({entryPoints:Object.values(require(e.routesManifest)),outdir:e.functionsOutputDir,bundle:!0,platform:"node",target:["node12"],minify:!0,allowOverwrite:!0}),s=p()}})(),(async()=>{if(oe.default.existsSync(e.assets)){let p=_();oe.default.copySync(e.assets,e.staticOutputDir),c=p()}})()]);if(d.find(p=>p.status==="rejected")){u({label:"build",message:"build partially failed"}),d.filter(p=>p.status==="rejected").forEach(p=>g({label:"error",error:p.reason})),process.exit(1);return}E(),a&&y({label:"static",message:`rendered ${i} file(s)`,duration:a}),s&&y({label:"lambda",message:`compiled ${n.length} function(s)`,duration:s}),c&&y({label:"assets",message:`copied in ${c}`}),(a||s)&&(E(),y({label:"complete",message:`in ${t()}`}),E())}}var ie=l(require("fs")),K=l(require("path")),Ae=l(require("http")),We=l(require("get-port")),ae=l(require("sirv")),Be=l(require("chokidar")),Ve=l(require("mime-types")),Le=l(require("regexparam"));var se=`<!-- built with presta https://npm.im/presta -->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>404</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="https://unpkg.com/svbstrate@4.1.1/dist/svbstrate.css"
    />
  </head>
  <body>
    <div class="f aic jcc" style="height: 100vh">
      <h2 class="p1" style="color: blue">404 Not Found</h2>
    </div>
  </body>
</html>`;var Re=l(require("url")),Ie=l(require("query-string")),Me=l(require("raw-body")),He=l(require("mime-types")),wt=/image|audio|video|application\/pdf|application\/zip|applicaton\/octet-stream/i;function St(e){return Boolean(e)&&wt.test(e)}async function Ne(e){let t=String(e.headers["x-forwarded-for"])||e.connection.remoteAddress,r=t.split(t.includes(".")?":":",").pop().trim(),o=St(e.headers["content-type"]),n=e.headers["content-length"]?await(0,Me.default)(e,{limit:"1mb",encoding:He.default.charset(e.headers["content-type"])||void 0}):void 0;return{path:e.url,httpMethod:e.method,headers:C(m({},e.headers),{"client-ip":r}),multiValueHeaders:Object.keys(e.headers).reduce((a,i)=>e.headers[i].includes(",")?C(m({},a),{[i]:e.headers[i].split(",")}):a,{}),queryStringParameters:(0,Ie.parse)((0,Re.parse)(e.url).query),body:n?new Buffer(n).toString(o?"base64":"utf8"):void 0,isBase64Encoded:o}}function k(e,t){let r=Q(t);for(let o in t.multiValueHeaders)e.setHeader(o,String(t.multiValueHeaders[o]));for(let o in t.headers)e.setHeader(o,String(t.headers[o]));e.statusCode=r.statusCode,e.write(r.body),e.end()}var _t=["position: fixed","bottom: 24px","right: 24px","width: 32px","height: 32px","border-radius: 32px","background: white","color: #FF7A93","font-size: 20px","font-weight: bold","text-align: center","line-height: 31px","box-shadow: 0px 0px 1px rgba(0, 0, 0, 0.04), 0px 4px 8px rgba(0, 0, 0, 0.04), 0px 16px 24px rgba(0, 0, 0, 0.04), 0px 24px 32px rgba(0, 0, 0, 0.04)"],I=`
  <div style="${_t.join(";")}">~</div>
`;function Ue(e,t){let r=K.default.join(e,t);if(!K.default.extname(t))try{return ie.default.readFileSync(K.default.join(e,t,"index.html"),"utf8")}catch(o){}return ie.default.readFileSync(r,"utf8")}function Ft({port:e}){return`
    <script>
      (function (global) {
        try {
          const socketio = document.createElement('script')
          socketio.src = 'https://unpkg.com/pocket.io@0.1.4/min.js'
          socketio.onload = function init () {
            var disconnected = false
            var socket = io('http://localhost:${e}', {
              reconnectionAttempts: 3
            })
            socket.on('connect', function() { console.log('presta connected') })
            socket.on('refresh', function() {
              global.location.reload()
            })
            socket.on('disconnect', function() {
              disconnected = true
            })
            socket.on('reconnect_failed', function(e) {
              if (disconnected) return
              console.error("presta - connection to server on :${e} failed")
            })
          }
          document.head.appendChild(socketio)
        } catch (e) {}
      })(this);
    <\/script>
  `}function Ct({port:e,config:t}){let r=Ft({port:e}),o=t.staticOutputDir,n=t.assets;return async function(i,s){let c=_();if(/^.+\..+$/.test(i.url)&&!/\.html?$/.test(i.url))u({label:"debug",message:`attempting to serve static asset ${i.url}`}),(0,ae.default)(n,{dev:!0})(i,s,()=>{(0,ae.default)(o,{dev:!0})(i,s,()=>{F({label:"serve",message:`404 ${i.url}`,duration:c()}),k(s,{statusCode:404,body:se+r+I})})});else try{u({label:"debug",message:`attempting to render static HTML for ${i.url}`});let d=Ue(o,i.url)+r+I;y({label:"serve",message:`200 ${i.url}`,duration:c()}),k(s,{body:d})}catch(d){u({label:"debug",message:"serve error",error:d}),/ENOENT|EISDIR/.test(d.message)||console.error(d);try{let p=require(t.routesManifest),B=Object.keys(p).map(f=>({matcher:(0,Le.default)(f),route:f})).filter(({matcher:f})=>f.pattern.test(i.url.split("?")[0])).map(({route:f})=>p[f])[0];if(B){u({label:"debug",message:`attempting to render lambda for ${i.url}`});let{handler:f}=require(B),V=await Ne(i),x=await f(V,{}),q=x.statusCode>299&&x.statusCode<399,D=x.headers["Content-Type"],Je=D?Ve.default.extension(D):"html";y({label:"serve",message:`${x.statusCode} ${q?x.headers.Location:i.url}`,duration:c()}),k(s,{statusCode:x.statusCode,headers:x.headers,multiValueHeaders:x.multiValueHeaders,body:Je==="html"?x.body.split("</body>")[0]+r+I:x.body})}else{u({label:"debug",message:`attempting to render static 404.html page for ${i.url}`});try{let f=Ue(o,"404")+r+I;F({label:"serve",message:`404 ${i.url}`,duration:c()}),k(s,{statusCode:404,body:f})}catch(f){f.message.includes("ENOENT")||console.error(f),u({label:"debug",message:`rendering default 404 HTML page for ${i.url}`}),F({label:"serve",message:`404 ${i.url}`,duration:c()}),k(s,{statusCode:404,body:se+r+I})}}}catch(p){u({label:"debug",message:`rendering default 500 HTML page for ${i.url}`}),g({label:"serve",message:`500 ${i.url}`,error:p,duration:c()}),k(s,{statusCode:500,body:""+r+I})}}}}async function ne(e){let t=await(0,We.default)({port:4e3}),r=Ae.default.createServer(Ct({port:t,config:e})).listen(t),o=require("pocket.io")(r,{serveClient:!1});return e.events.on("refresh",()=>{u({label:"debug",message:"refresh event received"}),o.emit("refresh")}),Be.default.watch(e.assets,{ignoreInitial:!0}).on("all",()=>{e.events.emit("refresh")}),{port:t}}var W=(0,ze.default)("presta"),Z="presta.config.js";function Ge(e={}){require("module-alias").addAliases({"@":process.cwd(),"presta:internal":__dirname}),require("esbuild-register/dist/node").register(e)}W.version(me.version).option("--config, -c",`Path to a config file \u2014 defaults to ${Z}`).option("--output, -o","Specify output directory for built files \u2014 defaults to ./build").option("--assets, -a","Specify static asset directory \u2014 defaults to ./public").option("--debug, -d","Enable debug mode (prints more logs)");W.command("build","Render files(s) to output directory.",{default:!0}).example("build").example("build files/**/*.js").example(`build -c ${Z}`).action(async e=>{Ge(),console.clear();let t=P({env:b.PRODUCTION,config:O(e.config,!0),cli:C(m({},e),{files:e._})});le.default.emptyDirSync(t.output),z(`${$.default.blue("presta build")}`),E(),await je(t)});W.command("watch").option("--no-serve, -n","Do not run local dev server.",!1).describe("Watch and build files(s) to output directory").example("watch").example("watch ./files/**/*.js").example("watch ./files/**/*.js -o ./out").example(`watch -c ${Z}`).action(async e=>{Ge(),console.clear();let t=P({env:b.DEVELOPMENT,config:O(e.config),cli:C(m({},e),{files:e._})});if(le.default.emptyDirSync(t.output),e.n)y({label:"dev"}),E();else{let r=await ne(t);z(`${$.default.blue("presta dev")} - http://localhost:${r.port}`),E()}ke(t)});W.command("serve").describe("Serve built files.").example("serve").example("serve -o ./out").example(`watch -c ${Z}`).action(async e=>{console.clear();let t=P({env:b.PRODUCTION,config:O(e.config),cli:e}),r=await ne(t);z(`${$.default.blue("presta serve")} - http://localhost:${r.port}`),E()});W.parse(process.argv);
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibGliL2NsaS50cyIsICJsaWIvbG9nLnRzIiwgImxpYi9jb25maWcudHMiLCAibGliL2NyZWF0ZUVtaXR0ZXIudHMiLCAibGliL3dhdGNoLnRzIiwgImxpYi9vdXRwdXRMYW1iZGFzLnRzIiwgImxpYi9oYXNoQ29udGVudC50cyIsICJsaWIvZ2V0RmlsZXMudHMiLCAibGliL3JlbmRlclN0YXRpY0VudHJpZXMudHMiLCAibGliL3RpbWVyLnRzIiwgImxpYi9nZXRSb3V0ZVBhcmFtcy50cyIsICJsaWIvbm9ybWFsaXplUmVzcG9uc2UudHMiLCAibGliL2J1aWx0U3RhdGljRmlsZXMudHMiLCAibGliL3JlbW92ZUJ1aWx0U3RhdGljRmlsZS50cyIsICJsaWIvYnVpbGQudHMiLCAibGliL3NlcnZlLnRzIiwgImxpYi9kZWZhdWx0NDA0LnRzIiwgImxpYi9yZXF1ZXN0VG9FdmVudC50cyIsICJsaWIvc2VuZFNlcnZlcmxlc3NSZXNwb25zZS50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiIyEvdXNyL2Jpbi9lbnYgbm9kZVxuXG5pbXBvcnQgZnMgZnJvbSAnZnMtZXh0cmEnXG5pbXBvcnQgc2FkZSBmcm9tICdzYWRlJ1xuXG5pbXBvcnQgcGtnIGZyb20gJy4uL3BhY2thZ2UuanNvbidcblxuaW1wb3J0ICogYXMgbG9nZ2VyIGZyb20gJy4vbG9nJ1xuaW1wb3J0IHsgY3JlYXRlQ29uZmlnLCBnZXRDb25maWdGaWxlLCBFbnYgfSBmcm9tICcuL2NvbmZpZydcbmltcG9ydCB7IHdhdGNoIH0gZnJvbSAnLi93YXRjaCdcbmltcG9ydCB7IGJ1aWxkIH0gZnJvbSAnLi9idWlsZCdcbmltcG9ydCB7IHNlcnZlIH0gZnJvbSAnLi9zZXJ2ZSdcblxuY29uc3QgcHJvZyA9IHNhZGUoJ3ByZXN0YScpXG5jb25zdCBDT05GSUdfREVGQVVMVCA9ICdwcmVzdGEuY29uZmlnLmpzJ1xuXG5mdW5jdGlvbiByZWdpc3RlclJ1bnRpbWUgKG9wdGlvbnMgPSB7fSkge1xuICByZXF1aXJlKCdtb2R1bGUtYWxpYXMnKS5hZGRBbGlhc2VzKHtcbiAgICAnQCc6IHByb2Nlc3MuY3dkKCksXG4gICAgJ3ByZXN0YTppbnRlcm5hbCc6IF9fZGlybmFtZSAvLyB3aGVyZXZlciB0aGlzIGlzIHJ1bm5pbmcgZnJvbVxuICB9KVxuXG4gIHJlcXVpcmUoJ2VzYnVpbGQtcmVnaXN0ZXIvZGlzdC9ub2RlJykucmVnaXN0ZXIob3B0aW9ucylcbn1cblxucHJvZ1xuICAudmVyc2lvbihwa2cudmVyc2lvbilcbiAgLm9wdGlvbihcbiAgICAnLS1jb25maWcsIC1jJyxcbiAgICBgUGF0aCB0byBhIGNvbmZpZyBmaWxlIFx1MjAxNCBkZWZhdWx0cyB0byAke0NPTkZJR19ERUZBVUxUfWBcbiAgKVxuICAub3B0aW9uKFxuICAgICctLW91dHB1dCwgLW8nLFxuICAgIGBTcGVjaWZ5IG91dHB1dCBkaXJlY3RvcnkgZm9yIGJ1aWx0IGZpbGVzIFx1MjAxNCBkZWZhdWx0cyB0byAuL2J1aWxkYFxuICApXG4gIC5vcHRpb24oXG4gICAgJy0tYXNzZXRzLCAtYScsXG4gICAgYFNwZWNpZnkgc3RhdGljIGFzc2V0IGRpcmVjdG9yeSBcdTIwMTQgZGVmYXVsdHMgdG8gLi9wdWJsaWNgXG4gIClcbiAgLm9wdGlvbihcbiAgICAnLS1kZWJ1ZywgLWQnLFxuICAgIGBFbmFibGUgZGVidWcgbW9kZSAocHJpbnRzIG1vcmUgbG9ncylgXG4gIClcblxucHJvZ1xuICAuY29tbWFuZCgnYnVpbGQnLCAnUmVuZGVyIGZpbGVzKHMpIHRvIG91dHB1dCBkaXJlY3RvcnkuJywgeyBkZWZhdWx0OiB0cnVlIH0pXG4gIC5leGFtcGxlKGBidWlsZGApXG4gIC5leGFtcGxlKGBidWlsZCBmaWxlcy8qKi8qLmpzYClcbiAgLmV4YW1wbGUoYGJ1aWxkIC1jICR7Q09ORklHX0RFRkFVTFR9YClcbiAgLmFjdGlvbihhc3luYyBvcHRzID0+IHtcbiAgICByZWdpc3RlclJ1bnRpbWUoKVxuXG4gICAgY29uc29sZS5jbGVhcigpXG5cbiAgICBjb25zdCBjb25maWcgPSBjcmVhdGVDb25maWcoe1xuICAgICAgZW52OiBFbnYuUFJPRFVDVElPTixcbiAgICAgIGNvbmZpZzogZ2V0Q29uZmlnRmlsZShvcHRzLmNvbmZpZywgdHJ1ZSksXG4gICAgICBjbGk6IHtcbiAgICAgICAgLi4ub3B0cyxcbiAgICAgICAgZmlsZXM6IG9wdHMuX1xuICAgICAgfVxuICAgIH0pXG5cbiAgICBmcy5lbXB0eURpclN5bmMoY29uZmlnLm91dHB1dClcblxuICAgIGxvZ2dlci5yYXcoYCR7bG9nZ2VyLmNvbG9ycy5ibHVlKCdwcmVzdGEgYnVpbGQnKX1gKVxuICAgIGxvZ2dlci5uZXdsaW5lKClcblxuICAgIGF3YWl0IGJ1aWxkKGNvbmZpZylcbiAgfSlcblxucHJvZ1xuICAuY29tbWFuZCgnd2F0Y2gnKVxuICAub3B0aW9uKCctLW5vLXNlcnZlLCAtbicsIGBEbyBub3QgcnVuIGxvY2FsIGRldiBzZXJ2ZXIuYCwgZmFsc2UpXG4gIC5kZXNjcmliZSgnV2F0Y2ggYW5kIGJ1aWxkIGZpbGVzKHMpIHRvIG91dHB1dCBkaXJlY3RvcnknKVxuICAuZXhhbXBsZShgd2F0Y2hgKVxuICAuZXhhbXBsZShgd2F0Y2ggLi9maWxlcy8qKi8qLmpzYClcbiAgLmV4YW1wbGUoYHdhdGNoIC4vZmlsZXMvKiovKi5qcyAtbyAuL291dGApXG4gIC5leGFtcGxlKGB3YXRjaCAtYyAke0NPTkZJR19ERUZBVUxUfWApXG4gIC5hY3Rpb24oYXN5bmMgb3B0cyA9PiB7XG4gICAgcmVnaXN0ZXJSdW50aW1lKClcblxuICAgIGNvbnNvbGUuY2xlYXIoKVxuXG4gICAgY29uc3QgY29uZmlnID0gY3JlYXRlQ29uZmlnKHtcbiAgICAgIGVudjogRW52LkRFVkVMT1BNRU5ULFxuICAgICAgY29uZmlnOiBnZXRDb25maWdGaWxlKG9wdHMuY29uZmlnKSxcbiAgICAgIGNsaToge1xuICAgICAgICAuLi5vcHRzLFxuICAgICAgICBmaWxlczogb3B0cy5fXG4gICAgICB9XG4gICAgfSlcblxuICAgIGZzLmVtcHR5RGlyU3luYyhjb25maWcub3V0cHV0KVxuXG4gICAgaWYgKCFvcHRzLm4pIHtcbiAgICAgIGNvbnN0IHNlcnZlciA9IGF3YWl0IHNlcnZlKGNvbmZpZylcblxuICAgICAgbG9nZ2VyLnJhdyhgJHtsb2dnZXIuY29sb3JzLmJsdWUoJ3ByZXN0YSBkZXYnKX0gLSBodHRwOi8vbG9jYWxob3N0OiR7c2VydmVyLnBvcnR9YClcbiAgICAgIGxvZ2dlci5uZXdsaW5lKClcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nZ2VyLmluZm8oe1xuICAgICAgICBsYWJlbDogJ2RldidcbiAgICAgIH0pXG4gICAgICBsb2dnZXIubmV3bGluZSgpXG4gICAgfVxuXG4gICAgd2F0Y2goY29uZmlnKVxuICB9KVxuXG5wcm9nXG4gIC5jb21tYW5kKCdzZXJ2ZScpXG4gIC5kZXNjcmliZSgnU2VydmUgYnVpbHQgZmlsZXMuJylcbiAgLmV4YW1wbGUoYHNlcnZlYClcbiAgLmV4YW1wbGUoYHNlcnZlIC1vIC4vb3V0YClcbiAgLmV4YW1wbGUoYHdhdGNoIC1jICR7Q09ORklHX0RFRkFVTFR9YClcbiAgLmFjdGlvbihhc3luYyBvcHRzID0+IHtcbiAgICBjb25zb2xlLmNsZWFyKClcblxuICAgIGNvbnN0IGNvbmZpZyA9IGNyZWF0ZUNvbmZpZyh7XG4gICAgICBlbnY6IEVudi5QUk9EVUNUSU9OLFxuICAgICAgY29uZmlnOiBnZXRDb25maWdGaWxlKG9wdHMuY29uZmlnKSxcbiAgICAgIGNsaTogb3B0c1xuICAgIH0pXG4gICAgY29uc3Qgc2VydmVyID0gYXdhaXQgc2VydmUoY29uZmlnKVxuXG4gICAgbG9nZ2VyLnJhdyhgJHtsb2dnZXIuY29sb3JzLmJsdWUoJ3ByZXN0YSBzZXJ2ZScpfSAtIGh0dHA6Ly9sb2NhbGhvc3Q6JHtzZXJ2ZXIucG9ydH1gKVxuICAgIGxvZ2dlci5uZXdsaW5lKClcbiAgfSlcblxucHJvZy5wYXJzZShwcm9jZXNzLmFyZ3YpXG4iLCAiaW1wb3J0IGMgZnJvbSAna2xldXInXG5cbmltcG9ydCB7IGdldEN1cnJlbnRDb25maWcsIEVudiB9IGZyb20gJy4vY29uZmlnJ1xuXG5leHBvcnQgZW51bSBMZXZlbHMge1xuICBEZWJ1ZyA9ICdkZWJ1ZycsXG4gIEluZm8gPSAnaW5mbycsXG4gIFdhcm4gPSAnd2FybicsXG4gIEVyciA9ICdlcnJvcidcbn1cblxuZXhwb3J0IHR5cGUgTWVzc2FnZSA9IHtcbiAgbGV2ZWw/OiBMZXZlbHNcbiAgbGFiZWw6IHN0cmluZyB8IG51bWJlclxuICBtZXNzYWdlPzogc3RyaW5nXG4gIGR1cmF0aW9uPzogc3RyaW5nIHwgbnVtYmVyXG4gIGVycm9yPzogRXJyb3Jcbn1cblxubGV0IGxvZ3MgPSBbXVxuXG5jb25zdCBjb2xvcnMgPSB7XG4gIFtMZXZlbHMuRGVidWddOiAnbWFnZW50YScsXG4gIFtMZXZlbHMuSW5mb106ICdibHVlJyxcbiAgW0xldmVscy5XYXJuXTogJ3llbGxvdycsXG4gIFtMZXZlbHMuRXJyXTogJ3JlZCdcbn1cblxuZXhwb3J0IHsgYyBhcyBjb2xvcnMgfVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TG9ncyAoKSB7XG4gIGlmIChnZXRDdXJyZW50Q29uZmlnKCkuZW52ICE9PSBFbnYuVEVTVCkge1xuICAgIHRocm93IG5ldyBFcnJvcignSW50ZXJuYWwgbWV0aG9kIHdhcyBjYWxsZWQgb3V0c2lkZSB0ZXN0IG1vZGUnKVxuICB9XG5cbiAgcmV0dXJuIGxvZ3Ncbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxvZ2dlciAobWVzc2FnZTogTWVzc2FnZSkge1xuICBpZiAoZ2V0Q3VycmVudENvbmZpZygpLmVudiA9PT0gRW52LlRFU1QpIHtcbiAgICBsb2dzLnB1c2gobWVzc2FnZSlcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBkZWJ1ZyA9IGdldEN1cnJlbnRDb25maWcoKS5kZWJ1Z1xuICAgIGNvbnN0IGNvbnRleHQgPSBnZXRDdXJyZW50Q29uZmlnKCkuZW52ID09PSBFbnYuUFJPRFVDVElPTiA/ICdwcm9kJyA6ICdkZXYnXG5cbiAgICBpZiAoIWRlYnVnICYmIG1lc3NhZ2UubGV2ZWwgPT09IExldmVscy5EZWJ1ZykgcmV0dXJuXG5cbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIFtcbiAgICAgICAgYy5ncmF5KGNvbnRleHQpLFxuICAgICAgICBjW2NvbG9yc1ttZXNzYWdlLmxldmVsXV0obWVzc2FnZS5sYWJlbCksXG4gICAgICAgIG1lc3NhZ2UubWVzc2FnZSxcbiAgICAgICAgbWVzc2FnZS5kdXJhdGlvbiA/IGMuZ3JheSgnKycgKyBtZXNzYWdlLmR1cmF0aW9uKSA6ICcnLFxuICAgICAgICBtZXNzYWdlLmVycm9yID8gYFxcblxcbiR7bWVzc2FnZS5lcnJvci5zdGFjayB8fCBtZXNzYWdlLmVycm9yfVxcblxcbmAgOiAnJ1xuICAgICAgXVxuICAgICAgICAuZmlsdGVyKEJvb2xlYW4pXG4gICAgICAgIC5qb2luKCcgJylcbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYnVnIChtZXNzYWdlOiBNZXNzYWdlKSB7XG4gIGxvZ2dlcih7IGxldmVsOiBMZXZlbHMuRGVidWcsIC4uLm1lc3NhZ2UgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluZm8gKG1lc3NhZ2U6IE1lc3NhZ2UpIHtcbiAgbG9nZ2VyKHsgbGV2ZWw6IExldmVscy5JbmZvLCAuLi5tZXNzYWdlIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB3YXJuIChtZXNzYWdlOiBNZXNzYWdlKSB7XG4gIGxvZ2dlcih7IGxldmVsOiBMZXZlbHMuV2FybiwgLi4ubWVzc2FnZSB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZXJyb3IgKG1lc3NhZ2U6IE1lc3NhZ2UpIHtcbiAgbG9nZ2VyKHsgbGV2ZWw6IExldmVscy5FcnIsIC4uLm1lc3NhZ2UgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJhdyAoLi4uYXJnczogYW55W10pIHtcbiAgaWYgKGdldEN1cnJlbnRDb25maWcoKS5lbnYgPT09IEVudi5URVNUKSB7XG4gICAgbG9ncy5wdXNoKGFyZ3MpXG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS5sb2coLi4uYXJncylcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbmV3bGluZSAoKSB7XG4gIGlmIChnZXRDdXJyZW50Q29uZmlnKCkuZW52ID09PSBFbnYuVEVTVCkgcmV0dXJuXG4gIGNvbnNvbGUubG9nKCcnKVxufVxuIiwgImltcG9ydCBwYXRoIGZyb20gJ3BhdGgnXG5cbmltcG9ydCAqIGFzIGxvZ2dlciBmcm9tICcuL2xvZydcbmltcG9ydCB7IGNyZWF0ZUVtaXR0ZXIgfSBmcm9tICcuL2NyZWF0ZUVtaXR0ZXInXG5cbmltcG9ydCB7IFByZXN0YSwgQ29uZmlnLCBDTEkgfSBmcm9tICcuLi8nXG5cbmNvbnN0IGRlZmF1bHRDb25maWdGaWxlcGF0aCA9ICdwcmVzdGEuY29uZmlnLmpzJ1xuXG5leHBvcnQgZW51bSBFbnYge1xuICBQUk9EVUNUSU9OID0gJ3Byb2R1Y3Rpb24nLFxuICBERVZFTE9QTUVOVCA9ICdkZXZlbG9wbWVudCcsXG4gIFRFU1QgPSAndGVzdCdcbn1cblxuZ2xvYmFsLl9fcHJlc3RhX18gPVxuICBnbG9iYWwuX19wcmVzdGFfXyB8fFxuICAoe1xuICAgIHBpZDogcHJvY2Vzcy5waWQsXG4gICAgY3dkOiBwcm9jZXNzLmN3ZCgpLFxuICAgIGVudjogRW52LlRFU1QsXG4gICAgZGVidWc6IGZhbHNlXG4gIH0gYXMgUHJlc3RhKVxuXG5mdW5jdGlvbiByZXNvbHZlQWJzb2x1dGVQYXRocyAoY29uZmlnOiBDb25maWcpIHtcbiAgY29uc3QgY3dkID0gcHJvY2Vzcy5jd2QoKVxuXG4gIGlmIChjb25maWcuZmlsZXMpXG4gICAgY29uZmlnLmZpbGVzID0gW10uY29uY2F0KGNvbmZpZy5maWxlcykubWFwKHAgPT4gcGF0aC5yZXNvbHZlKGN3ZCwgcCkpXG4gIGlmIChjb25maWcub3V0cHV0KSBjb25maWcub3V0cHV0ID0gcGF0aC5yZXNvbHZlKGN3ZCwgY29uZmlnLm91dHB1dClcbiAgaWYgKGNvbmZpZy5hc3NldHMpIGNvbmZpZy5hc3NldHMgPSBwYXRoLnJlc29sdmUoY3dkLCBjb25maWcuYXNzZXRzKVxuICByZXR1cm4gY29uZmlnXG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9jbGVhckN1cnJlbnRDb25maWcgKCkge1xuICAvLyBAdHMtaWdub3JlXG4gIGdsb2JhbC5fX3ByZXN0YV9fID0ge1xuICAgIHBpZDogcHJvY2Vzcy5waWQsXG4gICAgY3dkOiBwcm9jZXNzLmN3ZCgpLFxuICAgIGVudjogRW52LlRFU1RcbiAgfVxufVxuXG4vKipcbiAqIEZldGNoIGEgY29uZmlnIGZpbGUuIElmIG9uZSB3YXMgc3BlY2lmaWVkIGJ5IHRoZSB1c2VyLCBsZXQgdGhlbSBrbm93IGlmXG4gKiBhbnl0aGluZyBnb2VzIHdyb25nLiBPdXRzaWRlIHdhdGNoIG1vZGUsIHRoaXMgc2hvdWxkIGV4aXQoMSkgaWYgdGhlIHVzZXJcbiAqIHByb3ZpZGVkIGEgY29uZmlnIGFuZCB0aGVyZSB3YXMgYW4gZXJyb3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvbmZpZ0ZpbGUgKGZpbGVwYXRoOiBzdHJpbmcsIHNob3VsZEV4aXQ6IGJvb2xlYW4gPSBmYWxzZSkge1xuICB0cnkge1xuICAgIHJldHVybiByZXF1aXJlKHBhdGgucmVzb2x2ZShmaWxlcGF0aCB8fCBkZWZhdWx0Q29uZmlnRmlsZXBhdGgpKVxuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gaWYgdXNlciBzcGVjaWZpZWQgYSBmaWxlLCBtdXN0IGJlIGEgc3ludGF4IGVycm9yXG4gICAgaWYgKCEhZmlsZXBhdGgpIHtcbiAgICAgIGxvZ2dlci5lcnJvcih7XG4gICAgICAgIGxhYmVsOiAnZXJyb3InLFxuICAgICAgICBlcnJvcjogZVxuICAgICAgfSlcblxuICAgICAgLy8gd2UncmUgbm90IGluIHdhdGNoIG1vZGUsIGV4aXRcbiAgICAgIGlmIChzaG91bGRFeGl0KSBwcm9jZXNzLmV4aXQoMSlcbiAgICB9XG5cbiAgICByZXR1cm4ge31cbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2UgX3dpdGhvdXRfIGFueSB2YWx1ZXMgcHJvdmlkZWQgYnkgdGhlIGNvbmZpZyBmaWxlLlxuICogVGhpcyBpcyB1c2VkIHdoZW4gdGhlIHVzZXIgZGVsZXRlcyB0aGVpciBjb25maWcgZmlsZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUNvbmZpZ1ZhbHVlcyAoKSB7XG4gIGxvZ2dlci5kZWJ1Zyh7XG4gICAgbGFiZWw6ICdkZWJ1ZycsXG4gICAgbWVzc2FnZTogYGNvbmZpZyBmaWxlIHZhbHVlcyBjbGVhcmVkYCxcbiAgfSlcblxuICBnbG9iYWwuX19wcmVzdGFfXyA9IGNyZWF0ZUNvbmZpZyh7XG4gICAgLi4uZ2xvYmFsLl9fcHJlc3RhX18sXG4gICAgY29uZmlnOiB7fVxuICB9KVxuXG4gIHJldHVybiBnbG9iYWwuX19wcmVzdGFfX1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudENvbmZpZyAoKSB7XG4gIHJldHVybiBnbG9iYWwuX19wcmVzdGFfX1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ29uZmlnICh7XG4gIGVudiA9IGdsb2JhbC5fX3ByZXN0YV9fLmVudixcbiAgY29uZmlnID0ge30sXG4gIGNsaSA9IHt9XG59OiB7XG4gIGVudj86IEVudlxuICBjb25maWc/OiBQYXJ0aWFsPENvbmZpZz5cbiAgY2xpPzogUGFydGlhbDxDTEk+XG59KSB7XG4gIGNvbmZpZyA9IHJlc29sdmVBYnNvbHV0ZVBhdGhzKHsgLi4uY29uZmlnIH0pIC8vIGNsb25lIHJlYWQtb25seSBvYmpcbiAgY2xpID0gcmVzb2x2ZUFic29sdXRlUGF0aHMoeyAuLi5jbGkgfSlcblxuICAvLyBjb21iaW5lZCBjb25maWcsIHByZWZlcmVuY2UgdG8gQ0xJIGFyZ3NcbiAgY29uc3QgbWVyZ2VkID0ge1xuICAgIG91dHB1dDogY2xpLm91dHB1dCB8fCBjb25maWcub3V0cHV0IHx8IHBhdGgucmVzb2x2ZSgnYnVpbGQnKSxcbiAgICBhc3NldHM6IGNsaS5hc3NldHMgfHwgY29uZmlnLmFzc2V0cyB8fCBwYXRoLnJlc29sdmUoJ3B1YmxpYycpLFxuICAgIGZpbGVzOlxuICAgICAgY2xpLmZpbGVzICYmIGNsaS5maWxlcy5sZW5ndGhcbiAgICAgICAgPyBjbGkuZmlsZXNcbiAgICAgICAgOiBjb25maWcuZmlsZXNcbiAgICAgICAgPyBbXS5jb25jYXQoY29uZmlnLmZpbGVzKVxuICAgICAgICA6IFtdXG4gIH1cblxuICAvLyBzZXQgaW5zdGFuY2VcbiAgZ2xvYmFsLl9fcHJlc3RhX18gPSB7XG4gICAgLi4uZ2xvYmFsLl9fcHJlc3RhX18sXG4gICAgLi4ubWVyZ2VkLCAvLyBvdmVyd3JpdGVzIGV2ZXJ5IHRpbWVcbiAgICBlbnYsXG4gICAgZGVidWc6IGNsaS5kZWJ1ZyB8fCBnbG9iYWwuX19wcmVzdGFfXy5kZWJ1ZyxcbiAgICBjd2Q6IHByb2Nlc3MuY3dkKCksXG4gICAgY29uZmlnRmlsZXBhdGg6IHBhdGgucmVzb2x2ZShjbGkuY29uZmlnIHx8IGRlZmF1bHRDb25maWdGaWxlcGF0aCksXG4gICAgZnVuY3Rpb25zT3V0cHV0RGlyOiBwYXRoLmpvaW4obWVyZ2VkLm91dHB1dCwgJ2Z1bmN0aW9ucycpLFxuICAgIHN0YXRpY091dHB1dERpcjogcGF0aC5qb2luKG1lcmdlZC5vdXRwdXQsICdzdGF0aWMnKSxcbiAgICByb3V0ZXNNYW5pZmVzdDogcGF0aC5qb2luKG1lcmdlZC5vdXRwdXQsICdyb3V0ZXMuanNvbicpLFxuICAgIGV2ZW50czogY3JlYXRlRW1pdHRlcigpXG4gIH1cblxuICBsb2dnZXIuZGVidWcoe1xuICAgIGxhYmVsOiAnZGVidWcnLFxuICAgIG1lc3NhZ2U6IGBjb25maWcgY3JlYXRlZCAke0pTT04uc3RyaW5naWZ5KGdsb2JhbC5fX3ByZXN0YV9fKX1gLFxuICB9KVxuXG4gIHJldHVybiBnbG9iYWwuX19wcmVzdGFfX1xufVxuIiwgInR5cGUgY2FsbGFibGUgPSAoLi4uYXJnczogYW55W10pID0+IHZvaWRcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVtaXR0ZXIgKCkge1xuICBsZXQgZXZlbnRzID0ge31cblxuICBmdW5jdGlvbiBlbWl0IChldjogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgIGV2ZW50c1tldl0gPyBldmVudHNbZXZdLm1hcCgoZm46IGNhbGxhYmxlKSA9PiBmbiguLi5hcmdzKSkgOiBbXVxuICB9XG5cbiAgZnVuY3Rpb24gb24gKGV2OiBzdHJpbmcsIGZuOiAoLi4uYXJnczogYW55W10pID0+IHZvaWQpIHtcbiAgICBldmVudHNbZXZdID0gZXZlbnRzW2V2XSA/IGV2ZW50c1tldl0uY29uY2F0KGZuKSA6IFtmbl1cbiAgICByZXR1cm4gKCkgPT4gZXZlbnRzW2V2XS5zcGxpY2UoZXZlbnRzW2V2XS5pbmRleE9mKGZuKSwgMSlcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFyICgpIHtcbiAgICBldmVudHMgPSB7fVxuICB9XG5cbiAgZnVuY3Rpb24gbGlzdGVuZXJzIChldjogc3RyaW5nKSB7XG4gICAgcmV0dXJuIGV2ZW50c1tldl0gfHwgW11cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZW1pdCxcbiAgICBvbixcbiAgICBjbGVhcixcbiAgICBsaXN0ZW5lcnNcbiAgfVxufVxuIiwgImltcG9ydCBmcyBmcm9tICdmcy1leHRyYSdcbmltcG9ydCBncmFwaCBmcm9tICd3YXRjaC1kZXBlbmRlbmN5LWdyYXBoJ1xuaW1wb3J0IGNob2tpZGFyIGZyb20gJ2Nob2tpZGFyJ1xuaW1wb3J0IG1hdGNoIGZyb20gJ3BpY29tYXRjaCdcblxuaW1wb3J0IHsgb3V0cHV0TGFtYmRhcyB9IGZyb20gJy4vb3V0cHV0TGFtYmRhcydcbmltcG9ydCAqIGFzIGxvZ2dlciBmcm9tICcuL2xvZydcbmltcG9ydCB7IGdldEZpbGVzLCBpc1N0YXRpYywgaXNEeW5hbWljIH0gZnJvbSAnLi9nZXRGaWxlcydcbmltcG9ydCB7IHJlbmRlclN0YXRpY0VudHJpZXMgfSBmcm9tICcuL3JlbmRlclN0YXRpY0VudHJpZXMnXG5pbXBvcnQgeyB0aW1lciB9IGZyb20gJy4vdGltZXInXG5pbXBvcnQgeyBjcmVhdGVDb25maWcsIHJlbW92ZUNvbmZpZ1ZhbHVlcywgZ2V0Q29uZmlnRmlsZSB9IGZyb20gJy4vY29uZmlnJ1xuaW1wb3J0IHsgYnVpbHRTdGF0aWNGaWxlcyB9IGZyb20gJy4vYnVpbHRTdGF0aWNGaWxlcydcbmltcG9ydCB7IHJlbW92ZUJ1aWx0U3RhdGljRmlsZSB9IGZyb20gJy4vcmVtb3ZlQnVpbHRTdGF0aWNGaWxlJ1xuXG5pbXBvcnQgdHlwZSB7IFByZXN0YSB9IGZyb20gJy4uJ1xuXG4vKlxuICogV3JhcHMgb3V0cHV0TGFtYmRhcyBmb3IgbG9nZ2luZ1xuICovXG5mdW5jdGlvbiB1cGRhdGVMYW1iZGFzIChpbnB1dHM6IHN0cmluZ1tdLCBjb25maWc6IFByZXN0YSkge1xuICBjb25zdCB0aW1lID0gdGltZXIoKVxuXG4gIC8vIGFsd2F5cyB3cml0ZSB0aGlzLCBldmVuIGlmIGlucHV0cyA9IFtdXG4gIG91dHB1dExhbWJkYXMoaW5wdXRzLCBjb25maWcpXG5cbiAgLy8gaWYgdXNlciBhY3R1YWxseSBoYXMgcm91dGVzIGNvbmZpZ3VyZWQsIGdpdmUgZmVlZGJhY2tcbiAgaWYgKGlucHV0cy5sZW5ndGgpIHtcbiAgICBsb2dnZXIuaW5mbyh7XG4gICAgICBsYWJlbDogJ2J1aWx0JyxcbiAgICAgIG1lc3NhZ2U6IGBsYW1iZGFzYCxcbiAgICAgIGR1cmF0aW9uOiB0aW1lKClcbiAgICB9KVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3YXRjaCAoY29uZmlnOiBQcmVzdGEpIHtcbiAgLypcbiAgICogR2V0IGZpbGVzIHRoYXQgbWF0Y2ggc3RhdGljL2R5bmFtaWMgcGF0dGVycyBhdCBzdGFydHVwXG4gICAqL1xuICBsZXQgZmlsZXMgPSBnZXRGaWxlcyhjb25maWcpXG4gIGxldCBoYXNDb25maWdGaWxlID0gZnMuZXhpc3RzU3luYyhjb25maWcuY29uZmlnRmlsZXBhdGgpXG5cbiAgaWYgKCFmaWxlcy5sZW5ndGgpIHtcbiAgICBsb2dnZXIud2Fybih7XG4gICAgICBsYWJlbDogJ3BhdGhzJyxcbiAgICAgIG1lc3NhZ2U6ICdubyBmaWxlcyBjb25maWd1cmVkJ1xuICAgIH0pXG4gIH1cblxuICAvKlxuICAgKiBDcmVhdGUgaW5pdGlhbCBkeW5hbWljIGVudHJ5IHJlZ2FyZGxlc3Mgb2YgaWYgdGhlIHVzZXIgaGFzIHJvdXRlcywgYmMgd2VcbiAgICogbmVlZCB0aGlzIGZpbGUgdG8gc2VydmUgNDA0IGxvY2FsbHlcbiAgICovXG4gIHVwZGF0ZUxhbWJkYXMoZmlsZXMuZmlsdGVyKGlzRHluYW1pYyksIGNvbmZpZylcblxuICAvKlxuICAgKiBTZXQgdXAgYWxsIHdhdGNoZXJzXG4gICAqL1xuICBjb25zdCBmaWxlV2F0Y2hlciA9IGdyYXBoKHsgYWxpYXM6IHsgJ0AnOiBjb25maWcuY3dkIH0gfSlcbiAgY29uc3QgZ2xvYmFsV2F0Y2hlciA9IGNob2tpZGFyLndhdGNoKGNvbmZpZy5jd2QsIHtcbiAgICBpZ25vcmVJbml0aWFsOiB0cnVlLFxuICAgIGlnbm9yZWQ6IFtjb25maWcub3V0cHV0LCBjb25maWcuYXNzZXRzXVxuICB9KVxuXG4gIC8qXG4gICAqIE9uIGEgY29uZmlnIHVwZGF0ZSwgdGhlIHVzZXIgbWF5IGhhdmUgcGFzc2VkIGluIGEgbmV3IGBmaWxlc2AgYXJyYXkgb3JcbiAgICogb3RoZXIgZ2xvYmFsIGNvbmZpZyByZXF1aXJlZCBieSBhbGwgZmlsZXMsIHNvIHdlIG5lZWQgdG8gcmUtZmV0Y2ggYWxsXG4gICAqIGZpbGVzIGFuZCByZWJ1aWxkIGV2ZXJ5dGhpbmcuXG4gICAqL1xuICBhc3luYyBmdW5jdGlvbiBoYW5kbGVDb25maWdVcGRhdGUgKCkge1xuICAgIGZpbGVzID0gZ2V0RmlsZXMoY29uZmlnKVxuICAgIGF3YWl0IHJlbmRlclN0YXRpY0VudHJpZXMoZmlsZXMuZmlsdGVyKGlzU3RhdGljKSwgY29uZmlnKVxuICAgIHVwZGF0ZUxhbWJkYXMoZmlsZXMuZmlsdGVyKGlzRHluYW1pYyksIGNvbmZpZylcbiAgfVxuXG4gIC8qXG4gICAqIE9uIGEgY2hhbmdlZCBmaWxlLCB3ZSBjYW4ganVzdCByZW5kZXIgaXRcbiAgICovXG4gIGFzeW5jIGZ1bmN0aW9uIGhhbmRsZUZpbGVDaGFuZ2UgKGZpbGU6IHN0cmluZykge1xuICAgIC8vIHJlbmRlciBqdXN0IGZpbGUgdGhhdCBjaGFuZ2VkXG4gICAgaWYgKGlzU3RhdGljKGZpbGUpKSB7XG4gICAgICBhd2FpdCByZW5kZXJTdGF0aWNFbnRyaWVzKFtmaWxlXSwgY29uZmlnKVxuICAgIH1cblxuICAgIC8vIHVwZGF0ZSBkeW5hbWljIGVudHJ5IHdpdGggQUxMIGR5bmFtaWMgZmlsZXNcbiAgICBpZiAoaXNEeW5hbWljKGZpbGUpKSB7XG4gICAgICB1cGRhdGVMYW1iZGFzKGZpbGVzLmZpbHRlcihpc0R5bmFtaWMpLCBjb25maWcpXG4gICAgfVxuXG4gICAgY29uZmlnLmV2ZW50cy5lbWl0KCdyZWZyZXNoJylcbiAgICBjb25maWcuZXZlbnRzLmVtaXQoJ2RvbmUnLCBbZmlsZV0pXG4gIH1cblxuICBmaWxlV2F0Y2hlci5vbigncmVtb3ZlJywgKFtpZF0pID0+IHtcbiAgICBsb2dnZXIuZGVidWcoe1xuICAgICAgbGFiZWw6ICd3YXRjaCcsXG4gICAgICBtZXNzYWdlOiBgZmlsZVdhdGNoZXIgLSByZW1vdmVkICR7aWR9YFxuICAgIH0pXG5cbiAgICAvLyByZW1vdmUgZnJvbSBsb2NhbCBoYXNoXG4gICAgZmlsZXMuc3BsaWNlKGZpbGVzLmluZGV4T2YoaWQpLCAxKVxuXG4gICAgLy8gdXBkYXRlIHRoaXMgcmVnYXJkbGVzcywgbm90IHN1cmUgaWYgW2lkXSB3YXMgZHluYW1pYyBvciBzdGF0aWNcbiAgICB1cGRhdGVMYW1iZGFzKGZpbGVzLmZpbHRlcihpc0R5bmFtaWMpLCBjb25maWcpXG5cbiAgICAvLyBpZiBpdCB3YXMgY29uZmlnLCB3ZSBnb3R0YSBkbyBhIHJlc3RhcnRcbiAgICBpZiAoaWQgPT09IGNvbmZpZy5jb25maWdGaWxlcGF0aCkge1xuICAgICAgLy8gZmlsdGVyIG91dCB2YWx1ZXMgZnJvbSB0aGUgY29uZmlnIGZpbGVcbiAgICAgIGNvbmZpZyA9IHJlbW92ZUNvbmZpZ1ZhbHVlcygpXG5cbiAgICAgIC8vIHJlc2V0IHRoaXMhXG4gICAgICBoYXNDb25maWdGaWxlID0gZmFsc2VcblxuICAgICAgaGFuZGxlQ29uZmlnVXBkYXRlKClcbiAgICB9XG5cbiAgICA7KGJ1aWx0U3RhdGljRmlsZXNbaWRdIHx8IFtdKS5mb3JFYWNoKGZpbGUgPT5cbiAgICAgIHJlbW92ZUJ1aWx0U3RhdGljRmlsZShmaWxlLCBjb25maWcpXG4gICAgKVxuXG4gICAgY29uZmlnLmV2ZW50cy5lbWl0KCdyZW1vdmUnLCBpZClcbiAgfSlcblxuICBmaWxlV2F0Y2hlci5vbignY2hhbmdlJywgKFtpZF0pID0+IHtcbiAgICBsb2dnZXIuZGVidWcoe1xuICAgICAgbGFiZWw6ICd3YXRjaCcsXG4gICAgICBtZXNzYWdlOiBgZmlsZVdhdGNoZXIgLSBjaGFuZ2VkICR7aWR9YFxuICAgIH0pXG5cbiAgICBpZiAoaWQgPT09IGNvbmZpZy5jb25maWdGaWxlcGF0aCkge1xuICAgICAgLy8gY2xlYXIgY29uZmlnIGZpbGUgZm9yIHJlLXJlcXVpcmVcbiAgICAgIGRlbGV0ZSByZXF1aXJlLmNhY2hlW2NvbmZpZy5jb25maWdGaWxlcGF0aF1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gbWVyZ2UgaW4gbmV3IHZhbHVlcyBmcm9tIGNvbmZpZyBmaWxlXG4gICAgICAgIGNvbmZpZyA9IGNyZWF0ZUNvbmZpZyh7XG4gICAgICAgICAgY29uZmlnOiBnZXRDb25maWdGaWxlKGNvbmZpZy5jb25maWdGaWxlcGF0aClcbiAgICAgICAgfSlcblxuICAgICAgICBoYW5kbGVDb25maWdVcGRhdGUoKVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBsb2dnZXIuZXJyb3Ioe1xuICAgICAgICAgIGxhYmVsOiAnZXJyb3InLFxuICAgICAgICAgIGVycm9yOiBlLFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBoYW5kbGVGaWxlQ2hhbmdlKGlkKVxuICAgIH1cblxuICAgIGNvbmZpZy5ldmVudHMuZW1pdCgnY2hhbmdlJywgaWQpXG4gIH0pXG5cbiAgZmlsZVdhdGNoZXIub24oJ2Vycm9yJywgZSA9PiB7XG4gICAgbG9nZ2VyLmVycm9yKHtcbiAgICAgIGxhYmVsOiAnZXJyb3InLFxuICAgICAgZXJyb3I6IGUsXG4gICAgfSlcbiAgfSlcblxuICAvKlxuICAgKiBnbG9iYWxXYXRjaGVyIHdhdGNoZXMgdGhlIHJhdyBmaWxlIGdsb2JzIHBhc3NlZCB0byB0aGUgQ0xJIG9yIGFzIGBmaWxlc2BcbiAgICogaW4gdGhlIGNvbmZpZy4gSWYgY2hlY2tzIG9uIGFkZC9jaGFuZ2UgdG8gc2VlIGlmIGEgZmlsZSBzaG91bGQgYmUgdXBncmFkZWRcbiAgICogdG8gYSBhIFByZXN0YSBzb3VyY2UgZmlsZSwgYW5kIGFkZGVkIHRvIHRoZSBmaWxlV2F0Y2hlci4gSXQgYWxzbyB3YXRjaGVzXG4gICAqIGZvciBhZGRpdGlvbiBvZiBhIGNvbmZpZyBmaWxlLlxuICAgKi9cbiAgZ2xvYmFsV2F0Y2hlci5vbignYWxsJywgYXN5bmMgKGV2ZW50LCBmaWxlKSA9PiB7XG4gICAgLy8gaWdub3JlIGV2ZW50cyBoYW5kbGVkIGJ5IHdkZywgb3IgYW55IGRpcmVjdG9yeSBldmVudHNcbiAgICBpZiAoXG4gICAgICAhL2FkZHxjaGFuZ2UvLnRlc3QoZXZlbnQpIHx8XG4gICAgICAhZnMuZXhpc3RzU3luYyhmaWxlKSB8fFxuICAgICAgZnMubHN0YXRTeW5jKGZpbGUpLmlzRGlyZWN0b3J5KClcbiAgICApXG4gICAgICByZXR1cm5cblxuICAgIC8vIGlmIGEgZmlsZSBjaGFuZ2UgbWF0Y2hlcyBhbnkgcGFnZXMgZ2xvYnNcbiAgICBpZiAobWF0Y2goY29uZmlnLmZpbGVzKShmaWxlKSAmJiAhZmlsZXMuaW5jbHVkZXMoZmlsZSkpIHtcbiAgICAgIGxvZ2dlci5kZWJ1Zyh7XG4gICAgICAgIGxhYmVsOiAnd2F0Y2gnLFxuICAgICAgICBtZXNzYWdlOiBgZ2xvYmFsV2F0Y2hlciAtIGFkZCAke2ZpbGV9YFxuICAgICAgfSlcblxuICAgICAgZmlsZXMucHVzaChmaWxlKVxuXG4gICAgICBmaWxlV2F0Y2hlci5hZGQoZmlsZSlcblxuICAgICAgaGFuZGxlRmlsZUNoYW5nZShmaWxlKVxuICAgIH1cblxuICAgIC8vIGlmIGZpbGUgbWF0Y2hlcyBjb25maWcgZmlsZSBhbmQgd2UgZG9uJ3QgYWxyZWFkeSBoYXZlIG9uZVxuICAgIGlmIChmaWxlID09PSBjb25maWcuY29uZmlnRmlsZXBhdGggJiYgIWhhc0NvbmZpZ0ZpbGUpIHtcbiAgICAgIGxvZ2dlci5kZWJ1Zyh7XG4gICAgICAgIGxhYmVsOiAnd2F0Y2gnLFxuICAgICAgICBtZXNzYWdlOiBgZ2xvYmFsV2F0Y2hlciAtIGFkZCBjb25maWcgZmlsZSAke2ZpbGV9YFxuICAgICAgfSlcblxuICAgICAgZmlsZVdhdGNoZXIuYWRkKGNvbmZpZy5jb25maWdGaWxlcGF0aClcblxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gbWVyZ2UgaW4gbmV3IHZhbHVlcyBmcm9tIGNvbmZpZyBmaWxlXG4gICAgICAgIGNvbmZpZyA9IGNyZWF0ZUNvbmZpZyh7XG4gICAgICAgICAgY29uZmlnOiBnZXRDb25maWdGaWxlKGNvbmZpZy5jb25maWdGaWxlcGF0aClcbiAgICAgICAgfSlcblxuICAgICAgICBoYXNDb25maWdGaWxlID0gdHJ1ZVxuXG4gICAgICAgIGhhbmRsZUNvbmZpZ1VwZGF0ZSgpXG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcih7XG4gICAgICAgICAgbGFiZWw6ICdlcnJvcicsXG4gICAgICAgICAgZXJyb3I6IGUsXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uZmlnLmV2ZW50cy5lbWl0KCdhZGQnLCBmaWxlKVxuICB9KVxuXG4gIC8qKlxuICAgKiBJbml0IHdhdGNoaW5nIGFmdGVyIGV2ZW50IHN1YnNjcmlwdGlvbnNcbiAgICovXG4gIGZpbGVXYXRjaGVyLmFkZChmaWxlcylcbiAgaWYgKGhhc0NvbmZpZ0ZpbGUpIGZpbGVXYXRjaGVyLmFkZChjb25maWcuY29uZmlnRmlsZXBhdGgpXG5cbiAgLyoqXG4gICAqIFByaW1lIGZpbGVzIHRvIGNoZWNrIGZvciBlcnJvcnMgb24gc3RhcnR1cCBhbmQgcmVnaXN0ZXIgYW55IHBsdWdpbnNcbiAgICovXG4gIHRyeSB7XG4gICAgZmlsZXMubWFwKHJlcXVpcmUpXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBsb2dnZXIuZXJyb3Ioe1xuICAgICAgbGFiZWw6ICdlcnJvcicsXG4gICAgICBlcnJvcjogZSxcbiAgICB9KVxuICB9XG59XG4iLCAiaW1wb3J0IGZzIGZyb20gJ2ZzLWV4dHJhJ1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCdcbmltcG9ydCByc29ydCBmcm9tICdyb3V0ZS1zb3J0J1xuXG5pbXBvcnQgeyBFbnYgfSBmcm9tICcuL2NvbmZpZydcbmltcG9ydCB7IGhhc2hDb250ZW50IH0gZnJvbSAnLi9oYXNoQ29udGVudCdcbmltcG9ydCAqIGFzIGxvZ2dlciBmcm9tICcuL2xvZydcblxuaW1wb3J0IHR5cGUgeyBQcmVzdGEgfSBmcm9tICcuLi8nXG5cbmV4cG9ydCBmdW5jdGlvbiBvdXRwdXRMYW1iZGEoaW5wdXQ6IHN0cmluZywgY29uZmlnOiBQcmVzdGEpOiBbc3RyaW5nLCBzdHJpbmddIHtcbiAgY29uc3QgeyByb3V0ZSB9ID0gcmVxdWlyZShpbnB1dClcbiAgY29uc3QgbmFtZSA9IHBhdGguYmFzZW5hbWUoaW5wdXQpLnNwbGl0KCcuJykucmV2ZXJzZSgpLnNsaWNlKDEpLnJldmVyc2UoKS5qb2luKCcuJylcbiAgY29uc3Qgb3V0cHV0ID0gcGF0aC5qb2luKFxuICAgIGNvbmZpZy5mdW5jdGlvbnNPdXRwdXREaXIsXG4gICAgY29uZmlnLmVudiA9PT0gRW52LlBST0RVQ1RJT04gPyAoXG4gICAgICBuYW1lICsgJy0nICsgaGFzaENvbnRlbnQoZnMucmVhZEZpbGVTeW5jKGlucHV0LCAndXRmOCcpKSArICcuanMnXG4gICAgKSA6IChcbiAgICAgIG5hbWUgKyAnLmpzJ1xuICAgIClcbiAgKVxuXG4gIGxvZ2dlci5kZWJ1Zyh7XG4gICAgbGFiZWw6ICdkZWJ1ZycsXG4gICAgbWVzc2FnZTogYGdlbmVyYXRpbmcgJHtuYW1lfSBsYW1iZGFgLFxuICB9KVxuXG4gIGZzLm91dHB1dEZpbGVTeW5jKG91dHB1dCwgYGltcG9ydCB7IHdyYXBIYW5kbGVyIH0gZnJvbSAncHJlc3RhJztcbmltcG9ydCAqIGFzIGZpbGUgZnJvbSAnJHtpbnB1dH0nO1xuZXhwb3J0IGNvbnN0IHJvdXRlID0gZmlsZS5yb3V0ZVxuZXhwb3J0IGNvbnN0IGhhbmRsZXIgPSB3cmFwSGFuZGxlcihmaWxlKWApXG5cbiAgcmV0dXJuIFtcbiAgICByb3V0ZSxcbiAgICBvdXRwdXQsXG4gIF1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG91dHB1dExhbWJkYXMgKGlucHV0czogc3RyaW5nW10sIGNvbmZpZzogUHJlc3RhKSB7XG4gIGNvbnN0IGxhbWJkYXMgPSBpbnB1dHNcbiAgICAubWFwKGlucHV0ID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBvdXRwdXRMYW1iZGEoaW5wdXQsIGNvbmZpZylcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKHtcbiAgICAgICAgICBsYWJlbDogJ2Vycm9yJyxcbiAgICAgICAgICBlcnJvcjogZVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgfVxuICAgIH0pXG4gICAgLmZpbHRlcihCb29sZWFuKVxuICBjb25zdCBzb3J0ZWQgPSByc29ydChsYW1iZGFzLm1hcChsID0+IGxbMF0pKVxuICBjb25zdCBtYW5pZmVzdCA9IHt9XG5cbiAgZm9yIChjb25zdCByb3V0ZSBvZiBzb3J0ZWQpIHtcbiAgICBtYW5pZmVzdFtyb3V0ZV0gPSBsYW1iZGFzLmZpbmQobCA9PiBsWzBdID09PSByb3V0ZSlbMV1cbiAgfVxuXG4gIGZzLm91dHB1dEZpbGVTeW5jKGNvbmZpZy5yb3V0ZXNNYW5pZmVzdCwgSlNPTi5zdHJpbmdpZnkobWFuaWZlc3QpKVxuXG4gIHJldHVybiBsYW1iZGFzXG59XG4iLCAiZXhwb3J0IGZ1bmN0aW9uIGhhc2hDb250ZW50IChjb250ZW50OiBzdHJpbmcpIHtcbiAgdmFyIGggPSA1MzgxLFxuICAgIGkgPSBjb250ZW50Lmxlbmd0aFxuXG4gIHdoaWxlIChpKSBoID0gKGggKiAzMykgXiBjb250ZW50LmNoYXJDb2RlQXQoLS1pKVxuXG4gIHJldHVybiAoaCA+Pj4gMCkudG9TdHJpbmcoMzYpXG59XG4iLCAiaW1wb3J0IGZzIGZyb20gJ2ZzLWV4dHJhJ1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCdcbmltcG9ydCBtYXRjaGVkIGZyb20gJ21hdGNoZWQnXG5cbmltcG9ydCB7IFByZXN0YSB9IGZyb20gJy4uLydcblxuZXhwb3J0IGZ1bmN0aW9uIGlzRHluYW1pYyAoZmlsZTogc3RyaW5nKSB7XG4gIHJldHVybiAvZXhwb3J0XFxzLitcXHNyb3V0ZVxccytcXD0vLnRlc3QoZnMucmVhZEZpbGVTeW5jKGZpbGUsICd1dGYtOCcpKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNTdGF0aWMgKGZpbGU6IHN0cmluZykge1xuICByZXR1cm4gL2V4cG9ydFxccy4rXFxzZ2V0U3RhdGljUGF0aHMvLnRlc3QoZnMucmVhZEZpbGVTeW5jKGZpbGUsICd1dGYtOCcpKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNQcmVzdGFGaWxlIChmaWxlOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGlzU3RhdGljKGZpbGUpIHx8IGlzRHluYW1pYyhmaWxlKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsZXMgKGNvbmZpZzogUHJlc3RhKTogc3RyaW5nW10ge1xuICByZXR1cm4gW11cbiAgICAuY29uY2F0KGNvbmZpZy5maWxlcylcbiAgICAubWFwKGZpbGUgPT4gcGF0aC5yZXNvbHZlKGNvbmZpZy5jd2QsIGZpbGUpKSAvLyBtYWtlIGFic29sdXRlXG4gICAgLm1hcChnbG9iID0+IG1hdGNoZWQuc3luYyhnbG9iLCB7IGN3ZDogY29uZmlnLmN3ZCB9KSlcbiAgICAuZmxhdCgpXG59XG4iLCAiaW1wb3J0IGZzIGZyb20gJ2ZzLWV4dHJhJ1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCdcbmltcG9ydCBtaW1lIGZyb20gJ21pbWUtdHlwZXMnXG5cbmltcG9ydCAqIGFzIGxvZ2dlciBmcm9tICcuL2xvZydcbmltcG9ydCB7IHRpbWVyIH0gZnJvbSAnLi90aW1lcidcbmltcG9ydCB7IGdldFJvdXRlUGFyYW1zIH0gZnJvbSAnLi9nZXRSb3V0ZVBhcmFtcydcbmltcG9ydCB7IG5vcm1hbGl6ZVJlc3BvbnNlIH0gZnJvbSAnLi9ub3JtYWxpemVSZXNwb25zZSdcbmltcG9ydCB7IGJ1aWx0U3RhdGljRmlsZXMgfSBmcm9tICcuL2J1aWx0U3RhdGljRmlsZXMnXG5pbXBvcnQgeyByZW1vdmVCdWlsdFN0YXRpY0ZpbGUgfSBmcm9tICcuL3JlbW92ZUJ1aWx0U3RhdGljRmlsZSdcblxuaW1wb3J0IHR5cGUgeyBQcmVzdGEgfSBmcm9tICcuLi8nXG5cbmV4cG9ydCBmdW5jdGlvbiBwYXRobmFtZVRvRmlsZSAocGF0aG5hbWU6IHN0cmluZywgZXh0ID0gJ2h0bWwnKSB7XG4gIHJldHVybiAhIXBhdGguZXh0bmFtZShwYXRobmFtZSlcbiAgICA/IHBhdGhuYW1lIC8vIGlmIHBhdGggaGFzIGV4dGVuc2lvbiwgdXNlIGl0XG4gICAgOiBleHQgPT09ICdodG1sJ1xuICAgID8gYCR7cGF0aG5hbWV9L2luZGV4Lmh0bWxgIC8vIGlmIEhUTUwgaXMgaW5mZXJyZWQsIGNyZWF0ZSBpbmRleFxuICAgIDogYCR7cGF0aG5hbWV9LiR7ZXh0fWAgLy8gYW55dGhpbmcgYnV0IEhUTUwgd2lsbCBuZWVkIGFuIGV4dGVuc2lvbiwgb3RoZXJ3aXNlIGJyb3dzZXJzIHdpbGwgcmVuZGVyIGFzIHRleHRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlclN0YXRpY0VudHJpZXMgKGVudHJpZXM6IHN0cmluZ1tdLCBjb25maWc6IFByZXN0YSk6IFByb21pc2U8eyBhbGxHZW5lcmF0ZWRGaWxlczogc3RyaW5nW10gfT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHksIG4pID0+IHtcbiAgICBsb2dnZXIuZGVidWcoe1xuICAgICAgbGFiZWw6ICdkZWJ1ZycsXG4gICAgICBtZXNzYWdlOiBgcmVuZGVyaW5nICR7SlNPTi5zdHJpbmdpZnkoZW50cmllcyl9YCxcbiAgICB9KVxuXG4gICAgY29uc3QgYWxsR2VuZXJhdGVkRmlsZXM6IHN0cmluZ1tdID0gW11cblxuICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgY29uc3QgbG9jYXRpb24gPSBlbnRyeS5yZXBsYWNlKGNvbmZpZy5jd2QsICcnKVxuXG4gICAgICB0cnkge1xuICAgICAgICBkZWxldGUgcmVxdWlyZS5jYWNoZVtlbnRyeV1cblxuICAgICAgICBjb25zdCBmaWxlID0gcmVxdWlyZShlbnRyeSlcbiAgICAgICAgY29uc3QgcGF0aHMgPSBhd2FpdCBmaWxlLmdldFN0YXRpY1BhdGhzKClcblxuICAgICAgICBjb25zdCBwcmV2RmlsZXMgPSAoYnVpbHRTdGF0aWNGaWxlc1tlbnRyeV0gPVxuICAgICAgICAgIGJ1aWx0U3RhdGljRmlsZXNbZW50cnldIHx8IFtdKVxuICAgICAgICBjb25zdCBuZXh0RmlsZXM6IHN0cmluZ1tdID0gW11cblxuICAgICAgICBpZiAoIXBhdGhzIHx8ICFwYXRocy5sZW5ndGgpIHtcbiAgICAgICAgICBsb2dnZXIud2Fybih7XG4gICAgICAgICAgICBsYWJlbDogJ3BhdGhzJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGAke2xvY2F0aW9ufSAtIG5vIHBhdGhzIHRvIHJlbmRlcmBcbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgcHJldkZpbGVzLmZvckVhY2goZmlsZSA9PiByZW1vdmVCdWlsdFN0YXRpY0ZpbGUoZmlsZSwgY29uZmlnKSlcblxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGNvbnN0IHVybCBvZiBwYXRocykge1xuICAgICAgICAgIGNvbnN0IHRpbWUgPSB0aW1lcigpXG4gICAgICAgICAgY29uc3QgZXZlbnQgPSB7XG4gICAgICAgICAgICBwYXRoOiB1cmwsXG4gICAgICAgICAgICBwYXJhbXM6IGZpbGUucm91dGUgPyBnZXRSb3V0ZVBhcmFtcyh1cmwsIGZpbGUucm91dGUpIDoge31cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCByZXNwb25zZSA9IG5vcm1hbGl6ZVJlc3BvbnNlKGF3YWl0IGZpbGUuaGFuZGxlcihldmVudCwge30pKVxuICAgICAgICAgIGNvbnN0IHR5cGUgPSByZXNwb25zZS5oZWFkZXJzWydDb250ZW50LVR5cGUnXVxuICAgICAgICAgIGNvbnN0IGV4dCA9IHR5cGUgPyBtaW1lLmV4dGVuc2lvbih0eXBlKSA6ICdodG1sJ1xuICAgICAgICAgIGNvbnN0IGZpbGVuYW1lID0gcGF0aG5hbWVUb0ZpbGUodXJsLCBleHQpXG5cbiAgICAgICAgICBhbGxHZW5lcmF0ZWRGaWxlcy5wdXNoKGZpbGVuYW1lKVxuICAgICAgICAgIG5leHRGaWxlcy5wdXNoKGZpbGVuYW1lKVxuXG4gICAgICAgICAgZnMub3V0cHV0RmlsZVN5bmMoXG4gICAgICAgICAgICBwYXRoLmpvaW4oY29uZmlnLnN0YXRpY091dHB1dERpciwgZmlsZW5hbWUpLFxuICAgICAgICAgICAgcmVzcG9uc2UuYm9keSxcbiAgICAgICAgICAgICd1dGYtOCdcbiAgICAgICAgICApXG5cbiAgICAgICAgICBsb2dnZXIuaW5mbyh7XG4gICAgICAgICAgICBsYWJlbDogJ2J1aWx0JyxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHVybCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiB0aW1lKClcbiAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gZGlmZiBhbmQgcmVtb3ZlIGZpbGVzXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBwcmV2RmlsZXMpIHtcbiAgICAgICAgICBpZiAoIW5leHRGaWxlcy5pbmNsdWRlcyhmaWxlKSkge1xuICAgICAgICAgICAgcmVtb3ZlQnVpbHRTdGF0aWNGaWxlKGZpbGUsIGNvbmZpZylcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBidWlsdFN0YXRpY0ZpbGVzW2VudHJ5XSA9IG5leHRGaWxlc1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoY29uZmlnLmVudiA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICAgIGxvZ2dlci5lcnJvcih7XG4gICAgICAgICAgICBsYWJlbDogJ2Vycm9yJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdlcnJvcnMgZGV0ZWN0ZWQsIHBhdXNpbmcuLi4nLFxuICAgICAgICAgICAgZXJyb3I6IGUsXG4gICAgICAgICAgfSlcblxuICAgICAgICAgIHkoeyBhbGxHZW5lcmF0ZWRGaWxlcyB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxvZ2dlci5lcnJvcih7XG4gICAgICAgICAgICBsYWJlbDogJ2Vycm9yJyxcbiAgICAgICAgICAgIGVycm9yOiBlLFxuICAgICAgICAgIH0pXG5cbiAgICAgICAgICBuKGUpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBleGl0IGxvb3Agb24gYW55IGVycm9yXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gY2xlYXIgdG8gcHJldmVudCBtZW1vcnkgbGVha1xuICAgIC8vIGxvYWRDYWNoZS5jbGVhckFsbE1lbW9yeSgpIC8vIFRPRE8gcHJvYnMgY2FuJ3QgXHUyMDE0IGVtaXQ/XG5cbiAgICB5KHsgYWxsR2VuZXJhdGVkRmlsZXMgfSlcbiAgfSlcbn1cbiIsICJleHBvcnQgZnVuY3Rpb24gdGltZXIgKCkge1xuICBjb25zdCBzdGFydCA9IHByb2Nlc3MuaHJ0aW1lKClcbiAgcmV0dXJuICgpID0+IHtcbiAgICBjb25zdCBbcywgbmFub3NdID0gcHJvY2Vzcy5ocnRpbWUoc3RhcnQpXG4gICAgY29uc3QgbXMgPSBuYW5vcyAvIDEwMDAwMDBcblxuICAgIGlmIChzIDwgMSkge1xuICAgICAgcmV0dXJuIChtcyA+PSAxID8gbXMudG9GaXhlZCgwKSA6IG1zLnRvRml4ZWQoMikpICsgJ21zJ1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcyArICcuJyArIG1zLnRvRml4ZWQoMCkgKyAncydcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgdG9SZWdFeHAgZnJvbSAncmVnZXhwYXJhbSdcblxuaW1wb3J0IHsgUm91dGVQYXJhbXMgfSBmcm9tICcuLi8nXG5cbi8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2x1a2VlZC9yZWdleHBhcmFtI3VzYWdlXG5leHBvcnQgZnVuY3Rpb24gZ2V0Um91dGVQYXJhbXMgKHVybDogc3RyaW5nLCByb3V0ZTogc3RyaW5nKTogUm91dGVQYXJhbXMge1xuICBjb25zdCByZXN1bHQgPSB0b1JlZ0V4cChyb3V0ZSlcbiAgbGV0IGkgPSAwXG4gIGxldCBvdXQ6IFJvdXRlUGFyYW1zID0ge31cbiAgbGV0IG1hdGNoZXMgPSByZXN1bHQucGF0dGVybi5leGVjKHVybClcblxuICB3aGlsZSAoaSA8IHJlc3VsdC5rZXlzLmxlbmd0aCkge1xuICAgIG91dFtyZXN1bHQua2V5c1tpXV0gPSBtYXRjaGVzWysraV0gfHwgbnVsbFxuICB9XG5cbiAgcmV0dXJuIG91dFxufVxuIiwgImltcG9ydCB7IEFXUywgUmVzcG9uc2UgfSBmcm9tICcuLi8nXG5cbmZ1bmN0aW9uIHN0cmluZ2lmeSAob2JqOiBvYmplY3QgfCBzdHJpbmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmogPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkob2JqKSA6IG9ialxufVxuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplUmVzcG9uc2UgKFxuICByZXNwb25zZTogUGFydGlhbDxSZXNwb25zZT4gfCBzdHJpbmdcbik6IEFXU1snSGFuZGxlclJlc3BvbnNlJ10ge1xuICBjb25zdCB7XG4gICAgaXNCYXNlNjRFbmNvZGVkID0gZmFsc2UsXG4gICAgc3RhdHVzQ29kZSA9IDIwMCxcbiAgICBoZWFkZXJzID0ge30sXG4gICAgbXVsdGlWYWx1ZUhlYWRlcnMgPSB7fSxcbiAgICBib2R5ID0gJycsXG4gICAgaHRtbCA9IHVuZGVmaW5lZCxcbiAgICBqc29uID0gdW5kZWZpbmVkLFxuICAgIHhtbCA9IHVuZGVmaW5lZFxuICB9ID1cbiAgICB0eXBlb2YgcmVzcG9uc2UgPT09ICdzdHJpbmcnXG4gICAgICA/IHtcbiAgICAgICAgICBib2R5OiByZXNwb25zZVxuICAgICAgICB9XG4gICAgICA6IHJlc3BvbnNlXG5cbiAgbGV0IGNvbnRlbnRUeXBlID0gJ3RleHQvaHRtbDsgY2hhcnNldD11dGYtOCdcblxuICBpZiAoISFqc29uKSB7XG4gICAgY29udGVudFR5cGUgPSAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCdcbiAgfSBlbHNlIGlmICghIXhtbCkge1xuICAgIGNvbnRlbnRUeXBlID0gJ2FwcGxpY2F0aW9uL3htbDsgY2hhcnNldD11dGYtOCdcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgaXNCYXNlNjRFbmNvZGVkLFxuICAgIHN0YXR1c0NvZGUsXG4gICAgaGVhZGVyczoge1xuICAgICAgJ0NvbnRlbnQtVHlwZSc6IGNvbnRlbnRUeXBlLFxuICAgICAgLi4uaGVhZGVyc1xuICAgIH0sXG4gICAgbXVsdGlWYWx1ZUhlYWRlcnMsXG4gICAgYm9keTogc3RyaW5naWZ5KGJvZHkgfHwgaHRtbCB8fCBqc29uIHx8IHhtbCB8fCAnJylcbiAgfVxufVxuIiwgInR5cGUgQnVpbHRTdGF0aWNGaWxlID0gc3RyaW5nXG5cbmV4cG9ydCBjb25zdCBidWlsdFN0YXRpY0ZpbGVzOiB7IFtlbnRyeUZpbGU6IHN0cmluZ106IEJ1aWx0U3RhdGljRmlsZVtdIH0gPSB7fVxuIiwgImltcG9ydCBmcyBmcm9tICdmcy1leHRyYSdcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnXG5cbmltcG9ydCAqIGFzIGxvZ2dlciBmcm9tICcuL2xvZydcblxuaW1wb3J0IHR5cGUgeyBQcmVzdGEgfSBmcm9tICcuLi8nXG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVCdWlsdFN0YXRpY0ZpbGUgKGZpbGU6IHN0cmluZywgY29uZmlnOiBQcmVzdGEpIHtcbiAgbG9nZ2VyLmRlYnVnKHtcbiAgICBsYWJlbDogJ2RlYnVnJyxcbiAgICBtZXNzYWdlOiBgcmVtb3Zpbmcgb2xkIHN0YXRpYyBmaWxlICR7ZmlsZX1gLFxuICB9KVxuXG4gIGZzLnJlbW92ZShwYXRoLmpvaW4oY29uZmlnLnN0YXRpY091dHB1dERpciwgZmlsZSkpXG59XG4iLCAiaW1wb3J0IGZzIGZyb20gJ2ZzLWV4dHJhJ1xuaW1wb3J0IHsgYnVpbGQgYXMgZXNidWlsZCB9IGZyb20gJ2VzYnVpbGQnXG5cbmltcG9ydCB7IG91dHB1dExhbWJkYXMgfSBmcm9tICcuL291dHB1dExhbWJkYXMnXG5pbXBvcnQgeyBnZXRGaWxlcywgaXNTdGF0aWMsIGlzRHluYW1pYyB9IGZyb20gJy4vZ2V0RmlsZXMnXG5pbXBvcnQgeyByZW5kZXJTdGF0aWNFbnRyaWVzIH0gZnJvbSAnLi9yZW5kZXJTdGF0aWNFbnRyaWVzJ1xuaW1wb3J0IHsgdGltZXIgfSBmcm9tICcuL3RpbWVyJ1xuaW1wb3J0ICogYXMgbG9nZ2VyIGZyb20gJy4vbG9nJ1xuXG5pbXBvcnQgeyBQcmVzdGEgfSBmcm9tICcuLi8nXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBidWlsZCAoY29uZmlnOiBQcmVzdGEpIHtcbiAgY29uc3QgdG90YWxUaW1lID0gdGltZXIoKVxuICBjb25zdCBmaWxlcyA9IGdldEZpbGVzKGNvbmZpZylcbiAgY29uc3Qgc3RhdGljSWRzID0gZmlsZXMuZmlsdGVyKGlzU3RhdGljKVxuICBjb25zdCBkeW5hbWljSWRzID0gZmlsZXMuZmlsdGVyKGlzRHluYW1pYylcblxuICBsb2dnZXIuZGVidWcoe1xuICAgIGxhYmVsOiAnYnVpbGQnLFxuICAgIG1lc3NhZ2U6ICdzdGFydGluZyBidWlsZCdcbiAgfSlcblxuICBpZiAoIXN0YXRpY0lkcy5sZW5ndGggJiYgIWR5bmFtaWNJZHMubGVuZ3RoKSB7XG4gICAgbG9nZ2VyLndhcm4oe1xuICAgICAgbGFiZWw6ICdmaWxlcycsXG4gICAgICBtZXNzYWdlOiAnbm8gZmlsZXMgd2VyZSBmb3VuZCwgbm90aGluZyB0byBidWlsZCdcbiAgICB9KVxuICB9IGVsc2Uge1xuICAgIGxldCBzdGF0aWNUaW1lID0gJydcbiAgICBsZXQgc3RhdGljRmlsZUFtb3VudCA9IDBcbiAgICBsZXQgZHluYW1pY1RpbWUgPSAnJ1xuICAgIGxldCBjb3B5VGltZSA9ICcnXG5cbiAgICBjb25zdCB0YXNrcyA9IGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChbXG4gICAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAoc3RhdGljSWRzLmxlbmd0aCkge1xuICAgICAgICAgIGNvbnN0IHRpbWUgPSB0aW1lcigpXG5cbiAgICAgICAgICBjb25zdCB7IGFsbEdlbmVyYXRlZEZpbGVzIH0gPSBhd2FpdCByZW5kZXJTdGF0aWNFbnRyaWVzKFxuICAgICAgICAgICAgc3RhdGljSWRzLFxuICAgICAgICAgICAgY29uZmlnXG4gICAgICAgICAgKVxuXG4gICAgICAgICAgc3RhdGljVGltZSA9IHRpbWUoKVxuICAgICAgICAgIHN0YXRpY0ZpbGVBbW91bnQgPSBhbGxHZW5lcmF0ZWRGaWxlcy5sZW5ndGhcbiAgICAgICAgfVxuICAgICAgfSkoKSxcbiAgICAgIChhc3luYyAoKSA9PiB7XG4gICAgICAgIGlmIChkeW5hbWljSWRzLmxlbmd0aCkge1xuICAgICAgICAgIGNvbnN0IHRpbWUgPSB0aW1lcigpXG5cbiAgICAgICAgICBvdXRwdXRMYW1iZGFzKGR5bmFtaWNJZHMsIGNvbmZpZylcblxuICAgICAgICAgIGF3YWl0IGVzYnVpbGQoe1xuICAgICAgICAgICAgZW50cnlQb2ludHM6IE9iamVjdC52YWx1ZXMocmVxdWlyZShjb25maWcucm91dGVzTWFuaWZlc3QpKSxcbiAgICAgICAgICAgIG91dGRpcjogY29uZmlnLmZ1bmN0aW9uc091dHB1dERpcixcbiAgICAgICAgICAgIGJ1bmRsZTogdHJ1ZSxcbiAgICAgICAgICAgIHBsYXRmb3JtOiAnbm9kZScsXG4gICAgICAgICAgICB0YXJnZXQ6IFsnbm9kZTEyJ10sXG4gICAgICAgICAgICBtaW5pZnk6IHRydWUsXG4gICAgICAgICAgICBhbGxvd092ZXJ3cml0ZTogdHJ1ZVxuICAgICAgICAgIH0pXG5cbiAgICAgICAgICBkeW5hbWljVGltZSA9IHRpbWUoKVxuICAgICAgICB9XG4gICAgICB9KSgpLFxuICAgICAgKGFzeW5jICgpID0+IHtcbiAgICAgICAgaWYgKGZzLmV4aXN0c1N5bmMoY29uZmlnLmFzc2V0cykpIHtcbiAgICAgICAgICBjb25zdCB0aW1lID0gdGltZXIoKVxuXG4gICAgICAgICAgZnMuY29weVN5bmMoY29uZmlnLmFzc2V0cywgY29uZmlnLnN0YXRpY091dHB1dERpcilcblxuICAgICAgICAgIGNvcHlUaW1lID0gdGltZSgpXG4gICAgICAgIH1cbiAgICAgIH0pKClcbiAgICBdKVxuXG4gICAgLy8gc2luY2Ugd2UncmUgYnVpbGRpbmcgKG5vdCB3YXRjaCkgaWYgYW55IHRhc2sgZmFpbHMsIGV4aXQgd2l0aCBlcnJvclxuICAgIGlmICh0YXNrcy5maW5kKHRhc2sgPT4gdGFzay5zdGF0dXMgPT09ICdyZWplY3RlZCcpKSB7XG4gICAgICBsb2dnZXIuZGVidWcoe1xuICAgICAgICBsYWJlbDogJ2J1aWxkJyxcbiAgICAgICAgbWVzc2FnZTogJ2J1aWxkIHBhcnRpYWxseSBmYWlsZWQnXG4gICAgICB9KVxuXG4gICAgICAvLyBsb2cgb3V0IGVycm9yc1xuICAgICAgdGFza3NcbiAgICAgICAgLmZpbHRlcih0YXNrID0+IHRhc2suc3RhdHVzID09PSAncmVqZWN0ZWQnKVxuICAgICAgICAuZm9yRWFjaCgodGFzazogUHJvbWlzZVJlamVjdGVkUmVzdWx0KSA9PlxuICAgICAgICAgIGxvZ2dlci5lcnJvcih7XG4gICAgICAgICAgICBsYWJlbDogJ2Vycm9yJyxcbiAgICAgICAgICAgIGVycm9yOiB0YXNrLnJlYXNvblxuICAgICAgICAgIH0pXG4gICAgICAgIClcblxuICAgICAgcHJvY2Vzcy5leGl0KDEpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBsb2dnZXIubmV3bGluZSgpXG5cbiAgICBpZiAoc3RhdGljVGltZSkge1xuICAgICAgbG9nZ2VyLmluZm8oe1xuICAgICAgICBsYWJlbDogJ3N0YXRpYycsXG4gICAgICAgIG1lc3NhZ2U6IGByZW5kZXJlZCAke3N0YXRpY0ZpbGVBbW91bnR9IGZpbGUocylgLFxuICAgICAgICBkdXJhdGlvbjogc3RhdGljVGltZVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoZHluYW1pY1RpbWUpIHtcbiAgICAgIGxvZ2dlci5pbmZvKHtcbiAgICAgICAgbGFiZWw6ICdsYW1iZGEnLFxuICAgICAgICBtZXNzYWdlOiBgY29tcGlsZWQgJHtkeW5hbWljSWRzLmxlbmd0aH0gZnVuY3Rpb24ocylgLFxuICAgICAgICBkdXJhdGlvbjogZHluYW1pY1RpbWVcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKGNvcHlUaW1lKSB7XG4gICAgICBsb2dnZXIuaW5mbyh7XG4gICAgICAgIGxhYmVsOiAnYXNzZXRzJyxcbiAgICAgICAgbWVzc2FnZTogYGNvcGllZCBpbiAke2NvcHlUaW1lfWBcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKHN0YXRpY1RpbWUgfHwgZHluYW1pY1RpbWUpIHtcbiAgICAgIGxvZ2dlci5uZXdsaW5lKClcbiAgICAgIGxvZ2dlci5pbmZvKHtcbiAgICAgICAgbGFiZWw6ICdjb21wbGV0ZScsXG4gICAgICAgIG1lc3NhZ2U6IGBpbiAke3RvdGFsVGltZSgpfWBcbiAgICAgIH0pXG4gICAgICBsb2dnZXIubmV3bGluZSgpXG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IGZzIGZyb20gJ2ZzJ1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCdcbmltcG9ydCBodHRwIGZyb20gJ2h0dHAnXG5pbXBvcnQgZ2V0UG9ydCBmcm9tICdnZXQtcG9ydCdcbmltcG9ydCBzaXJ2IGZyb20gJ3NpcnYnXG5pbXBvcnQgY2hva2lkYXIgZnJvbSAnY2hva2lkYXInXG5pbXBvcnQgbWltZSBmcm9tICdtaW1lLXR5cGVzJ1xuaW1wb3J0IHRvUmVnRXhwIGZyb20gJ3JlZ2V4cGFyYW0nXG5cbmltcG9ydCB7IHRpbWVyIH0gZnJvbSAnLi90aW1lcidcbmltcG9ydCAqIGFzIGxvZ2dlciBmcm9tICcuL2xvZydcbmltcG9ydCB7IGRlZmF1bHQ0MDQgfSBmcm9tICcuL2RlZmF1bHQ0MDQnXG5pbXBvcnQgeyByZXF1ZXN0VG9FdmVudCB9IGZyb20gJy4vcmVxdWVzdFRvRXZlbnQnXG5pbXBvcnQgeyBzZW5kU2VydmVybGVzc1Jlc3BvbnNlIH0gZnJvbSAnLi9zZW5kU2VydmVybGVzc1Jlc3BvbnNlJ1xuXG5pbXBvcnQgdHlwZSB7IEFXUywgUHJlc3RhIH0gZnJvbSAnLi4nXG5cbmNvbnN0IHN0eWxlID0gW1xuICAncG9zaXRpb246IGZpeGVkJyxcbiAgJ2JvdHRvbTogMjRweCcsXG4gICdyaWdodDogMjRweCcsXG4gICd3aWR0aDogMzJweCcsXG4gICdoZWlnaHQ6IDMycHgnLFxuICAnYm9yZGVyLXJhZGl1czogMzJweCcsXG4gICdiYWNrZ3JvdW5kOiB3aGl0ZScsXG4gICdjb2xvcjogI0ZGN0E5MycsXG4gICdmb250LXNpemU6IDIwcHgnLFxuICAnZm9udC13ZWlnaHQ6IGJvbGQnLFxuICAndGV4dC1hbGlnbjogY2VudGVyJyxcbiAgJ2xpbmUtaGVpZ2h0OiAzMXB4JyxcbiAgJ2JveC1zaGFkb3c6IDBweCAwcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4wNCksIDBweCA0cHggOHB4IHJnYmEoMCwgMCwgMCwgMC4wNCksIDBweCAxNnB4IDI0cHggcmdiYSgwLCAwLCAwLCAwLjA0KSwgMHB4IDI0cHggMzJweCByZ2JhKDAsIDAsIDAsIDAuMDQpJ1xuXVxuXG5jb25zdCBkZXZTZXJ2ZXJJY29uID0gYFxuICA8ZGl2IHN0eWxlPVwiJHtzdHlsZS5qb2luKCc7Jyl9XCI+fjwvZGl2PlxuYFxuXG5mdW5jdGlvbiByZXNvbHZlSFRNTCAoZGlyOiBzdHJpbmcsIHVybDogc3RyaW5nKSB7XG4gIGxldCBmaWxlID0gcGF0aC5qb2luKGRpciwgdXJsKVxuXG4gIC8vIGlmIG5vIGV4dGVuc2lvbiwgaXQncyBwcm9iYWJseSBpbnRlbmRlZCB0byBiZSBhbiBIVE1MIGZpbGVcbiAgaWYgKCFwYXRoLmV4dG5hbWUodXJsKSkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZnMucmVhZEZpbGVTeW5jKHBhdGguam9pbihkaXIsIHVybCwgJ2luZGV4Lmh0bWwnKSwgJ3V0ZjgnKVxuICAgIH0gY2F0Y2ggKGUpIHt9XG4gIH1cblxuICByZXR1cm4gZnMucmVhZEZpbGVTeW5jKGZpbGUsICd1dGY4Jylcbn1cblxuZnVuY3Rpb24gY3JlYXRlRGV2Q2xpZW50ICh7IHBvcnQgfTogeyBwb3J0OiBudW1iZXIgfSkge1xuICByZXR1cm4gYFxuICAgIDxzY3JpcHQ+XG4gICAgICAoZnVuY3Rpb24gKGdsb2JhbCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHNvY2tldGlvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0JylcbiAgICAgICAgICBzb2NrZXRpby5zcmMgPSAnaHR0cHM6Ly91bnBrZy5jb20vcG9ja2V0LmlvQDAuMS40L21pbi5qcydcbiAgICAgICAgICBzb2NrZXRpby5vbmxvYWQgPSBmdW5jdGlvbiBpbml0ICgpIHtcbiAgICAgICAgICAgIHZhciBkaXNjb25uZWN0ZWQgPSBmYWxzZVxuICAgICAgICAgICAgdmFyIHNvY2tldCA9IGlvKCdodHRwOi8vbG9jYWxob3N0OiR7cG9ydH0nLCB7XG4gICAgICAgICAgICAgIHJlY29ubmVjdGlvbkF0dGVtcHRzOiAzXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgc29ja2V0Lm9uKCdjb25uZWN0JywgZnVuY3Rpb24oKSB7IGNvbnNvbGUubG9nKCdwcmVzdGEgY29ubmVjdGVkJykgfSlcbiAgICAgICAgICAgIHNvY2tldC5vbigncmVmcmVzaCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBnbG9iYWwubG9jYXRpb24ucmVsb2FkKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBzb2NrZXQub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgZGlzY29ubmVjdGVkID0gdHJ1ZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHNvY2tldC5vbigncmVjb25uZWN0X2ZhaWxlZCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgaWYgKGRpc2Nvbm5lY3RlZCkgcmV0dXJuXG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJwcmVzdGEgLSBjb25uZWN0aW9uIHRvIHNlcnZlciBvbiA6JHtwb3J0fSBmYWlsZWRcIilcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc29ja2V0aW8pXG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICB9KSh0aGlzKTtcbiAgICA8L3NjcmlwdD5cbiAgYFxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2VydmVySGFuZGxlciAoeyBwb3J0LCBjb25maWcgfTogeyBwb3J0OiBudW1iZXIsIGNvbmZpZzogUHJlc3RhIH0pIHtcbiAgY29uc3QgZGV2Q2xpZW50ID0gY3JlYXRlRGV2Q2xpZW50KHsgcG9ydCB9KVxuICBjb25zdCBzdGF0aWNEaXIgPSBjb25maWcuc3RhdGljT3V0cHV0RGlyXG4gIGNvbnN0IGFzc2V0RGlyID0gY29uZmlnLmFzc2V0c1xuXG4gIHJldHVybiBhc3luYyBmdW5jdGlvbiBzZXJ2ZUhhbmRsZXIocmVxOiBodHRwLkluY29taW5nTWVzc2FnZSwgcmVzOiBodHRwLlNlcnZlclJlc3BvbnNlKSB7XG4gICAgY29uc3QgdGltZSA9IHRpbWVyKClcblxuICAgIC8qXG4gICAgICogSWYgdGhpcyBpcyBhbiBhc3NldCBvdGhlciB0aGFuIEhUTUwgZmlsZXMsIGp1c3Qgc2VydmUgaXRcbiAgICAgKi9cbiAgICBpZiAoL14uK1xcLi4rJC8udGVzdChyZXEudXJsKSAmJiAhL1xcLmh0bWw/JC8udGVzdChyZXEudXJsKSkge1xuICAgICAgbG9nZ2VyLmRlYnVnKHtcbiAgICAgICAgbGFiZWw6ICdkZWJ1ZycsXG4gICAgICAgIG1lc3NhZ2U6IGBhdHRlbXB0aW5nIHRvIHNlcnZlIHN0YXRpYyBhc3NldCAke3JlcS51cmx9YFxuICAgICAgfSlcblxuICAgICAgLypcbiAgICAgICAqIGZpcnN0IGNoZWNrIHRoZSB2Y3MtdHJhY2tlZCBzdGF0aWMgZm9sZGVyLFxuICAgICAgICogdGhlbiBjaGVjayB0aGUgcHJlc3RhLWJ1aWx0IHN0YXRpYyBmb2xkZXJcbiAgICAgICAqXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9zdXJlLXRoaW5nL3ByZXN0YS9pc3N1ZXMvMzBcbiAgICAgICAqL1xuICAgICAgc2lydihhc3NldERpciwgeyBkZXY6IHRydWUgfSkocmVxLCByZXMsICgpID0+IHtcbiAgICAgICAgc2lydihzdGF0aWNEaXIsIHsgZGV2OiB0cnVlIH0pKHJlcSwgcmVzLCAoKSA9PiB7XG4gICAgICAgICAgbG9nZ2VyLndhcm4oe1xuICAgICAgICAgICAgbGFiZWw6ICdzZXJ2ZScsXG4gICAgICAgICAgICBtZXNzYWdlOiBgNDA0ICR7cmVxLnVybH1gLFxuICAgICAgICAgICAgZHVyYXRpb246IHRpbWUoKVxuICAgICAgICAgIH0pXG5cbiAgICAgICAgICBzZW5kU2VydmVybGVzc1Jlc3BvbnNlKHJlcywge1xuICAgICAgICAgICAgc3RhdHVzQ29kZTogNDA0LFxuICAgICAgICAgICAgYm9keTogZGVmYXVsdDQwNCArIGRldkNsaWVudCArIGRldlNlcnZlckljb24sXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIC8qXG4gICAgICAgKiBUcnkgdG8gcmVzb2x2ZSBhIHN0YXRpYyByb3V0ZSBub3JtYWxseVxuICAgICAgICovXG4gICAgICB0cnkge1xuICAgICAgICBsb2dnZXIuZGVidWcoe1xuICAgICAgICAgIGxhYmVsOiAnZGVidWcnLFxuICAgICAgICAgIG1lc3NhZ2U6IGBhdHRlbXB0aW5nIHRvIHJlbmRlciBzdGF0aWMgSFRNTCBmb3IgJHtyZXEudXJsfWAsXG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc3QgZmlsZSA9XG4gICAgICAgICAgcmVzb2x2ZUhUTUwoc3RhdGljRGlyLCByZXEudXJsKSArIGRldkNsaWVudCArIGRldlNlcnZlckljb25cblxuICAgICAgICBsb2dnZXIuaW5mbyh7XG4gICAgICAgICAgbGFiZWw6ICdzZXJ2ZScsXG4gICAgICAgICAgbWVzc2FnZTogYDIwMCAke3JlcS51cmx9YCxcbiAgICAgICAgICBkdXJhdGlvbjogdGltZSgpXG4gICAgICAgIH0pXG5cbiAgICAgICAgc2VuZFNlcnZlcmxlc3NSZXNwb25zZShyZXMsIHsgYm9keTogZmlsZSB9KVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBsb2dnZXIuZGVidWcoe1xuICAgICAgICAgIGxhYmVsOiAnZGVidWcnLFxuICAgICAgICAgIG1lc3NhZ2U6IGBzZXJ2ZSBlcnJvcmAsXG4gICAgICAgICAgZXJyb3I6IGVcbiAgICAgICAgfSlcblxuICAgICAgICAvLyBleHBlY3QgRU5PRU5ULCBsb2cgZXZlcnl0aGluZyBlbHNlXG4gICAgICAgIGlmICghL0VOT0VOVHxFSVNESVIvLnRlc3QoZS5tZXNzYWdlKSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSlcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLypcbiAgICAgICAgICAgKiBObyBhc3NldCBmaWxlLCBubyBzdGF0aWMgZmlsZSwgdHJ5IGR5bmFtaWNcbiAgICAgICAgICAgKi9cbiAgICAgICAgICBjb25zdCBtYW5pZmVzdCA9IHJlcXVpcmUoY29uZmlnLnJvdXRlc01hbmlmZXN0KVxuICAgICAgICAgIGNvbnN0IHJvdXRlcyA9IE9iamVjdC5rZXlzKG1hbmlmZXN0KVxuICAgICAgICAgIGNvbnN0IGxhbWJkYUZpbGVwYXRoID0gcm91dGVzXG4gICAgICAgICAgICAubWFwKHJvdXRlID0+ICh7XG4gICAgICAgICAgICAgIG1hdGNoZXI6IHRvUmVnRXhwKHJvdXRlKSxcbiAgICAgICAgICAgICAgcm91dGUsXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIC5maWx0ZXIoKHsgbWF0Y2hlciB9KSA9PiB7XG4gICAgICAgICAgICAgIHJldHVybiBtYXRjaGVyLnBhdHRlcm4udGVzdChyZXEudXJsLnNwbGl0KCc/JylbMF0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLm1hcCgoeyByb3V0ZSB9KSA9PiBtYW5pZmVzdFtyb3V0ZV0pWzBdXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBJZiB3ZSBoYXZlIGEgc2VydmVybGVzcyBmdW5jdGlvbiwgZGVsZWdhdGUgdG8gaXQsIG90aGVyd2lzZSA0MDRcbiAgICAgICAgICAgKi9cbiAgICAgICAgICBpZiAobGFtYmRhRmlsZXBhdGgpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1Zyh7XG4gICAgICAgICAgICAgIGxhYmVsOiAnZGVidWcnLFxuICAgICAgICAgICAgICBtZXNzYWdlOiBgYXR0ZW1wdGluZyB0byByZW5kZXIgbGFtYmRhIGZvciAke3JlcS51cmx9YCxcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIGNvbnN0IHsgaGFuZGxlciB9OiB7IGhhbmRsZXI6IEFXU1snSGFuZGxlciddIH0gPSByZXF1aXJlKGxhbWJkYUZpbGVwYXRoKVxuICAgICAgICAgICAgY29uc3QgZXZlbnQgPSBhd2FpdCByZXF1ZXN0VG9FdmVudChyZXEpXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGhhbmRsZXIoZXZlbnQsIHt9KVxuICAgICAgICAgICAgY29uc3QgcmVkaXIgPVxuICAgICAgICAgICAgICByZXNwb25zZS5zdGF0dXNDb2RlID4gMjk5ICYmIHJlc3BvbnNlLnN0YXR1c0NvZGUgPCAzOTlcblxuICAgICAgICAgICAgLy8gZ2V0IG1pbWUgdHlwZVxuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHJlc3BvbnNlLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddXG4gICAgICAgICAgICBjb25zdCBleHQgPSB0eXBlID8gbWltZS5leHRlbnNpb24odHlwZSkgOiAnaHRtbCdcblxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oe1xuICAgICAgICAgICAgICBsYWJlbDogJ3NlcnZlJyxcbiAgICAgICAgICAgICAgbWVzc2FnZTogYCR7cmVzcG9uc2Uuc3RhdHVzQ29kZX0gJHtyZWRpciA/IHJlc3BvbnNlLmhlYWRlcnMuTG9jYXRpb24gOiByZXEudXJsfWAsXG4gICAgICAgICAgICAgIGR1cmF0aW9uOiB0aW1lKClcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIHNlbmRTZXJ2ZXJsZXNzUmVzcG9uc2UocmVzLCB7XG4gICAgICAgICAgICAgIHN0YXR1c0NvZGU6IHJlc3BvbnNlLnN0YXR1c0NvZGUsXG4gICAgICAgICAgICAgIGhlYWRlcnM6IHJlc3BvbnNlLmhlYWRlcnMsXG4gICAgICAgICAgICAgIG11bHRpVmFsdWVIZWFkZXJzOiByZXNwb25zZS5tdWx0aVZhbHVlSGVhZGVycyxcbiAgICAgICAgICAgICAgLy8gb25seSBodG1sIGNhbiBiZSBsaXZlLXJlbG9hZGVkLCBkdWhcbiAgICAgICAgICAgICAgYm9keTpcbiAgICAgICAgICAgICAgICBleHQgPT09ICdodG1sJ1xuICAgICAgICAgICAgICAgICAgPyByZXNwb25zZS5ib2R5LnNwbGl0KCc8L2JvZHk+JylbMF0gK1xuICAgICAgICAgICAgICAgICAgICBkZXZDbGllbnQgK1xuICAgICAgICAgICAgICAgICAgICBkZXZTZXJ2ZXJJY29uXG4gICAgICAgICAgICAgICAgICA6IHJlc3BvbnNlLmJvZHlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1Zyh7XG4gICAgICAgICAgICAgIGxhYmVsOiAnZGVidWcnLFxuICAgICAgICAgICAgICBtZXNzYWdlOiBgYXR0ZW1wdGluZyB0byByZW5kZXIgc3RhdGljIDQwNC5odG1sIHBhZ2UgZm9yICR7cmVxLnVybH1gLFxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAqIFRyeSB0byBmYWxsIGJhY2sgdG8gYSBzdGF0aWMgNDA0IHBhZ2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgY29uc3QgZmlsZSA9XG4gICAgICAgICAgICAgICAgcmVzb2x2ZUhUTUwoc3RhdGljRGlyLCAnNDA0JykgKyBkZXZDbGllbnQgKyBkZXZTZXJ2ZXJJY29uXG5cbiAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oe1xuICAgICAgICAgICAgICAgIGxhYmVsOiAnc2VydmUnLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGA0MDQgJHtyZXEudXJsfWAsIFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiB0aW1lKClcbiAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICBzZW5kU2VydmVybGVzc1Jlc3BvbnNlKHJlcywge1xuICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6IDQwNCxcbiAgICAgICAgICAgICAgICBib2R5OiBmaWxlXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIGlmICghZS5tZXNzYWdlLmluY2x1ZGVzKCdFTk9FTlQnKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSlcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGxvZ2dlci5kZWJ1Zyh7XG4gICAgICAgICAgICAgICAgbGFiZWw6ICdkZWJ1ZycsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYHJlbmRlcmluZyBkZWZhdWx0IDQwNCBIVE1MIHBhZ2UgZm9yICR7cmVxLnVybH1gLFxuICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgIGxvZ2dlci53YXJuKHtcbiAgICAgICAgICAgICAgICBsYWJlbDogJ3NlcnZlJyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgNDA0ICR7cmVxLnVybH1gLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiB0aW1lKClcbiAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICBzZW5kU2VydmVybGVzc1Jlc3BvbnNlKHJlcywge1xuICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6IDQwNCxcbiAgICAgICAgICAgICAgICBib2R5OiBkZWZhdWx0NDA0ICsgZGV2Q2xpZW50ICsgZGV2U2VydmVySWNvblxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGxvZ2dlci5kZWJ1Zyh7XG4gICAgICAgICAgICBsYWJlbDogJ2RlYnVnJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGByZW5kZXJpbmcgZGVmYXVsdCA1MDAgSFRNTCBwYWdlIGZvciAke3JlcS51cmx9YCxcbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgbG9nZ2VyLmVycm9yKHtcbiAgICAgICAgICAgIGxhYmVsOiAnc2VydmUnLFxuICAgICAgICAgICAgbWVzc2FnZTogYDUwMCAke3JlcS51cmx9YCxcbiAgICAgICAgICAgIGVycm9yOiBlLCBcbiAgICAgICAgICAgIGR1cmF0aW9uOiB0aW1lKClcbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgc2VuZFNlcnZlcmxlc3NSZXNwb25zZShyZXMsIHtcbiAgICAgICAgICAgIHN0YXR1c0NvZGU6IDUwMCxcbiAgICAgICAgICAgIGJvZHk6ICcnICsgZGV2Q2xpZW50ICsgZGV2U2VydmVySWNvbiAvLyBUT0RPIGRlZmF1bHQgNTAwIHNjcmVlblxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlcnZlIChjb25maWc6IFByZXN0YSkge1xuICBjb25zdCBwb3J0ID0gYXdhaXQgZ2V0UG9ydCh7IHBvcnQ6IDQwMDAgfSlcbiAgY29uc3Qgc2VydmVyID0gaHR0cFxuICAgIC5jcmVhdGVTZXJ2ZXIoY3JlYXRlU2VydmVySGFuZGxlcih7IHBvcnQsIGNvbmZpZyB9KSlcbiAgICAubGlzdGVuKHBvcnQpXG4gIGNvbnN0IHNvY2tldCA9IHJlcXVpcmUoJ3BvY2tldC5pbycpKHNlcnZlciwgeyBzZXJ2ZUNsaWVudDogZmFsc2UgfSlcblxuICBjb25maWcuZXZlbnRzLm9uKCdyZWZyZXNoJywgKCkgPT4ge1xuICAgIGxvZ2dlci5kZWJ1Zyh7XG4gICAgICBsYWJlbDogJ2RlYnVnJyxcbiAgICAgIG1lc3NhZ2U6IGByZWZyZXNoIGV2ZW50IHJlY2VpdmVkYCxcbiAgICB9KVxuXG4gICAgc29ja2V0LmVtaXQoJ3JlZnJlc2gnKVxuICB9KVxuXG4gIGNob2tpZGFyXG4gICAgLndhdGNoKGNvbmZpZy5hc3NldHMsIHsgaWdub3JlSW5pdGlhbDogdHJ1ZSB9KVxuICAgIC5vbignYWxsJywgKCkgPT4ge1xuICAgICAgY29uZmlnLmV2ZW50cy5lbWl0KCdyZWZyZXNoJylcbiAgICB9KVxuXG4gIHJldHVybiB7IHBvcnQgfVxufVxuIiwgImV4cG9ydCBjb25zdCBkZWZhdWx0NDA0ID0gYDwhLS0gYnVpbHQgd2l0aCBwcmVzdGEgaHR0cHM6Ly9ucG0uaW0vcHJlc3RhIC0tPlxuPCFET0NUWVBFIGh0bWw+XG48aHRtbD5cbiAgPGhlYWQ+XG4gICAgPG1ldGEgY2hhcnNldD1cIlVURi04XCIgLz5cbiAgICA8bWV0YSBuYW1lPVwidmlld3BvcnRcIiBjb250ZW50PVwid2lkdGg9ZGV2aWNlLXdpZHRoLGluaXRpYWwtc2NhbGU9MVwiIC8+XG4gICAgPHRpdGxlPjQwNDwvdGl0bGU+XG4gICAgPGxpbmtcbiAgICAgIHJlbD1cInN0eWxlc2hlZXRcIlxuICAgICAgdHlwZT1cInRleHQvY3NzXCJcbiAgICAgIGhyZWY9XCJodHRwczovL3VucGtnLmNvbS9zdmJzdHJhdGVANC4xLjEvZGlzdC9zdmJzdHJhdGUuY3NzXCJcbiAgICAvPlxuICA8L2hlYWQ+XG4gIDxib2R5PlxuICAgIDxkaXYgY2xhc3M9XCJmIGFpYyBqY2NcIiBzdHlsZT1cImhlaWdodDogMTAwdmhcIj5cbiAgICAgIDxoMiBjbGFzcz1cInAxXCIgc3R5bGU9XCJjb2xvcjogYmx1ZVwiPjQwNCBOb3QgRm91bmQ8L2gyPlxuICAgIDwvZGl2PlxuICA8L2JvZHk+XG48L2h0bWw+YFxuIiwgImltcG9ydCBodHRwIGZyb20gJ2h0dHAnXG5pbXBvcnQgeyBwYXJzZSBhcyBwYXJzZVVybCB9IGZyb20gJ3VybCdcbmltcG9ydCB7IHBhcnNlIGFzIHBhcnNlUXVlcnkgfSBmcm9tICdxdWVyeS1zdHJpbmcnXG5pbXBvcnQgcmF3Qm9keSBmcm9tICdyYXctYm9keSdcbmltcG9ydCBtaW1lIGZyb20gJ21pbWUtdHlwZXMnXG5cbmltcG9ydCB0eXBlIHsgQVdTIH0gZnJvbSAnLi4nXG5cbi8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL25ldGxpZnkvY2xpL2Jsb2IvMjdiYjdiOWIzMGQ0NjVhYmU4NmY4N2Y0Mjc0ZGQ3YTcxYjFiMDAzYi9zcmMvdXRpbHMvc2VydmUtZnVuY3Rpb25zLmpzI0wxNjdcbmNvbnN0IEJBU0VfNjRfTUlNRV9SRUdFWFAgPSAvaW1hZ2V8YXVkaW98dmlkZW98YXBwbGljYXRpb25cXC9wZGZ8YXBwbGljYXRpb25cXC96aXB8YXBwbGljYXRvblxcL29jdGV0LXN0cmVhbS9pXG5mdW5jdGlvbiBzaG91bGRCYXNlNjRFbmNvZGUgKGNvbnRlbnRUeXBlOiBzdHJpbmcpIHtcbiAgcmV0dXJuIEJvb2xlYW4oY29udGVudFR5cGUpICYmIEJBU0VfNjRfTUlNRV9SRUdFWFAudGVzdChjb250ZW50VHlwZSlcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlcXVlc3RUb0V2ZW50KHJlcTogaHR0cC5JbmNvbWluZ01lc3NhZ2UpOiBQcm9taXNlPEFXU1snSGFuZGxlckV2ZW50J10+IHtcbiAgLy8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vbmV0bGlmeS9jbGkvYmxvYi8yN2JiN2I5YjMwZDQ2NWFiZTg2Zjg3ZjQyNzRkZDdhNzFiMWIwMDNiL3NyYy91dGlscy9zZXJ2ZS1mdW5jdGlvbnMuanMjTDIwOFxuICBjb25zdCByZW1vdGVBZGRyZXNzID1cbiAgICBTdHJpbmcocmVxLmhlYWRlcnNbJ3gtZm9yd2FyZGVkLWZvciddKSB8fCByZXEuY29ubmVjdGlvbi5yZW1vdGVBZGRyZXNzXG4gIGNvbnN0IGlwID0gcmVtb3RlQWRkcmVzc1xuICAgIC5zcGxpdChyZW1vdGVBZGRyZXNzLmluY2x1ZGVzKCcuJykgPyAnOicgOiAnLCcpXG4gICAgLnBvcCgpXG4gICAgLnRyaW0oKVxuICBjb25zdCBpc0Jhc2U2NEVuY29kZWQgPSBzaG91bGRCYXNlNjRFbmNvZGUoXG4gICAgcmVxLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddXG4gIClcbiAgY29uc3QgYm9keSA9IHJlcS5oZWFkZXJzWydjb250ZW50LWxlbmd0aCddXG4gICAgPyBhd2FpdCByYXdCb2R5KHJlcSwge1xuICAgICAgICBsaW1pdDogJzFtYicsXG4gICAgICAgIGVuY29kaW5nOlxuICAgICAgICAgIG1pbWUuY2hhcnNldChyZXEuaGVhZGVyc1snY29udGVudC10eXBlJ10pIHx8IHVuZGVmaW5lZFxuICAgICAgfSlcbiAgICA6IHVuZGVmaW5lZFxuXG4gIHJldHVybiB7XG4gICAgcGF0aDogcmVxLnVybCxcbiAgICBodHRwTWV0aG9kOiByZXEubWV0aG9kLFxuICAgIC8vIEB0cy1pZ25vcmUgVE9ETyB0ZXN0IHNldC1jb29raWUgY29taW5nIGluIGFzIGFycmF5XG4gICAgaGVhZGVyczoge1xuICAgICAgLi4ucmVxLmhlYWRlcnMsXG4gICAgICAnY2xpZW50LWlwJzogaXBcbiAgICB9LFxuICAgIC8vIFRPRE8gc2hvdWxkIHRoZXNlIGhlYWRlcnMgYmUgZXhjbHVzaXZlbHkgc2luZ2xlIHZhbHVlIHZzIG11bHRpP1xuICAgIG11bHRpVmFsdWVIZWFkZXJzOiBPYmplY3Qua2V5cyhyZXEuaGVhZGVycykucmVkdWNlKFxuICAgICAgKGhlYWRlcnMsIGtleSkgPT4ge1xuICAgICAgICBpZiAoIXJlcS5oZWFkZXJzW2tleV0uaW5jbHVkZXMoJywnKSkgcmV0dXJuIGhlYWRlcnMgLy8gb25seSBpbmNsdWRlIG11bHRpLXZhbHVlIGhlYWRlcnMgaGVyZVxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5oZWFkZXJzLFxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSBUT0RPIGFnYWluLCBhcnJheSBoZWFkZXJzXG4gICAgICAgICAgICBba2V5XTogcmVxLmhlYWRlcnNba2V5XS5zcGxpdCgnLCcpXG4gICAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHt9XG4gICAgKSxcbiAgICAvLyBAdHMtaWdub3JlIFRPRE8gZG8gSSBuZWVkIHRvIGtlZXAgdGhlc2Ugc2VwYXJhdGU/XG4gICAgcXVlcnlTdHJpbmdQYXJhbWV0ZXJzOiBwYXJzZVF1ZXJ5KHBhcnNlVXJsKHJlcS51cmwpLnF1ZXJ5KSxcbiAgICBib2R5OiBib2R5XG4gICAgICA/IG5ldyBCdWZmZXIoYm9keSkudG9TdHJpbmcoaXNCYXNlNjRFbmNvZGVkID8gJ2Jhc2U2NCcgOiAndXRmOCcpXG4gICAgICA6IHVuZGVmaW5lZCxcbiAgICAgIGlzQmFzZTY0RW5jb2RlZFxuICB9XG59XG5cbiIsICJpbXBvcnQgaHR0cCBmcm9tICdodHRwJ1xuXG5pbXBvcnQgeyBub3JtYWxpemVSZXNwb25zZSB9IGZyb20gJy4vbm9ybWFsaXplUmVzcG9uc2UnXG5cbmltcG9ydCB0eXBlIHsgQVdTIH0gZnJvbSAnLi4nXG5cbmV4cG9ydCBmdW5jdGlvbiBzZW5kU2VydmVybGVzc1Jlc3BvbnNlIChyZXM6IGh0dHAuU2VydmVyUmVzcG9uc2UsIHI6IFBhcnRpYWw8QVdTWydIYW5kbGVyUmVzcG9uc2UnXT4pIHtcbiAgY29uc3QgcmVzcG9uc2UgPSBub3JtYWxpemVSZXNwb25zZShyKVxuXG4gIC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL25ldGxpZnkvY2xpL2Jsb2IvMjdiYjdiOWIzMGQ0NjVhYmU4NmY4N2Y0Mjc0ZGQ3YTcxYjFiMDAzYi9zcmMvdXRpbHMvc2VydmUtZnVuY3Rpb25zLmpzI0w3M1xuICBmb3IgKGNvbnN0IGtleSBpbiByLm11bHRpVmFsdWVIZWFkZXJzKSB7XG4gICAgcmVzLnNldEhlYWRlcihrZXksIFN0cmluZyhyLm11bHRpVmFsdWVIZWFkZXJzW2tleV0pKVxuICB9XG5cbiAgZm9yIChjb25zdCBrZXkgaW4gci5oZWFkZXJzKSB7XG4gICAgcmVzLnNldEhlYWRlcihrZXksIFN0cmluZyhyLmhlYWRlcnNba2V5XSkpXG4gIH1cblxuICByZXMuc3RhdHVzQ29kZSA9IHJlc3BvbnNlLnN0YXR1c0NvZGVcbiAgcmVzLndyaXRlKHJlc3BvbnNlLmJvZHkpXG4gIHJlcy5lbmQoKVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjtrNEJBRUEsT0FBZSx1QkFDZixHQUFpQixpdkNDSGpCLE1BQWMsb0JDQWQsTUFBaUIsbUJDRVYsYUFBMEIsQ0FDL0IsR0FBSSxHQUFTLEdBRWIsV0FBZSxLQUFlLEVBQW1CLENBQy9DLEVBQU8sSUFBTSxFQUFPLEdBQUksSUFBSSxBQUFDLEdBQWlCLEVBQUcsR0FBRyxJQUd0RCxXQUFhLEVBQVksRUFBOEIsQ0FDckQsU0FBTyxHQUFNLEVBQU8sR0FBTSxFQUFPLEdBQUksT0FBTyxHQUFNLENBQUMsR0FDNUMsSUFBTSxFQUFPLEdBQUksT0FBTyxFQUFPLEdBQUksUUFBUSxHQUFLLEdBR3pELFlBQWtCLENBQ2hCLEVBQVMsR0FHWCxXQUFvQixFQUFZLENBQzlCLE1BQU8sR0FBTyxJQUFPLEdBR3ZCLE1BQU8sQ0FDTCxP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
