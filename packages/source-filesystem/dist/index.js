var h=Object.create;var i=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var w=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty;var l=e=>i(e,"__esModule",{value:!0});var y=(e,t)=>{l(e);for(var s in t)i(e,s,{get:t[s],enumerable:!0})},b=(e,t,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of v(t))!x.call(e,r)&&r!=="default"&&i(e,r,{get:()=>t[r],enumerable:!(s=f(t,r))||s.enumerable});return e},c=e=>b(l(i(e!=null?h(w(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);y(exports,{createPlugin:()=>q,source:()=>I});var m=c(require("path")),u=c(require("presta")),p=c(require("pirates")),g=c(require("filewatcher")),d=c(require("tiny-glob/sync")),n,a={};setInterval(()=>{try{console.log(n.list())}catch(e){}},2e3);function q(){return()=>{n=(0,g.default)(),n.on("change",e=>{a[e]?(n.remove(a[e]),a[e].map(t=>n.remove(t))):(0,u.getCurrentPrestaInstance)().actions.build(e)}),(0,p.addHook)(e=>`module.exports = \`${e.replace(/`/g,"\\`")}\``,{exts:[".md"]})}}function I(e,t){let s=m.default.dirname(t),r=[].concat(e).map(o=>m.default.resolve(s,o)).map(o=>(0,d.default)(o,{absolute:!0})).flat();return console.log(r),setTimeout(()=>{a[t]=a[t]||[],a[t].push(...r),n.add(t),r.map(o=>n.add(o))},100),r.map(o=>(delete require.cache[o],[o,require(o)]))}0&&(module.exports={createPlugin,source});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vaW5kZXgudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCBwYXRoIGZyb20gJ3BhdGgnXG5pbXBvcnQgeyBnZXRDdXJyZW50UHJlc3RhSW5zdGFuY2UgfSBmcm9tICdwcmVzdGEnXG5pbXBvcnQgeyBhZGRIb29rIH0gZnJvbSAncGlyYXRlcydcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCBmaWxld2F0Y2hlciBmcm9tICdmaWxld2F0Y2hlcidcbmltcG9ydCBzeW5jIGZyb20gJ3RpbnktZ2xvYi9zeW5jJ1xuXG5sZXQgd2F0Y2hlcjogZmlsZXdhdGNoZXJcblxuY29uc3QgaGFzaDoge1xuICBbcGFyZW50OiBzdHJpbmddOiBzdHJpbmdbXVxufSA9IHt9XG5cbnNldEludGVydmFsKCgpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyh3YXRjaGVyLmxpc3QoKSlcbiAgfSBjYXRjaCAoZSkge31cbn0sIDIwMDApXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQbHVnaW4oKSB7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgd2F0Y2hlciA9IGZpbGV3YXRjaGVyKClcblxuICAgIHdhdGNoZXIub24oJ2NoYW5nZScsIChmaWxlOiBzdHJpbmcpID0+IHtcbiAgICAgIGlmIChoYXNoW2ZpbGVdKSB7XG4gICAgICAgIC8vIHBhcmVudCBmaWxlLCByZXNldCBldmVyeXRoaW5nXG4gICAgICAgIHdhdGNoZXIucmVtb3ZlKGhhc2hbZmlsZV0pXG4gICAgICAgIGhhc2hbZmlsZV0ubWFwKGZpbGUgPT4gd2F0Y2hlci5yZW1vdmUoZmlsZSkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyB3YXRjaGVkIGZpbGVcbiAgICAgICAgZ2V0Q3VycmVudFByZXN0YUluc3RhbmNlKCkuYWN0aW9ucy5idWlsZChmaWxlKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBhZGRIb29rKGNvZGUgPT4gYG1vZHVsZS5leHBvcnRzID0gXFxgJHtjb2RlLnJlcGxhY2UoL2AvZywgJ1xcXFxgJyl9XFxgYCwgeyBleHRzOiBbJy5tZCddIH0pXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNvdXJjZShnbG9iczogc3RyaW5nLCBwYXJlbnQ6IHN0cmluZykge1xuICBjb25zdCBkaXJuYW1lID0gcGF0aC5kaXJuYW1lKHBhcmVudClcbiAgY29uc3QgZmlsZXBhdGhzID0gKFtdIGFzIHN0cmluZ1tdKS5jb25jYXQoZ2xvYnMpXG4gICAgLm1hcChnbG9iID0+IHBhdGgucmVzb2x2ZShkaXJuYW1lLCBnbG9iKSlcbiAgICAubWFwKGdsb2IgPT4gc3luYyhnbG9iLCB7IGFic29sdXRlOiB0cnVlIH0pKVxuICAgIC5mbGF0KClcblxuICBjb25zb2xlLmxvZyhmaWxlcGF0aHMpXG5cbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgaGFzaFtwYXJlbnRdID0gaGFzaFtwYXJlbnRdIHx8IFtdXG4gICAgaGFzaFtwYXJlbnRdLnB1c2goLi4uZmlsZXBhdGhzKVxuICAgIHdhdGNoZXIuYWRkKHBhcmVudClcbiAgICBmaWxlcGF0aHMubWFwKGZpbGUgPT4gd2F0Y2hlci5hZGQoZmlsZSkpXG4gIH0sIDEwMCkgLy8gYXZvaWQgcmFjZSBjb25kaXRpb24gd2hlcmUgY2xlYW51cCBoYXBwZW5zIGFmdGVyIHNldHVwXG5cbiAgcmV0dXJuIGZpbGVwYXRoc1xuICAgIC5tYXAoZmlsZXBhdGggPT4ge1xuICAgICAgZGVsZXRlIHJlcXVpcmUuY2FjaGVbZmlsZXBhdGhdXG4gICAgICByZXR1cm4gWyBmaWxlcGF0aCwgcmVxdWlyZShmaWxlcGF0aCkgXVxuICAgIH0pXG59XG5cbi8vIFRPRE8gc3VwcG9ydCBtdWx0aXBsZSBzb3VyY2VzIGluIHNhbWUgZmlsZSwgY29uY2F0IGZpbGVwYXRocyBhbmQgcm1vdmUvYWRkIGFsbFxuIl0sCiAgIm1hcHBpbmdzIjogIm1sQkFBQSxtREFBaUIsbUJBQ2pCLEVBQXlDLHFCQUN6QyxFQUF3QixzQkFFeEIsRUFBd0IsMEJBQ3hCLEVBQWlCLDZCQUViLEVBRUUsRUFFRixHQUVKLFlBQVksSUFBTSxDQUNoQixHQUFJLENBQ0YsUUFBUSxJQUFJLEVBQVEsY0FDYixFQUFQLElBQ0QsS0FFSSxZQUF3QixDQUM3QixNQUFPLElBQU0sQ0FDWCxFQUFVLGdCQUVWLEVBQVEsR0FBRyxTQUFVLEFBQUMsR0FBaUIsQ0FDckMsQUFBSSxFQUFLLEdBRVAsR0FBUSxPQUFPLEVBQUssSUFDcEIsRUFBSyxHQUFNLElBQUksR0FBUSxFQUFRLE9BQU8sS0FHdEMsaUNBQTJCLFFBQVEsTUFBTSxLQUk3QyxjQUFRLEdBQVEsc0JBQXNCLEVBQUssUUFBUSxLQUFNLFdBQVksQ0FBRSxLQUFNLENBQUMsVUFJM0UsV0FBZ0IsRUFBZSxFQUFnQixDQUNwRCxHQUFNLEdBQVUsVUFBSyxRQUFRLEdBQ3ZCLEVBQWEsR0FBZ0IsT0FBTyxHQUN2QyxJQUFJLEdBQVEsVUFBSyxRQUFRLEVBQVMsSUFDbEMsSUFBSSxHQUFRLGNBQUssRUFBTSxDQUFFLFNBQVUsTUFDbkMsT0FFSCxlQUFRLElBQUksR0FFWixXQUFXLElBQU0sQ0FDZixFQUFLLEdBQVUsRUFBSyxJQUFXLEdBQy9CLEVBQUssR0FBUSxLQUFLLEdBQUcsR0FDckIsRUFBUSxJQUFJLEdBQ1osRUFBVSxJQUFJLEdBQVEsRUFBUSxJQUFJLEtBQ2pDLEtBRUksRUFDSixJQUFJLEdBQ0gsT0FBTyxTQUFRLE1BQU0sR0FDZCxDQUFFLEVBQVUsUUFBUSIsCiAgIm5hbWVzIjogW10KfQo=
